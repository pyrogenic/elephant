(this["webpackJsonp@pyrogenic/elephant"]=this["webpackJsonp@pyrogenic/elephant"]||[]).push([[0],{17:function(e,t,n){"use strict";var r=n(2),a=n.n(r),i=n(49),c=a.a.createContext({collection:new i.a,fieldsByName:new Map,inventory:new i.a,orders:new i.a,lists:new i.a,setError:console.error});t.a=c},178:function(e,t,n){(function(t){e.exports=function(){var e;return function e(t,n,r){function a(c,s){if(!n[c]){if(!t[c]){if(i)return i(c,!0);var o=new Error("Cannot find module '"+c+"'");throw o.code="MODULE_NOT_FOUND",o}var u=n[c]={exports:{}};t[c][0].call(u.exports,(function(e){var n=t[c][1][e];return a(n||e)}),u,u.exports,e,t,n,r)}return n[c].exports}for(var i=!1,c=0;c<r.length;c++)a(r[c]);return a}({"./aesprim":[function(t,n,r){!function(t,n){"use strict";"function"===typeof e&&e.amd?e(["exports"],n):n("undefined"!==typeof r?r:t.esprima={})}(this,(function(e){"use strict";var t,n,r,a,i,c,s,o,u,l,d,f,h,p,v,b,j,m;function g(e,t){if(!e)throw new Error("ASSERT: "+t)}function O(e){return e>=48&&e<=57}function y(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function x(e){return"01234567".indexOf(e)>=0}function k(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function S(e){return 10===e||13===e||8232===e||8233===e}function w(e){return 64==e||36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||92===e||e>=128&&s.NonAsciiIdentifierStart.test(String.fromCharCode(e))}function C(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||92===e||e>=128&&s.NonAsciiIdentifierPart.test(String.fromCharCode(e))}function E(e){switch(e){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}}function _(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function N(e){return"eval"===e||"arguments"===e}function I(e){if(l&&_(e))return!0;switch(e.length){case 2:return"if"===e||"in"===e||"do"===e;case 3:return"var"===e||"for"===e||"new"===e||"try"===e||"let"===e;case 4:return"this"===e||"else"===e||"case"===e||"void"===e||"with"===e||"enum"===e;case 5:return"while"===e||"break"===e||"catch"===e||"throw"===e||"const"===e||"yield"===e||"class"===e||"super"===e;case 6:return"return"===e||"typeof"===e||"delete"===e||"switch"===e||"export"===e||"import"===e;case 7:return"default"===e||"finally"===e||"extends"===e;case 8:return"function"===e||"continue"===e||"debugger"===e;case 10:return"instanceof"===e;default:return!1}}function R(e,t,n,r,a){var i;g("number"===typeof n,"Comment must have valid position"),j.lastCommentStart>=n||(j.lastCommentStart=n,i={type:e,value:t},m.range&&(i.range=[n,r]),m.loc&&(i.loc=a),m.comments.push(i),m.attachComment&&(m.leadingComments.push(i),m.trailingComments.push(i)))}function T(e){var t,n,r,a;for(t=d-e,n={start:{line:f,column:d-h-e}};d<p;)if(r=u.charCodeAt(d),++d,S(r))return m.comments&&(a=u.slice(t+e,d-1),n.end={line:f,column:d-h-1},R("Line",a,t,d-1,n)),13===r&&10===u.charCodeAt(d)&&++d,++f,void(h=d);m.comments&&(a=u.slice(t+e,d),n.end={line:f,column:d-h},R("Line",a,t,d,n))}function A(){var e,t,n,r;for(m.comments&&(e=d-2,t={start:{line:f,column:d-h-2}});d<p;)if(S(n=u.charCodeAt(d)))13===n&&10===u.charCodeAt(d+1)&&++d,++f,++d,h=d,d>=p&&ae({},c.UnexpectedToken,"ILLEGAL");else if(42===n){if(47===u.charCodeAt(d+1))return++d,++d,void(m.comments&&(r=u.slice(e+2,d-2),t.end={line:f,column:d-h},R("Block",r,e,d,t)));++d}else++d;ae({},c.UnexpectedToken,"ILLEGAL")}function P(){var e,t;for(t=0===d;d<p;)if(k(e=u.charCodeAt(d)))++d;else if(S(e))++d,13===e&&10===u.charCodeAt(d)&&++d,++f,h=d,t=!0;else if(47===e)if(47===(e=u.charCodeAt(d+1)))++d,++d,T(2),t=!0;else{if(42!==e)break;++d,++d,A()}else if(t&&45===e){if(45!==u.charCodeAt(d+1)||62!==u.charCodeAt(d+2))break;d+=3,T(3)}else{if(60!==e)break;if("!--"!==u.slice(d+1,d+4))break;++d,++d,++d,++d,T(4)}}function M(e){var t,n,r,a=0;for(n="u"===e?4:2,t=0;t<n;++t){if(!(d<p&&y(u[d])))return"";r=u[d++],a=16*a+"0123456789abcdef".indexOf(r.toLowerCase())}return String.fromCharCode(a)}function L(){var e,t;for(e=u.charCodeAt(d++),t=String.fromCharCode(e),92===e&&(117!==u.charCodeAt(d)&&ae({},c.UnexpectedToken,"ILLEGAL"),++d,(e=M("u"))&&"\\"!==e&&w(e.charCodeAt(0))||ae({},c.UnexpectedToken,"ILLEGAL"),t=e);d<p&&C(e=u.charCodeAt(d));)++d,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==u.charCodeAt(d)&&ae({},c.UnexpectedToken,"ILLEGAL"),++d,(e=M("u"))&&"\\"!==e&&C(e.charCodeAt(0))||ae({},c.UnexpectedToken,"ILLEGAL"),t+=e);return t}function F(){var e,t;for(e=d++;d<p;){if(92===(t=u.charCodeAt(d)))return d=e,L();if(!C(t))break;++d}return u.slice(e,d)}function D(){var e,n;return e=d,{type:1===(n=92===u.charCodeAt(d)?L():F()).length?t.Identifier:I(n)?t.Keyword:"null"===n?t.NullLiteral:"true"===n||"false"===n?t.BooleanLiteral:t.Identifier,value:n,lineNumber:f,lineStart:h,start:e,end:d}}function B(){var e,n,r,a,i=d,s=u.charCodeAt(d),o=u[d];switch(s){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++d,m.tokenize&&(40===s?m.openParenToken=m.tokens.length:123===s&&(m.openCurlyToken=m.tokens.length)),{type:t.Punctuator,value:String.fromCharCode(s),lineNumber:f,lineStart:h,start:i,end:d};default:if(61===(e=u.charCodeAt(d+1)))switch(s){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return d+=2,{type:t.Punctuator,value:String.fromCharCode(s)+String.fromCharCode(e),lineNumber:f,lineStart:h,start:i,end:d};case 33:case 61:return d+=2,61===u.charCodeAt(d)&&++d,{type:t.Punctuator,value:u.slice(i,d),lineNumber:f,lineStart:h,start:i,end:d}}}return">>>="===(a=u.substr(d,4))?(d+=4,{type:t.Punctuator,value:a,lineNumber:f,lineStart:h,start:i,end:d}):">>>"===(r=a.substr(0,3))||"<<="===r||">>="===r?(d+=3,{type:t.Punctuator,value:r,lineNumber:f,lineStart:h,start:i,end:d}):o===(n=r.substr(0,2))[1]&&"+-<>&|".indexOf(o)>=0||"=>"===n?(d+=2,{type:t.Punctuator,value:n,lineNumber:f,lineStart:h,start:i,end:d}):"<>=!+-*%&|^/".indexOf(o)>=0?(++d,{type:t.Punctuator,value:o,lineNumber:f,lineStart:h,start:i,end:d}):void ae({},c.UnexpectedToken,"ILLEGAL")}function G(e){for(var n="";d<p&&y(u[d]);)n+=u[d++];return 0===n.length&&ae({},c.UnexpectedToken,"ILLEGAL"),w(u.charCodeAt(d))&&ae({},c.UnexpectedToken,"ILLEGAL"),{type:t.NumericLiteral,value:parseInt("0x"+n,16),lineNumber:f,lineStart:h,start:e,end:d}}function U(e){for(var n="0"+u[d++];d<p&&x(u[d]);)n+=u[d++];return(w(u.charCodeAt(d))||O(u.charCodeAt(d)))&&ae({},c.UnexpectedToken,"ILLEGAL"),{type:t.NumericLiteral,value:parseInt(n,8),octal:!0,lineNumber:f,lineStart:h,start:e,end:d}}function z(){var e,n,r;if(g(O((r=u[d]).charCodeAt(0))||"."===r,"Numeric literal must start with a decimal digit or a decimal point"),n=d,e="","."!==r){if(e=u[d++],r=u[d],"0"===e){if("x"===r||"X"===r)return++d,G(n);if(x(r))return U(n);r&&O(r.charCodeAt(0))&&ae({},c.UnexpectedToken,"ILLEGAL")}for(;O(u.charCodeAt(d));)e+=u[d++];r=u[d]}if("."===r){for(e+=u[d++];O(u.charCodeAt(d));)e+=u[d++];r=u[d]}if("e"===r||"E"===r)if(e+=u[d++],"+"!==(r=u[d])&&"-"!==r||(e+=u[d++]),O(u.charCodeAt(d)))for(;O(u.charCodeAt(d));)e+=u[d++];else ae({},c.UnexpectedToken,"ILLEGAL");return w(u.charCodeAt(d))&&ae({},c.UnexpectedToken,"ILLEGAL"),{type:t.NumericLiteral,value:parseFloat(e),lineNumber:f,lineStart:h,start:n,end:d}}function $(){var e,n,r,a,i,s,o,l,v="",b=!1;for(o=f,l=h,g("'"===(e=u[d])||'"'===e,"String literal must starts with a quote"),n=d,++d;d<p;){if((r=u[d++])===e){e="";break}if("\\"===r)if((r=u[d++])&&S(r.charCodeAt(0)))++f,"\r"===r&&"\n"===u[d]&&++d,h=d;else switch(r){case"u":case"x":s=d,(i=M(r))?v+=i:(d=s,v+=r);break;case"n":v+="\n";break;case"r":v+="\r";break;case"t":v+="\t";break;case"b":v+="\b";break;case"f":v+="\f";break;case"v":v+="\v";break;default:x(r)?(0!==(a="01234567".indexOf(r))&&(b=!0),d<p&&x(u[d])&&(b=!0,a=8*a+"01234567".indexOf(u[d++]),"0123".indexOf(r)>=0&&d<p&&x(u[d])&&(a=8*a+"01234567".indexOf(u[d++]))),v+=String.fromCharCode(a)):v+=r}else{if(S(r.charCodeAt(0)))break;v+=r}}return""!==e&&ae({},c.UnexpectedToken,"ILLEGAL"),{type:t.StringLiteral,value:v,octal:b,startLineNumber:o,startLineStart:l,lineNumber:f,lineStart:h,start:n,end:d}}function V(e,t){var n;try{n=new RegExp(e,t)}catch(r){ae({},c.InvalidRegExp)}return n}function H(){var e,t,n,r;for(g("/"===(e=u[d]),"Regular expression literal must start with a slash"),t=u[d++],n=!1,r=!1;d<p;)if(t+=e=u[d++],"\\"===e)S((e=u[d++]).charCodeAt(0))&&ae({},c.UnterminatedRegExp),t+=e;else if(S(e.charCodeAt(0)))ae({},c.UnterminatedRegExp);else if(n)"]"===e&&(n=!1);else{if("/"===e){r=!0;break}"["===e&&(n=!0)}return r||ae({},c.UnterminatedRegExp),{value:t.substr(1,t.length-2),literal:t}}function q(){var e,t,n,r;for(t="",n="";d<p&&C((e=u[d]).charCodeAt(0));)if(++d,"\\"===e&&d<p)if("u"===(e=u[d])){if(r=++d,e=M("u"))for(n+=e,t+="\\u";r<d;++r)t+=u[r];else d=r,n+="u",t+="\\u";ie({},c.UnexpectedToken,"ILLEGAL")}else t+="\\",ie({},c.UnexpectedToken,"ILLEGAL");else n+=e,t+=e;return{value:n,literal:t}}function K(){var e,n,r,a;return b=null,P(),e=d,n=H(),r=q(),a=V(n.value,r.value),m.tokenize?{type:t.RegularExpression,value:a,lineNumber:f,lineStart:h,start:e,end:d}:{literal:n.literal+r.literal,value:a,start:e,end:d}}function W(){var e,t,n,r;return P(),e=d,t={start:{line:f,column:d-h}},n=K(),t.end={line:f,column:d-h},m.tokenize||(m.tokens.length>0&&(r=m.tokens[m.tokens.length-1]).range[0]===e&&"Punctuator"===r.type&&("/"!==r.value&&"/="!==r.value||m.tokens.pop()),m.tokens.push({type:"RegularExpression",value:n.literal,range:[e,d],loc:t})),n}function J(e){return e.type===t.Identifier||e.type===t.Keyword||e.type===t.BooleanLiteral||e.type===t.NullLiteral}function X(){var e,t;if(!(e=m.tokens[m.tokens.length-1]))return W();if("Punctuator"===e.type){if("]"===e.value)return B();if(")"===e.value)return!(t=m.tokens[m.openParenToken-1])||"Keyword"!==t.type||"if"!==t.value&&"while"!==t.value&&"for"!==t.value&&"with"!==t.value?B():W();if("}"===e.value){if(m.tokens[m.openCurlyToken-3]&&"Keyword"===m.tokens[m.openCurlyToken-3].type){if(!(t=m.tokens[m.openCurlyToken-4]))return B()}else{if(!m.tokens[m.openCurlyToken-4]||"Keyword"!==m.tokens[m.openCurlyToken-4].type)return B();if(!(t=m.tokens[m.openCurlyToken-5]))return W()}return r.indexOf(t.value)>=0?B():W()}return W()}return"Keyword"===e.type?W():B()}function Y(){var e;return P(),d>=p?{type:t.EOF,lineNumber:f,lineStart:h,start:d,end:d}:w(e=u.charCodeAt(d))?D():40===e||41===e||59===e?B():39===e||34===e?$():46===e?O(u.charCodeAt(d+1))?z():B():O(e)?z():m.tokenize&&47===e?X():B()}function Z(){var e,r,a;return P(),e={start:{line:f,column:d-h}},r=Y(),e.end={line:f,column:d-h},r.type!==t.EOF&&(a=u.slice(r.start,r.end),m.tokens.push({type:n[r.type],value:a,range:[r.start,r.end],loc:e})),r}function Q(){var e;return d=(e=b).end,f=e.lineNumber,h=e.lineStart,b="undefined"!==typeof m.tokens?Z():Y(),d=e.end,f=e.lineNumber,h=e.lineStart,e}function ee(){var e,t,n;e=d,t=f,n=h,b="undefined"!==typeof m.tokens?Z():Y(),d=e,f=t,h=n}function te(e,t){this.line=e,this.column=t}function ne(e,t,n,r){this.start=new te(e,t),this.end=new te(n,r)}function re(){var e,t,n,r;return e=d,t=f,n=h,P(),r=f!==t,d=e,f=t,h=n,r}function ae(e,t){var n,r=Array.prototype.slice.call(arguments,2),a=t.replace(/%(\d)/g,(function(e,t){return g(t<r.length,"Message reference must be in range"),r[t]}));throw"number"===typeof e.lineNumber?((n=new Error("Line "+e.lineNumber+": "+a)).index=e.start,n.lineNumber=e.lineNumber,n.column=e.start-h+1):((n=new Error("Line "+f+": "+a)).index=d,n.lineNumber=f,n.column=d-h+1),n.description=a,n}function ie(){try{ae.apply(null,arguments)}catch(e){if(!m.errors)throw e;m.errors.push(e)}}function ce(e){if(e.type===t.EOF&&ae(e,c.UnexpectedEOS),e.type===t.NumericLiteral&&ae(e,c.UnexpectedNumber),e.type===t.StringLiteral&&ae(e,c.UnexpectedString),e.type===t.Identifier&&ae(e,c.UnexpectedIdentifier),e.type===t.Keyword){if(E(e.value))ae(e,c.UnexpectedReserved);else if(l&&_(e.value))return void ie(e,c.StrictReservedWord);ae(e,c.UnexpectedToken,e.value)}ae(e,c.UnexpectedToken,e.value)}function se(e){var n=Q();n.type===t.Punctuator&&n.value===e||ce(n)}function oe(e){var n=Q();n.type===t.Keyword&&n.value===e||ce(n)}function ue(e){return b.type===t.Punctuator&&b.value===e}function le(e){return b.type===t.Keyword&&b.value===e}function de(){var e;return b.type===t.Punctuator&&("="===(e=b.value)||"*="===e||"/="===e||"%="===e||"+="===e||"-="===e||"<<="===e||">>="===e||">>>="===e||"&="===e||"^="===e||"|="===e)}function fe(){var e;59===u.charCodeAt(d)||ue(";")?Q():(e=f,P(),f===e&&(b.type===t.EOF||ue("}")||ce(b)))}function he(e){return e.type===a.Identifier||e.type===a.MemberExpression}function pe(){var e,t=[];for(e=b,se("[");!ue("]");)ue(",")?(Q(),t.push(null)):(t.push(Ae()),ue("]")||se(","));return Q(),v.markEnd(v.createArrayExpression(t),e)}function ve(e,t){var n,r,a;return n=l,a=b,r=ct(),t&&l&&N(e[0].name)&&ie(t,c.StrictParamName),l=n,v.markEnd(v.createFunctionExpression(null,e,[],r),a)}function be(){var e,n;return n=b,(e=Q()).type===t.StringLiteral||e.type===t.NumericLiteral?(l&&e.octal&&ie(e,c.StrictOctalLiteral),v.markEnd(v.createLiteral(e),n)):v.markEnd(v.createIdentifier(e.value),n)}function je(){var e,n,r,a,i,s;return s=b,(e=b).type===t.Identifier?(r=be(),"get"!==e.value||ue(":")?"set"!==e.value||ue(":")?(se(":"),a=Ae(),v.markEnd(v.createProperty("init",r,a),s)):(n=be(),se("("),(e=b).type!==t.Identifier?(se(")"),ie(e,c.UnexpectedToken,e.value),a=ve([])):(i=[Fe()],se(")"),a=ve(i,e)),v.markEnd(v.createProperty("set",n,a),s)):(n=be(),se("("),se(")"),a=ve([]),v.markEnd(v.createProperty("get",n,a),s))):e.type!==t.EOF&&e.type!==t.Punctuator?(n=be(),se(":"),a=Ae(),v.markEnd(v.createProperty("init",n,a),s)):void ce(e)}function me(){var e,t,n,r,s,o=[],u={},d=String;for(s=b,se("{");!ue("}");)t=(e=je()).key.type===a.Identifier?e.key.name:d(e.key.value),r="init"===e.kind?i.Data:"get"===e.kind?i.Get:i.Set,n="$"+t,Object.prototype.hasOwnProperty.call(u,n)?(u[n]===i.Data?l&&r===i.Data?ie({},c.StrictDuplicateProperty):r!==i.Data&&ie({},c.AccessorDataProperty):r===i.Data?ie({},c.AccessorDataProperty):u[n]&r&&ie({},c.AccessorGetSet),u[n]|=r):u[n]=r,o.push(e),ue("}")||se(",");return se("}"),v.markEnd(v.createObjectExpression(o),s)}function ge(){var e;return se("("),e=Pe(),se(")"),e}function Oe(){var e,n,r,a;if(ue("("))return ge();if(ue("["))return pe();if(ue("{"))return me();if(e=b.type,a=b,e===t.Identifier)r=v.createIdentifier(Q().value);else if(e===t.StringLiteral||e===t.NumericLiteral)l&&b.octal&&ie(b,c.StrictOctalLiteral),r=v.createLiteral(Q());else if(e===t.Keyword){if(le("function"))return ut();le("this")?(Q(),r=v.createThisExpression()):ce(Q())}else e===t.BooleanLiteral?((n=Q()).value="true"===n.value,r=v.createLiteral(n)):e===t.NullLiteral?((n=Q()).value=null,r=v.createLiteral(n)):ue("/")||ue("/=")?(r="undefined"!==typeof m.tokens?v.createLiteral(W()):v.createLiteral(K()),ee()):ce(Q());return v.markEnd(r,a)}function ye(){var e=[];if(se("("),!ue(")"))for(;d<p&&(e.push(Ae()),!ue(")"));)se(",");return se(")"),e}function xe(){var e,t;return t=b,J(e=Q())||ce(e),v.markEnd(v.createIdentifier(e.value),t)}function ke(){return se("."),xe()}function Se(){var e;return se("["),e=Pe(),se("]"),e}function we(){var e,t,n;return n=b,oe("new"),e=Ee(),t=ue("(")?ye():[],v.markEnd(v.createNewExpression(e,t),n)}function Ce(){var e,t,n,r,a;for(a=b,e=j.allowIn,j.allowIn=!0,t=le("new")?we():Oe(),j.allowIn=e;;){if(ue("."))r=ke(),t=v.createMemberExpression(".",t,r);else if(ue("("))n=ye(),t=v.createCallExpression(t,n);else{if(!ue("["))break;r=Se(),t=v.createMemberExpression("[",t,r)}v.markEnd(t,a)}return t}function Ee(){var e,t,n,r;for(r=b,e=j.allowIn,t=le("new")?we():Oe(),j.allowIn=e;ue(".")||ue("[");)ue("[")?(n=Se(),t=v.createMemberExpression("[",t,n)):(n=ke(),t=v.createMemberExpression(".",t,n)),v.markEnd(t,r);return t}function _e(){var e,n,r=b;return e=Ce(),b.type===t.Punctuator&&(!ue("++")&&!ue("--")||re()||(l&&e.type===a.Identifier&&N(e.name)&&ie({},c.StrictLHSPostfix),he(e)||ie({},c.InvalidLHSInAssignment),n=Q(),e=v.markEnd(v.createPostfixExpression(n.value,e),r))),e}function Ne(){var e,n,r;return b.type!==t.Punctuator&&b.type!==t.Keyword?n=_e():ue("++")||ue("--")?(r=b,e=Q(),n=Ne(),l&&n.type===a.Identifier&&N(n.name)&&ie({},c.StrictLHSPrefix),he(n)||ie({},c.InvalidLHSInAssignment),n=v.createUnaryExpression(e.value,n),n=v.markEnd(n,r)):ue("+")||ue("-")||ue("~")||ue("!")?(r=b,e=Q(),n=Ne(),n=v.createUnaryExpression(e.value,n),n=v.markEnd(n,r)):le("delete")||le("void")||le("typeof")?(r=b,e=Q(),n=Ne(),n=v.createUnaryExpression(e.value,n),n=v.markEnd(n,r),l&&"delete"===n.operator&&n.argument.type===a.Identifier&&ie({},c.StrictDelete)):n=_e(),n}function Ie(e,n){var r=0;if(e.type!==t.Punctuator&&e.type!==t.Keyword)return 0;switch(e.value){case"||":r=1;break;case"&&":r=2;break;case"|":r=3;break;case"^":r=4;break;case"&":r=5;break;case"==":case"!=":case"===":case"!==":r=6;break;case"<":case">":case"<=":case">=":case"instanceof":r=7;break;case"in":r=n?7:0;break;case"<<":case">>":case">>>":r=8;break;case"+":case"-":r=9;break;case"*":case"/":case"%":r=11}return r}function Re(){var e,t,n,r,a,i,c,s,o,u;if(e=b,o=Ne(),0===(a=Ie(r=b,j.allowIn)))return o;for(r.prec=a,Q(),t=[e,b],i=[o,r,c=Ne()];(a=Ie(b,j.allowIn))>0;){for(;i.length>2&&a<=i[i.length-2].prec;)c=i.pop(),s=i.pop().value,o=i.pop(),n=v.createBinaryExpression(s,o,c),t.pop(),e=t[t.length-1],v.markEnd(n,e),i.push(n);(r=Q()).prec=a,i.push(r),t.push(b),n=Ne(),i.push(n)}for(n=i[u=i.length-1],t.pop();u>1;)n=v.createBinaryExpression(i[u-1].value,i[u-2],n),u-=2,e=t.pop(),v.markEnd(n,e);return n}function Te(){var e,t,n,r,a;return a=b,e=Re(),ue("?")&&(Q(),t=j.allowIn,j.allowIn=!0,n=Ae(),j.allowIn=t,se(":"),r=Ae(),e=v.createConditionalExpression(e,n,r),v.markEnd(e,a)),e}function Ae(){var e,t,n,r,i;return e=b,i=b,r=t=Te(),de()&&(he(t)||ie({},c.InvalidLHSInAssignment),l&&t.type===a.Identifier&&N(t.name)&&ie(e,c.StrictLHSAssignment),e=Q(),n=Ae(),r=v.markEnd(v.createAssignmentExpression(e.value,t,n),i)),r}function Pe(){var e,t=b;if(e=Ae(),ue(",")){for(e=v.createSequenceExpression([e]);d<p&&ue(",");)Q(),e.expressions.push(Ae());v.markEnd(e,t)}return e}function Me(){for(var e,t=[];d<p&&!ue("}")&&"undefined"!==typeof(e=lt());)t.push(e);return t}function Le(){var e,t;return t=b,se("{"),e=Me(),se("}"),v.markEnd(v.createBlockStatement(e),t)}function Fe(){var e,n;return n=b,(e=Q()).type!==t.Identifier&&ce(e),v.markEnd(v.createIdentifier(e.value),n)}function De(e){var t,n,r=null;return n=b,t=Fe(),l&&N(t.name)&&ie({},c.StrictVarName),"const"===e?(se("="),r=Ae()):ue("=")&&(Q(),r=Ae()),v.markEnd(v.createVariableDeclarator(t,r),n)}function Be(e){var t=[];do{if(t.push(De(e)),!ue(","))break;Q()}while(d<p);return t}function Ge(){var e;return oe("var"),e=Be(),fe(),v.createVariableDeclaration(e,"var")}function Ue(e){var t,n;return n=b,oe(e),t=Be(e),fe(),v.markEnd(v.createVariableDeclaration(t,e),n)}function ze(){return se(";"),v.createEmptyStatement()}function $e(){var e=Pe();return fe(),v.createExpressionStatement(e)}function Ve(){var e,t,n;return oe("if"),se("("),e=Pe(),se(")"),t=it(),le("else")?(Q(),n=it()):n=null,v.createIfStatement(e,t,n)}function He(){var e,t,n;return oe("do"),n=j.inIteration,j.inIteration=!0,e=it(),j.inIteration=n,oe("while"),se("("),t=Pe(),se(")"),ue(";")&&Q(),v.createDoWhileStatement(e,t)}function qe(){var e,t,n;return oe("while"),se("("),e=Pe(),se(")"),n=j.inIteration,j.inIteration=!0,t=it(),j.inIteration=n,v.createWhileStatement(e,t)}function Ke(){var e,t,n;return n=b,e=Q(),t=Be(),v.markEnd(v.createVariableDeclaration(t,e.value),n)}function We(){var e,t,n,r,a,i,s;return e=t=n=null,oe("for"),se("("),ue(";")?Q():(le("var")||le("let")?(j.allowIn=!1,e=Ke(),j.allowIn=!0,1===e.declarations.length&&le("in")&&(Q(),r=e,a=Pe(),e=null)):(j.allowIn=!1,e=Pe(),j.allowIn=!0,le("in")&&(he(e)||ie({},c.InvalidLHSInForIn),Q(),r=e,a=Pe(),e=null)),"undefined"===typeof r&&se(";")),"undefined"===typeof r&&(ue(";")||(t=Pe()),se(";"),ue(")")||(n=Pe())),se(")"),s=j.inIteration,j.inIteration=!0,i=it(),j.inIteration=s,"undefined"===typeof r?v.createForStatement(e,t,n,i):v.createForInStatement(r,a,i)}function Je(){var e,n=null;return oe("continue"),59===u.charCodeAt(d)?(Q(),j.inIteration||ae({},c.IllegalContinue),v.createContinueStatement(null)):re()?(j.inIteration||ae({},c.IllegalContinue),v.createContinueStatement(null)):(b.type===t.Identifier&&(e="$"+(n=Fe()).name,Object.prototype.hasOwnProperty.call(j.labelSet,e)||ae({},c.UnknownLabel,n.name)),fe(),null!==n||j.inIteration||ae({},c.IllegalContinue),v.createContinueStatement(n))}function Xe(){var e,n=null;return oe("break"),59===u.charCodeAt(d)?(Q(),j.inIteration||j.inSwitch||ae({},c.IllegalBreak),v.createBreakStatement(null)):re()?(j.inIteration||j.inSwitch||ae({},c.IllegalBreak),v.createBreakStatement(null)):(b.type===t.Identifier&&(e="$"+(n=Fe()).name,Object.prototype.hasOwnProperty.call(j.labelSet,e)||ae({},c.UnknownLabel,n.name)),fe(),null!==n||j.inIteration||j.inSwitch||ae({},c.IllegalBreak),v.createBreakStatement(n))}function Ye(){var e=null;return oe("return"),j.inFunctionBody||ie({},c.IllegalReturn),32===u.charCodeAt(d)&&w(u.charCodeAt(d+1))?(e=Pe(),fe(),v.createReturnStatement(e)):re()?v.createReturnStatement(null):(ue(";")||ue("}")||b.type===t.EOF||(e=Pe()),fe(),v.createReturnStatement(e))}function Ze(){var e,t;return l&&(P(),ie({},c.StrictModeWith)),oe("with"),se("("),e=Pe(),se(")"),t=it(),v.createWithStatement(e,t)}function Qe(){var e,t,n,r=[];for(n=b,le("default")?(Q(),e=null):(oe("case"),e=Pe()),se(":");d<p&&!(ue("}")||le("default")||le("case"));)t=it(),r.push(t);return v.markEnd(v.createSwitchCase(e,r),n)}function et(){var e,t,n,r,a;if(oe("switch"),se("("),e=Pe(),se(")"),se("{"),t=[],ue("}"))return Q(),v.createSwitchStatement(e,t);for(r=j.inSwitch,j.inSwitch=!0,a=!1;d<p&&!ue("}");)null===(n=Qe()).test&&(a&&ae({},c.MultipleDefaultsInSwitch),a=!0),t.push(n);return j.inSwitch=r,se("}"),v.createSwitchStatement(e,t)}function tt(){var e;return oe("throw"),re()&&ae({},c.NewlineAfterThrow),e=Pe(),fe(),v.createThrowStatement(e)}function nt(){var e,t,n;return n=b,oe("catch"),se("("),ue(")")&&ce(b),e=Fe(),l&&N(e.name)&&ie({},c.StrictCatchVariable),se(")"),t=Le(),v.markEnd(v.createCatchClause(e,t),n)}function rt(){var e,t=[],n=null;return oe("try"),e=Le(),le("catch")&&t.push(nt()),le("finally")&&(Q(),n=Le()),0!==t.length||n||ae({},c.NoCatchOrFinally),v.createTryStatement(e,[],t,n)}function at(){return oe("debugger"),fe(),v.createDebuggerStatement()}function it(){var e,n,r,i,s=b.type;if(s===t.EOF&&ce(b),s===t.Punctuator&&"{"===b.value)return Le();if(i=b,s===t.Punctuator)switch(b.value){case";":return v.markEnd(ze(),i);case"(":return v.markEnd($e(),i)}if(s===t.Keyword)switch(b.value){case"break":return v.markEnd(Xe(),i);case"continue":return v.markEnd(Je(),i);case"debugger":return v.markEnd(at(),i);case"do":return v.markEnd(He(),i);case"for":return v.markEnd(We(),i);case"function":return v.markEnd(ot(),i);case"if":return v.markEnd(Ve(),i);case"return":return v.markEnd(Ye(),i);case"switch":return v.markEnd(et(),i);case"throw":return v.markEnd(tt(),i);case"try":return v.markEnd(rt(),i);case"var":return v.markEnd(Ge(),i);case"while":return v.markEnd(qe(),i);case"with":return v.markEnd(Ze(),i)}return(e=Pe()).type===a.Identifier&&ue(":")?(Q(),r="$"+e.name,Object.prototype.hasOwnProperty.call(j.labelSet,r)&&ae({},c.Redeclaration,"Label",e.name),j.labelSet[r]=!0,n=it(),delete j.labelSet[r],v.markEnd(v.createLabeledStatement(e,n),i)):(fe(),v.markEnd(v.createExpressionStatement(e),i))}function ct(){var e,n,r,i,s,o,f,h,m=[];for(h=b,se("{");d<p&&b.type===t.StringLiteral&&(n=b,e=lt(),m.push(e),e.expression.type===a.Literal);)"use strict"===u.slice(n.start+1,n.end-1)?(l=!0,r&&ie(r,c.StrictOctalLiteral)):!r&&n.octal&&(r=n);for(i=j.labelSet,s=j.inIteration,o=j.inSwitch,f=j.inFunctionBody,j.labelSet={},j.inIteration=!1,j.inSwitch=!1,j.inFunctionBody=!0;d<p&&!ue("}")&&"undefined"!==typeof(e=lt());)m.push(e);return se("}"),j.labelSet=i,j.inIteration=s,j.inSwitch=o,j.inFunctionBody=f,v.markEnd(v.createBlockStatement(m),h)}function st(e){var t,n,r,a,i,s,o=[];if(se("("),!ue(")"))for(a={};d<p&&(n=b,t=Fe(),i="$"+n.value,l?(N(n.value)&&(r=n,s=c.StrictParamName),Object.prototype.hasOwnProperty.call(a,i)&&(r=n,s=c.StrictParamDupe)):e||(N(n.value)?(e=n,s=c.StrictParamName):_(n.value)?(e=n,s=c.StrictReservedWord):Object.prototype.hasOwnProperty.call(a,i)&&(e=n,s=c.StrictParamDupe)),o.push(t),a[i]=!0,!ue(")"));)se(",");return se(")"),{params:o,stricted:r,firstRestricted:e,message:s}}function ot(){var e,t,n,r,a,i,s,o,u,d=[];return u=b,oe("function"),n=b,e=Fe(),l?N(n.value)&&ie(n,c.StrictFunctionName):N(n.value)?(i=n,s=c.StrictFunctionName):_(n.value)&&(i=n,s=c.StrictReservedWord),d=(a=st(i)).params,r=a.stricted,i=a.firstRestricted,a.message&&(s=a.message),o=l,t=ct(),l&&i&&ae(i,s),l&&r&&ie(r,s),l=o,v.markEnd(v.createFunctionDeclaration(e,d,[],t),u)}function ut(){var e,t,n,r,a,i,s,o,u=null,d=[];return o=b,oe("function"),ue("(")||(e=b,u=Fe(),l?N(e.value)&&ie(e,c.StrictFunctionName):N(e.value)?(n=e,r=c.StrictFunctionName):_(e.value)&&(n=e,r=c.StrictReservedWord)),d=(a=st(n)).params,t=a.stricted,n=a.firstRestricted,a.message&&(r=a.message),s=l,i=ct(),l&&n&&ae(n,r),l&&t&&ie(t,r),l=s,v.markEnd(v.createFunctionExpression(u,d,[],i),o)}function lt(){if(b.type===t.Keyword)switch(b.value){case"const":case"let":return Ue(b.value);case"function":return ot();default:return it()}if(b.type!==t.EOF)return it()}function dt(){for(var e,n,r,i=[];d<p&&(n=b).type===t.StringLiteral&&(e=lt(),i.push(e),e.expression.type===a.Literal);)"use strict"===u.slice(n.start+1,n.end-1)?(l=!0,r&&ie(r,c.StrictOctalLiteral)):!r&&n.octal&&(r=n);for(;d<p&&"undefined"!==typeof(e=lt());)i.push(e);return i}function ft(){var e,t;return P(),ee(),t=b,l=!1,e=dt(),v.markEnd(v.createProgram(e),t)}function ht(){var e,t,n,r=[];for(e=0;e<m.tokens.length;++e)n={type:(t=m.tokens[e]).type,value:t.value},m.range&&(n.range=t.range),m.loc&&(n.loc=t.loc),r.push(n);m.tokens=r}function pt(e,n){var r;"string"===typeof e||e instanceof String||(e=String(e)),v=o,d=0,f=(u=e).length>0?1:0,h=0,p=u.length,b=null,j={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},m={},(n=n||{}).tokens=!0,m.tokens=[],m.tokenize=!0,m.openParenToken=-1,m.openCurlyToken=-1,m.range="boolean"===typeof n.range&&n.range,m.loc="boolean"===typeof n.loc&&n.loc,"boolean"===typeof n.comment&&n.comment&&(m.comments=[]),"boolean"===typeof n.tolerant&&n.tolerant&&(m.errors=[]);try{if(ee(),b.type===t.EOF)return m.tokens;for(Q();b.type!==t.EOF;)try{Q()}catch(a){if(m.errors){m.errors.push(a);break}throw a}ht(),r=m.tokens,"undefined"!==typeof m.comments&&(r.comments=m.comments),"undefined"!==typeof m.errors&&(r.errors=m.errors)}catch(i){throw i}finally{m={}}return r}function vt(e,t){var n,r;r=String,"string"===typeof e||e instanceof String||(e=r(e)),v=o,d=0,f=(u=e).length>0?1:0,h=0,p=u.length,b=null,j={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},m={},"undefined"!==typeof t&&(m.range="boolean"===typeof t.range&&t.range,m.loc="boolean"===typeof t.loc&&t.loc,m.attachComment="boolean"===typeof t.attachComment&&t.attachComment,m.loc&&null!==t.source&&void 0!==t.source&&(m.source=r(t.source)),"boolean"===typeof t.tokens&&t.tokens&&(m.tokens=[]),"boolean"===typeof t.comment&&t.comment&&(m.comments=[]),"boolean"===typeof t.tolerant&&t.tolerant&&(m.errors=[]),m.attachComment&&(m.range=!0,m.comments=[],m.bottomRightStack=[],m.trailingComments=[],m.leadingComments=[]));try{n=ft(),"undefined"!==typeof m.comments&&(n.comments=m.comments),"undefined"!==typeof m.tokens&&(ht(),n.tokens=m.tokens),"undefined"!==typeof m.errors&&(n.errors=m.errors)}catch(a){throw a}finally{m={}}return n}(n={})[(t={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9}).BooleanLiteral]="Boolean",n[t.EOF]="<end>",n[t.Identifier]="Identifier",n[t.Keyword]="Keyword",n[t.NullLiteral]="Null",n[t.NumericLiteral]="Numeric",n[t.Punctuator]="Punctuator",n[t.StringLiteral]="String",n[t.RegularExpression]="RegularExpression",r=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="],a={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"},i={Data:1,Get:2,Set:4},c={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"},s={NonAsciiIdentifierStart:new RegExp("[\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]"),NonAsciiIdentifierPart:new RegExp("[\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0300-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u0483-\u0487\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u05d0-\u05ea\u05f0-\u05f2\u0610-\u061a\u0620-\u0669\u066e-\u06d3\u06d5-\u06dc\u06df-\u06e8\u06ea-\u06fc\u06ff\u0710-\u074a\u074d-\u07b1\u07c0-\u07f5\u07fa\u0800-\u082d\u0840-\u085b\u08a0\u08a2-\u08ac\u08e4-\u08fe\u0900-\u0963\u0966-\u096f\u0971-\u0977\u0979-\u097f\u0981-\u0983\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bc-\u09c4\u09c7\u09c8\u09cb-\u09ce\u09d7\u09dc\u09dd\u09df-\u09e3\u09e6-\u09f1\u0a01-\u0a03\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a59-\u0a5c\u0a5e\u0a66-\u0a75\u0a81-\u0a83\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abc-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ad0\u0ae0-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3c-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5c\u0b5d\u0b5f-\u0b63\u0b66-\u0b6f\u0b71\u0b82\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd0\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c58\u0c59\u0c60-\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbc-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0cde\u0ce0-\u0ce3\u0ce6-\u0cef\u0cf1\u0cf2\u0d02\u0d03\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d-\u0d44\u0d46-\u0d48\u0d4a-\u0d4e\u0d57\u0d60-\u0d63\u0d66-\u0d6f\u0d7a-\u0d7f\u0d82\u0d83\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e01-\u0e3a\u0e40-\u0e4e\u0e50-\u0e59\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb9\u0ebb-\u0ebd\u0ec0-\u0ec4\u0ec6\u0ec8-\u0ecd\u0ed0-\u0ed9\u0edc-\u0edf\u0f00\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e-\u0f47\u0f49-\u0f6c\u0f71-\u0f84\u0f86-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1049\u1050-\u109d\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u135d-\u135f\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176c\u176e-\u1770\u1772\u1773\u1780-\u17d3\u17d7\u17dc\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1820-\u1877\u1880-\u18aa\u18b0-\u18f5\u1900-\u191c\u1920-\u192b\u1930-\u193b\u1946-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u19d0-\u19d9\u1a00-\u1a1b\u1a20-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1aa7\u1b00-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1bf3\u1c00-\u1c37\u1c40-\u1c49\u1c4d-\u1c7d\u1cd0-\u1cd2\u1cd4-\u1cf6\u1d00-\u1de6\u1dfc-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u200c\u200d\u203f\u2040\u2054\u2071\u207f\u2090-\u209c\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d7f-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2de0-\u2dff\u2e2f\u3005-\u3007\u3021-\u302f\u3031-\u3035\u3038-\u303c\u3041-\u3096\u3099\u309a\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua62b\ua640-\ua66f\ua674-\ua67d\ua67f-\ua697\ua69f-\ua6f1\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua827\ua840-\ua873\ua880-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f7\ua8fb\ua900-\ua92d\ua930-\ua953\ua960-\ua97c\ua980-\ua9c0\ua9cf-\ua9d9\uaa00-\uaa36\uaa40-\uaa4d\uaa50-\uaa59\uaa60-\uaa76\uaa7a\uaa7b\uaa80-\uaac2\uaadb-\uaadd\uaae0-\uaaef\uaaf2-\uaaf6\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabea\uabec\uabed\uabf0-\uabf9\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\ufe70-\ufe74\ufe76-\ufefc\uff10-\uff19\uff21-\uff3a\uff3f\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]")},o={name:"SyntaxTree",processComment:function(e){var t,n;if(!(e.type===a.Program&&e.body.length>0)){for(m.trailingComments.length>0?m.trailingComments[0].range[0]>=e.range[1]?(n=m.trailingComments,m.trailingComments=[]):m.trailingComments.length=0:m.bottomRightStack.length>0&&m.bottomRightStack[m.bottomRightStack.length-1].trailingComments&&m.bottomRightStack[m.bottomRightStack.length-1].trailingComments[0].range[0]>=e.range[1]&&(n=m.bottomRightStack[m.bottomRightStack.length-1].trailingComments,delete m.bottomRightStack[m.bottomRightStack.length-1].trailingComments);m.bottomRightStack.length>0&&m.bottomRightStack[m.bottomRightStack.length-1].range[0]>=e.range[0];)t=m.bottomRightStack.pop();t?t.leadingComments&&t.leadingComments[t.leadingComments.length-1].range[1]<=e.range[0]&&(e.leadingComments=t.leadingComments,delete t.leadingComments):m.leadingComments.length>0&&m.leadingComments[m.leadingComments.length-1].range[1]<=e.range[0]&&(e.leadingComments=m.leadingComments,m.leadingComments=[]),n&&(e.trailingComments=n),m.bottomRightStack.push(e)}},markEnd:function(e,t){return m.range&&(e.range=[t.start,d]),m.loc&&(e.loc=new ne(void 0===t.startLineNumber?t.lineNumber:t.startLineNumber,t.start-(void 0===t.startLineStart?t.lineStart:t.startLineStart),f,d-h),this.postProcess(e)),m.attachComment&&this.processComment(e),e},postProcess:function(e){return m.source&&(e.loc.source=m.source),e},createArrayExpression:function(e){return{type:a.ArrayExpression,elements:e}},createAssignmentExpression:function(e,t,n){return{type:a.AssignmentExpression,operator:e,left:t,right:n}},createBinaryExpression:function(e,t,n){return{type:"||"===e||"&&"===e?a.LogicalExpression:a.BinaryExpression,operator:e,left:t,right:n}},createBlockStatement:function(e){return{type:a.BlockStatement,body:e}},createBreakStatement:function(e){return{type:a.BreakStatement,label:e}},createCallExpression:function(e,t){return{type:a.CallExpression,callee:e,arguments:t}},createCatchClause:function(e,t){return{type:a.CatchClause,param:e,body:t}},createConditionalExpression:function(e,t,n){return{type:a.ConditionalExpression,test:e,consequent:t,alternate:n}},createContinueStatement:function(e){return{type:a.ContinueStatement,label:e}},createDebuggerStatement:function(){return{type:a.DebuggerStatement}},createDoWhileStatement:function(e,t){return{type:a.DoWhileStatement,body:e,test:t}},createEmptyStatement:function(){return{type:a.EmptyStatement}},createExpressionStatement:function(e){return{type:a.ExpressionStatement,expression:e}},createForStatement:function(e,t,n,r){return{type:a.ForStatement,init:e,test:t,update:n,body:r}},createForInStatement:function(e,t,n){return{type:a.ForInStatement,left:e,right:t,body:n,each:!1}},createFunctionDeclaration:function(e,t,n,r){return{type:a.FunctionDeclaration,id:e,params:t,defaults:n,body:r,rest:null,generator:!1,expression:!1}},createFunctionExpression:function(e,t,n,r){return{type:a.FunctionExpression,id:e,params:t,defaults:n,body:r,rest:null,generator:!1,expression:!1}},createIdentifier:function(e){return{type:a.Identifier,name:e}},createIfStatement:function(e,t,n){return{type:a.IfStatement,test:e,consequent:t,alternate:n}},createLabeledStatement:function(e,t){return{type:a.LabeledStatement,label:e,body:t}},createLiteral:function(e){return{type:a.Literal,value:e.value,raw:u.slice(e.start,e.end)}},createMemberExpression:function(e,t,n){return{type:a.MemberExpression,computed:"["===e,object:t,property:n}},createNewExpression:function(e,t){return{type:a.NewExpression,callee:e,arguments:t}},createObjectExpression:function(e){return{type:a.ObjectExpression,properties:e}},createPostfixExpression:function(e,t){return{type:a.UpdateExpression,operator:e,argument:t,prefix:!1}},createProgram:function(e){return{type:a.Program,body:e}},createProperty:function(e,t,n){return{type:a.Property,key:t,value:n,kind:e}},createReturnStatement:function(e){return{type:a.ReturnStatement,argument:e}},createSequenceExpression:function(e){return{type:a.SequenceExpression,expressions:e}},createSwitchCase:function(e,t){return{type:a.SwitchCase,test:e,consequent:t}},createSwitchStatement:function(e,t){return{type:a.SwitchStatement,discriminant:e,cases:t}},createThisExpression:function(){return{type:a.ThisExpression}},createThrowStatement:function(e){return{type:a.ThrowStatement,argument:e}},createTryStatement:function(e,t,n,r){return{type:a.TryStatement,block:e,guardedHandlers:t,handlers:n,finalizer:r}},createUnaryExpression:function(e,t){return"++"===e||"--"===e?{type:a.UpdateExpression,operator:e,argument:t,prefix:!0}:{type:a.UnaryExpression,operator:e,argument:t,prefix:!0}},createVariableDeclaration:function(e,t){return{type:a.VariableDeclaration,declarations:e,kind:t}},createVariableDeclarator:function(e,t){return{type:a.VariableDeclarator,id:e,init:t}},createWhileStatement:function(e,t){return{type:a.WhileStatement,test:e,body:t}},createWithStatement:function(e,t){return{type:a.WithStatement,object:e,body:t}}},e.version="1.2.2",e.tokenize=pt,e.parse=vt,e.Syntax=function(){var e,t={};for(e in"function"===typeof Object.create&&(t=Object.create(null)),a)a.hasOwnProperty(e)&&(t[e]=a[e]);return"function"===typeof Object.freeze&&Object.freeze(t),t}()}))},{}],1:[function(e,t,n){(function(r){var a=function(){var e={trace:function(){},yy:{},symbols_:{error:2,JSON_PATH:3,DOLLAR:4,PATH_COMPONENTS:5,LEADING_CHILD_MEMBER_EXPRESSION:6,PATH_COMPONENT:7,MEMBER_COMPONENT:8,SUBSCRIPT_COMPONENT:9,CHILD_MEMBER_COMPONENT:10,DESCENDANT_MEMBER_COMPONENT:11,DOT:12,MEMBER_EXPRESSION:13,DOT_DOT:14,STAR:15,IDENTIFIER:16,SCRIPT_EXPRESSION:17,INTEGER:18,END:19,CHILD_SUBSCRIPT_COMPONENT:20,DESCENDANT_SUBSCRIPT_COMPONENT:21,"[":22,SUBSCRIPT:23,"]":24,SUBSCRIPT_EXPRESSION:25,SUBSCRIPT_EXPRESSION_LIST:26,SUBSCRIPT_EXPRESSION_LISTABLE:27,",":28,STRING_LITERAL:29,ARRAY_SLICE:30,FILTER_EXPRESSION:31,QQ_STRING:32,Q_STRING:33,$accept:0,$end:1},terminals_:{2:"error",4:"DOLLAR",12:"DOT",14:"DOT_DOT",15:"STAR",16:"IDENTIFIER",17:"SCRIPT_EXPRESSION",18:"INTEGER",19:"END",22:"[",24:"]",28:",",30:"ARRAY_SLICE",31:"FILTER_EXPRESSION",32:"QQ_STRING",33:"Q_STRING"},productions_:[0,[3,1],[3,2],[3,1],[3,2],[5,1],[5,2],[7,1],[7,1],[8,1],[8,1],[10,2],[6,1],[11,2],[13,1],[13,1],[13,1],[13,1],[13,1],[9,1],[9,1],[20,3],[21,4],[23,1],[23,1],[26,1],[26,3],[27,1],[27,1],[27,1],[25,1],[25,1],[25,1],[29,1],[29,1]],performAction:function(e,n,r,a,i,c,s){a.ast||(a.ast=t,t.initialize());var o=c.length-1;switch(i){case 1:return a.ast.set({expression:{type:"root",value:c[o]}}),a.ast.unshift(),a.ast.yield();case 2:return a.ast.set({expression:{type:"root",value:c[o-1]}}),a.ast.unshift(),a.ast.yield();case 3:return a.ast.unshift(),a.ast.yield();case 4:return a.ast.set({operation:"member",scope:"child",expression:{type:"identifier",value:c[o-1]}}),a.ast.unshift(),a.ast.yield();case 5:case 6:break;case 7:a.ast.set({operation:"member"}),a.ast.push();break;case 8:a.ast.set({operation:"subscript"}),a.ast.push();break;case 9:a.ast.set({scope:"child"});break;case 10:a.ast.set({scope:"descendant"});break;case 11:break;case 12:a.ast.set({scope:"child",operation:"member"});break;case 13:break;case 14:a.ast.set({expression:{type:"wildcard",value:c[o]}});break;case 15:a.ast.set({expression:{type:"identifier",value:c[o]}});break;case 16:a.ast.set({expression:{type:"script_expression",value:c[o]}});break;case 17:a.ast.set({expression:{type:"numeric_literal",value:parseInt(c[o])}});break;case 18:break;case 19:a.ast.set({scope:"child"});break;case 20:a.ast.set({scope:"descendant"});break;case 21:case 22:case 23:break;case 24:c[o].length>1?a.ast.set({expression:{type:"union",value:c[o]}}):this.$=c[o];break;case 25:this.$=[c[o]];break;case 26:this.$=c[o-2].concat(c[o]);break;case 27:this.$={expression:{type:"numeric_literal",value:parseInt(c[o])}},a.ast.set(this.$);break;case 28:this.$={expression:{type:"string_literal",value:c[o]}},a.ast.set(this.$);break;case 29:this.$={expression:{type:"slice",value:c[o]}},a.ast.set(this.$);break;case 30:this.$={expression:{type:"wildcard",value:c[o]}},a.ast.set(this.$);break;case 31:this.$={expression:{type:"script_expression",value:c[o]}},a.ast.set(this.$);break;case 32:this.$={expression:{type:"filter_expression",value:c[o]}},a.ast.set(this.$);break;case 33:case 34:this.$=c[o]}},table:[{3:1,4:[1,2],6:3,13:4,15:[1,5],16:[1,6],17:[1,7],18:[1,8],19:[1,9]},{1:[3]},{1:[2,1],5:10,7:11,8:12,9:13,10:14,11:15,12:[1,18],14:[1,19],20:16,21:17,22:[1,20]},{1:[2,3],5:21,7:11,8:12,9:13,10:14,11:15,12:[1,18],14:[1,19],20:16,21:17,22:[1,20]},{1:[2,12],12:[2,12],14:[2,12],22:[2,12]},{1:[2,14],12:[2,14],14:[2,14],22:[2,14]},{1:[2,15],12:[2,15],14:[2,15],22:[2,15]},{1:[2,16],12:[2,16],14:[2,16],22:[2,16]},{1:[2,17],12:[2,17],14:[2,17],22:[2,17]},{1:[2,18],12:[2,18],14:[2,18],22:[2,18]},{1:[2,2],7:22,8:12,9:13,10:14,11:15,12:[1,18],14:[1,19],20:16,21:17,22:[1,20]},{1:[2,5],12:[2,5],14:[2,5],22:[2,5]},{1:[2,7],12:[2,7],14:[2,7],22:[2,7]},{1:[2,8],12:[2,8],14:[2,8],22:[2,8]},{1:[2,9],12:[2,9],14:[2,9],22:[2,9]},{1:[2,10],12:[2,10],14:[2,10],22:[2,10]},{1:[2,19],12:[2,19],14:[2,19],22:[2,19]},{1:[2,20],12:[2,20],14:[2,20],22:[2,20]},{13:23,15:[1,5],16:[1,6],17:[1,7],18:[1,8],19:[1,9]},{13:24,15:[1,5],16:[1,6],17:[1,7],18:[1,8],19:[1,9],22:[1,25]},{15:[1,29],17:[1,30],18:[1,33],23:26,25:27,26:28,27:32,29:34,30:[1,35],31:[1,31],32:[1,36],33:[1,37]},{1:[2,4],7:22,8:12,9:13,10:14,11:15,12:[1,18],14:[1,19],20:16,21:17,22:[1,20]},{1:[2,6],12:[2,6],14:[2,6],22:[2,6]},{1:[2,11],12:[2,11],14:[2,11],22:[2,11]},{1:[2,13],12:[2,13],14:[2,13],22:[2,13]},{15:[1,29],17:[1,30],18:[1,33],23:38,25:27,26:28,27:32,29:34,30:[1,35],31:[1,31],32:[1,36],33:[1,37]},{24:[1,39]},{24:[2,23]},{24:[2,24],28:[1,40]},{24:[2,30]},{24:[2,31]},{24:[2,32]},{24:[2,25],28:[2,25]},{24:[2,27],28:[2,27]},{24:[2,28],28:[2,28]},{24:[2,29],28:[2,29]},{24:[2,33],28:[2,33]},{24:[2,34],28:[2,34]},{24:[1,41]},{1:[2,21],12:[2,21],14:[2,21],22:[2,21]},{18:[1,33],27:42,29:34,30:[1,35],32:[1,36],33:[1,37]},{1:[2,22],12:[2,22],14:[2,22],22:[2,22]},{24:[2,26],28:[2,26]}],defaultActions:{27:[2,23],29:[2,30],30:[2,31],31:[2,32]},parseError:function(e,t){if(!t.recoverable)throw new Error(e);this.trace(e)},parse:function(e){var t=this,n=[0],r=[null],a=[],i=this.table,c="",s=0,o=0,u=0,l=2,d=1,f=a.slice.call(arguments,1);this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var h=this.lexer.yylloc;a.push(h);var p=this.lexer.options&&this.lexer.options.ranges;function v(){var e;return"number"!==typeof(e=t.lexer.lex()||d)&&(e=t.symbols_[e]||e),e}"function"===typeof this.yy.parseError?this.parseError=this.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var b,j,m,g,O,y,x,k,S,w={};;){if(m=n[n.length-1],this.defaultActions[m]?g=this.defaultActions[m]:(null!==b&&"undefined"!=typeof b||(b=v()),g=i[m]&&i[m][b]),"undefined"===typeof g||!g.length||!g[0]){var C="";for(y in S=[],i[m])this.terminals_[y]&&y>l&&S.push("'"+this.terminals_[y]+"'");C=this.lexer.showPosition?"Parse error on line "+(s+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+S.join(", ")+", got '"+(this.terminals_[b]||b)+"'":"Parse error on line "+(s+1)+": Unexpected "+(b==d?"end of input":"'"+(this.terminals_[b]||b)+"'"),this.parseError(C,{text:this.lexer.match,token:this.terminals_[b]||b,line:this.lexer.yylineno,loc:h,expected:S})}if(g[0]instanceof Array&&g.length>1)throw new Error("Parse Error: multiple actions possible at state: "+m+", token: "+b);switch(g[0]){case 1:n.push(b),r.push(this.lexer.yytext),a.push(this.lexer.yylloc),n.push(g[1]),b=null,j?(b=j,j=null):(o=this.lexer.yyleng,c=this.lexer.yytext,s=this.lexer.yylineno,h=this.lexer.yylloc,u>0&&u--);break;case 2:if(x=this.productions_[g[1]][1],w.$=r[r.length-x],w._$={first_line:a[a.length-(x||1)].first_line,last_line:a[a.length-1].last_line,first_column:a[a.length-(x||1)].first_column,last_column:a[a.length-1].last_column},p&&(w._$.range=[a[a.length-(x||1)].range[0],a[a.length-1].range[1]]),"undefined"!==typeof(O=this.performAction.apply(w,[c,o,s,this.yy,g[1],r,a].concat(f))))return O;x&&(n=n.slice(0,-1*x*2),r=r.slice(0,-1*x),a=a.slice(0,-1*x)),n.push(this.productions_[g[1]][0]),r.push(w.$),a.push(w._$),k=i[n[n.length-2]][n[n.length-1]],n.push(k);break;case 3:return!0}}return!0}},t={initialize:function(){this._nodes=[],this._node={},this._stash=[]},set:function(e){for(var t in e)this._node[t]=e[t];return this._node},node:function(e){return arguments.length&&(this._node=e),this._node},push:function(){this._nodes.push(this._node),this._node={}},unshift:function(){this._nodes.unshift(this._node),this._node={}},yield:function(){var e=this._nodes;return this.initialize(),e}},n={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var a=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[a[0],a[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},test_match:function(e,t){var n,r,a;if(this.options.backtrack_lexer&&(a={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(a.yylloc.range=this.yylloc.range.slice(0))),(r=e[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],n=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var i in a)this[i]=a[i];return!1}return!1},next:function(){if(this.done)return this.EOF;var e,t,n,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var a=this._currentRules(),i=0;i<a.length;i++)if((n=this._input.match(this.rules[a[i]]))&&(!t||n[0].length>t[0].length)){if(t=n,r=i,this.options.backtrack_lexer){if(!1!==(e=this.test_match(n,a[i])))return e;if(this._backtrack){t=!1;continue}return!1}if(!this.options.flex)break}return t?!1!==(e=this.test_match(t,a[r]))&&e:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return e||this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return(e=this.conditionStack.length-1-Math.abs(e||0))>=0?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(e,t,n,r){switch(n){case 0:return 4;case 1:return 14;case 2:return 12;case 3:return 15;case 4:return 16;case 5:return 22;case 6:return 24;case 7:return 28;case 8:return 30;case 9:return 18;case 10:return t.yytext=t.yytext.substr(1,t.yyleng-2),32;case 11:return t.yytext=t.yytext.substr(1,t.yyleng-2),33;case 12:return 17;case 13:return 31}},rules:[/^(?:\$)/,/^(?:\.\.)/,/^(?:\.)/,/^(?:\*)/,/^(?:[a-zA-Z_]+[a-zA-Z0-9_]*)/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?:((-?(?:0|[1-9][0-9]*)))?\:((-?(?:0|[1-9][0-9]*)))?(\:((-?(?:0|[1-9][0-9]*)))?)?)/,/^(?:(-?(?:0|[1-9][0-9]*)))/,/^(?:"(?:\\["bfnrt/\\]|\\u[a-fA-F0-9]{4}|[^"\\])*")/,/^(?:'(?:\\['bfnrt/\\]|\\u[a-fA-F0-9]{4}|[^'\\])*')/,/^(?:\(.+?\)(?=\]))/,/^(?:\?\(.+?\)(?=\]))/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}};function r(){this.yy={}}return e.lexer=n,r.prototype=e,e.Parser=r,new r}();"undefined"!==typeof e&&"undefined"!==typeof n&&(n.parser=a,n.Parser=a.Parser,n.parse=function(){return a.parse.apply(a,arguments)},n.main=function(t){t[1]||(console.log("Usage: "+t[0]+" FILE"),r.exit(1));var a=e("fs").readFileSync(e("path").normalize(t[1]),"utf8");return n.parser.parse(a)},"undefined"!==typeof t&&e.main===t&&n.main(r.argv.slice(1)))}).call(this,e("_process"))},{_process:68,fs:12,path:67}],2:[function(e,t,n){t.exports={identifier:"[a-zA-Z_]+[a-zA-Z0-9_]*",integer:"-?(?:0|[1-9][0-9]*)",qq_string:'"(?:\\\\["bfnrt/\\\\]|\\\\u[a-fA-F0-9]{4}|[^"\\\\])*"',q_string:"'(?:\\\\['bfnrt/\\\\]|\\\\u[a-fA-F0-9]{4}|[^'\\\\])*'"}},{}],3:[function(e,t,n){var r=e("./dict"),a=e("fs"),i={lex:{macros:{esc:"\\\\",int:r.integer},rules:[["\\$","return 'DOLLAR'"],["\\.\\.","return 'DOT_DOT'"],["\\.","return 'DOT'"],["\\*","return 'STAR'"],[r.identifier,"return 'IDENTIFIER'"],["\\[","return '['"],["\\]","return ']'"],[",","return ','"],["({int})?\\:({int})?(\\:({int})?)?","return 'ARRAY_SLICE'"],["{int}","return 'INTEGER'"],[r.qq_string,"yytext = yytext.substr(1,yyleng-2); return 'QQ_STRING';"],[r.q_string,"yytext = yytext.substr(1,yyleng-2); return 'Q_STRING';"],["\\(.+?\\)(?=\\])","return 'SCRIPT_EXPRESSION'"],["\\?\\(.+?\\)(?=\\])","return 'FILTER_EXPRESSION'"]]},start:"JSON_PATH",bnf:{JSON_PATH:[["DOLLAR",'yy.ast.set({ expression: { type: "root", value: $1 } }); yy.ast.unshift(); return yy.ast.yield()'],["DOLLAR PATH_COMPONENTS",'yy.ast.set({ expression: { type: "root", value: $1 } }); yy.ast.unshift(); return yy.ast.yield()'],["LEADING_CHILD_MEMBER_EXPRESSION","yy.ast.unshift(); return yy.ast.yield()"],["LEADING_CHILD_MEMBER_EXPRESSION PATH_COMPONENTS",'yy.ast.set({ operation: "member", scope: "child", expression: { type: "identifier", value: $1 }}); yy.ast.unshift(); return yy.ast.yield()']],PATH_COMPONENTS:[["PATH_COMPONENT",""],["PATH_COMPONENTS PATH_COMPONENT",""]],PATH_COMPONENT:[["MEMBER_COMPONENT",'yy.ast.set({ operation: "member" }); yy.ast.push()'],["SUBSCRIPT_COMPONENT",'yy.ast.set({ operation: "subscript" }); yy.ast.push() ']],MEMBER_COMPONENT:[["CHILD_MEMBER_COMPONENT",'yy.ast.set({ scope: "child" })'],["DESCENDANT_MEMBER_COMPONENT",'yy.ast.set({ scope: "descendant" })']],CHILD_MEMBER_COMPONENT:[["DOT MEMBER_EXPRESSION",""]],LEADING_CHILD_MEMBER_EXPRESSION:[["MEMBER_EXPRESSION",'yy.ast.set({ scope: "child", operation: "member" })']],DESCENDANT_MEMBER_COMPONENT:[["DOT_DOT MEMBER_EXPRESSION",""]],MEMBER_EXPRESSION:[["STAR",'yy.ast.set({ expression: { type: "wildcard", value: $1 } })'],["IDENTIFIER",'yy.ast.set({ expression: { type: "identifier", value: $1 } })'],["SCRIPT_EXPRESSION",'yy.ast.set({ expression: { type: "script_expression", value: $1 } })'],["INTEGER",'yy.ast.set({ expression: { type: "numeric_literal", value: parseInt($1) } })'],["END",""]],SUBSCRIPT_COMPONENT:[["CHILD_SUBSCRIPT_COMPONENT",'yy.ast.set({ scope: "child" })'],["DESCENDANT_SUBSCRIPT_COMPONENT",'yy.ast.set({ scope: "descendant" })']],CHILD_SUBSCRIPT_COMPONENT:[["[ SUBSCRIPT ]",""]],DESCENDANT_SUBSCRIPT_COMPONENT:[["DOT_DOT [ SUBSCRIPT ]",""]],SUBSCRIPT:[["SUBSCRIPT_EXPRESSION",""],["SUBSCRIPT_EXPRESSION_LIST",'$1.length > 1? yy.ast.set({ expression: { type: "union", value: $1 } }) : $$ = $1']],SUBSCRIPT_EXPRESSION_LIST:[["SUBSCRIPT_EXPRESSION_LISTABLE","$$ = [$1]"],["SUBSCRIPT_EXPRESSION_LIST , SUBSCRIPT_EXPRESSION_LISTABLE","$$ = $1.concat($3)"]],SUBSCRIPT_EXPRESSION_LISTABLE:[["INTEGER",'$$ = { expression: { type: "numeric_literal", value: parseInt($1) } }; yy.ast.set($$)'],["STRING_LITERAL",'$$ = { expression: { type: "string_literal", value: $1 } }; yy.ast.set($$)'],["ARRAY_SLICE",'$$ = { expression: { type: "slice", value: $1 } }; yy.ast.set($$)']],SUBSCRIPT_EXPRESSION:[["STAR",'$$ = { expression: { type: "wildcard", value: $1 } }; yy.ast.set($$)'],["SCRIPT_EXPRESSION",'$$ = { expression: { type: "script_expression", value: $1 } }; yy.ast.set($$)'],["FILTER_EXPRESSION",'$$ = { expression: { type: "filter_expression", value: $1 } }; yy.ast.set($$)']],STRING_LITERAL:[["QQ_STRING","$$ = $1"],["Q_STRING","$$ = $1"]]}};a.readFileSync&&(i.moduleInclude=a.readFileSync(e.resolve("../include/module.js")),i.actionInclude=a.readFileSync(e.resolve("../include/action.js"))),t.exports=i},{"./dict":2,fs:12}],4:[function(e,t,n){var r=e("./aesprim"),a=e("./slice"),i=e("static-eval"),c=e("lodash/uniq"),s=function(){return this.initialize.apply(this,arguments)};function o(t,n,a){var i=e("./index"),c=p(r.parse(n).body[0].expression,{"@":t.value}),s=a.replace(/\{\{\s*value\s*\}\}/g,c),o=i.nodes(t.value,s);return o.forEach((function(e){e.path=t.path.concat(e.path.slice(1))})),o}function u(e){return Array.isArray(e)}function l(e){return e&&!(e instanceof Array)&&e instanceof Object}function d(e){return function(t,n,r,a){var i=t.value,c=t.path,s=[],o=function(t,i){u(t)?(t.forEach((function(e,t){s.length>=a||r(t,e,n)&&s.push({path:i.concat(t),value:e})})),t.forEach((function(t,n){s.length>=a||e&&o(t,i.concat(n))}))):l(t)&&(this.keys(t).forEach((function(e){s.length>=a||r(e,t[e],n)&&s.push({path:i.concat(e),value:t[e]})})),this.keys(t).forEach((function(n){s.length>=a||e&&o(t[n],i.concat(n))})))}.bind(this);return o(i,c),s}}function f(e){return function(t,n,r){return this.descend(n,t.expression.value,e,r)}}function h(e){return function(t,n,r){return this.traverse(n,t.expression.value,e,r)}}function p(){try{return i.apply(this,arguments)}catch(e){}}function v(e){return e=e.filter((function(e){return e})),c(e,(function(e){return e.path.map((function(e){return String(e).replace("-","--")})).join("-")}))}function b(e){var t=String(e);return t.match(/^-?[0-9]+$/)?parseInt(t):null}s.prototype.initialize=function(){this.traverse=d(!0),this.descend=d()},s.prototype.keys=Object.keys,s.prototype.resolve=function(e){var t=[e.operation,e.scope,e.expression.type].join("-"),n=this._fns[t];if(!n)throw new Error("couldn't resolve key: "+t);return n.bind(this)},s.prototype.register=function(e,t){if(!t instanceof Function)throw new Error("handler must be a function");this._fns[e]=t},s.prototype._fns={"member-child-identifier":function(e,t){var n=e.expression.value,r=t.value;if(r instanceof Object&&n in r)return[{value:r[n],path:t.path.concat(n)}]},"member-descendant-identifier":h((function(e,t,n){return e==n})),"subscript-child-numeric_literal":f((function(e,t,n){return e===n})),"member-child-numeric_literal":f((function(e,t,n){return String(e)===String(n)})),"subscript-descendant-numeric_literal":h((function(e,t,n){return e===n})),"member-child-wildcard":f((function(){return!0})),"member-descendant-wildcard":h((function(){return!0})),"subscript-descendant-wildcard":h((function(){return!0})),"subscript-child-wildcard":f((function(){return!0})),"subscript-child-slice":function(e,t){if(u(t.value)){var n=e.expression.value.split(":").map(b),r=t.value.map((function(e,n){return{value:e,path:t.path.concat(n)}}));return a.apply(null,[r].concat(n))}},"subscript-child-union":function(e,t){var n=[];return e.expression.value.forEach((function(e){var r={operation:"subscript",scope:"child",expression:e.expression},a=this.resolve(r)(r,t);a&&(n=n.concat(a))}),this),v(n)},"subscript-descendant-union":function(t,n,r){var a=e(".."),i=this,c=[];return a.nodes(n,"$..*").slice(1).forEach((function(e){c.length>=r||t.expression.value.forEach((function(t){var n={operation:"subscript",scope:"child",expression:t.expression},r=i.resolve(n)(n,e);c=c.concat(r)}))})),v(c)},"subscript-child-filter_expression":function(e,t,n){var a=e.expression.value.slice(2,-1),i=r.parse(a).body[0].expression,c=function(e,t){return p(i,{"@":t})};return this.descend(t,null,c,n)},"subscript-descendant-filter_expression":function(e,t,n){var a=e.expression.value.slice(2,-1),i=r.parse(a).body[0].expression,c=function(e,t){return p(i,{"@":t})};return this.traverse(t,null,c,n)},"subscript-child-script_expression":function(e,t){return o(t,e.expression.value.slice(1,-1),"$[{{value}}]")},"member-child-script_expression":function(e,t){return o(t,e.expression.value.slice(1,-1),"$.{{value}}")},"member-descendant-script_expression":function(e,t){return o(t,e.expression.value.slice(1,-1),"$..value")}},s.prototype._fns["subscript-child-string_literal"]=s.prototype._fns["member-child-identifier"],s.prototype._fns["member-descendant-numeric_literal"]=s.prototype._fns["subscript-descendant-string_literal"]=s.prototype._fns["member-descendant-identifier"],t.exports=s},{"..":"jsonpath","./aesprim":"./aesprim","./index":5,"./slice":7,"lodash/uniq":66,"static-eval":69}],5:[function(e,t,n){var r=e("assert"),a=e("./dict"),i=e("./parser"),c=e("./handlers"),s=function(){this.initialize.apply(this,arguments)};function o(e){return"[object String]"==Object.prototype.toString.call(e)}s.prototype.initialize=function(){this.parser=new i,this.handlers=new c},s.prototype.parse=function(e){return r.ok(o(e),"we need a path"),this.parser.parse(e)},s.prototype.parent=function(e,t){r.ok(e instanceof Object,"obj needs to be an object"),r.ok(t,"we need a path");var n=this.nodes(e,t)[0];return n.path.pop(),this.value(e,n.path)},s.prototype.apply=function(e,t,n){r.ok(e instanceof Object,"obj needs to be an object"),r.ok(t,"we need a path"),r.equal(typeof n,"function","fn needs to be function");var a=this.nodes(e,t).sort((function(e,t){return t.path.length-e.path.length}));return a.forEach((function(t){var r=t.path.pop(),a=this.value(e,this.stringify(t.path)),i=t.value=n.call(e,a[r]);a[r]=i}),this),a},s.prototype.value=function(e,t,n){if(r.ok(e instanceof Object,"obj needs to be an object"),r.ok(t,"we need a path"),arguments.length>=3){var a=this.nodes(e,t).shift();if(!a)return this._vivify(e,t,n);var i=a.path.slice(-1).shift();this.parent(e,this.stringify(a.path))[i]=n}return this.query(e,this.stringify(t),1).shift()},s.prototype._vivify=function(e,t,n){var a=this;return r.ok(e instanceof Object,"obj needs to be an object"),r.ok(t,"we need a path"),function t(n,r){var i=n.pop(),c=a.value(e,n);c||(t(n.concat(),"string"===typeof i?{}:[]),c=a.value(e,n)),c[i]=r}(this.parser.parse(t).map((function(e){return e.expression.value})),n),this.query(e,t)[0]},s.prototype.query=function(e,t,n){return r.ok(e instanceof Object,"obj needs to be an object"),r.ok(o(t),"we need a path"),this.nodes(e,t,n).map((function(e){return e.value}))},s.prototype.paths=function(e,t,n){return r.ok(e instanceof Object,"obj needs to be an object"),r.ok(t,"we need a path"),this.nodes(e,t,n).map((function(e){return e.path}))},s.prototype.nodes=function(e,t,n){if(r.ok(e instanceof Object,"obj needs to be an object"),r.ok(t,"we need a path"),0===n)return[];var a=this.parser.parse(t),i=this.handlers,c=[{path:["$"],value:e}],s=[];return a.length&&"root"==a[0].expression.type&&a.shift(),a.length?(a.forEach((function(e,t){if(!(s.length>=n)){var r=i.resolve(e),o=[];c.forEach((function(i){if(!(s.length>=n)){var c=r(e,i,n);t==a.length-1?s=s.concat(c||[]):o=o.concat(c||[])}})),c=o}})),n?s.slice(0,n):s):c},s.prototype.stringify=function(e){r.ok(e,"we need a path");var t="$",n={"descendant-member":"..{{value}}","child-member":".{{value}}","descendant-subscript":"..[{{value}}]","child-subscript":"[{{value}}]"};return(e=this._normalize(e)).forEach((function(e){if("root"!=e.expression.type){var r,a=[e.scope,e.operation].join("-"),i=n[a];if(r="string_literal"==e.expression.type?JSON.stringify(e.expression.value):e.expression.value,!i)throw new Error("couldn't find template "+a);t+=i.replace(/{{value}}/,r)}})),t},s.prototype._normalize=function(e){if(r.ok(e,"we need a path"),"string"==typeof e)return this.parser.parse(e);if(Array.isArray(e)&&"string"==typeof e[0]){var t=[{expression:{type:"root",value:"$"}}];return e.forEach((function(e,n){if("$"!=e||0!==n)if("string"==typeof e&&e.match("^"+a.identifier+"$"))t.push({operation:"member",scope:"child",expression:{value:e,type:"identifier"}});else{var r="number"==typeof e?"numeric_literal":"string_literal";t.push({operation:"subscript",scope:"child",expression:{value:e,type:r}})}})),t}if(Array.isArray(e)&&"object"==typeof e[0])return e;throw new Error("couldn't understand path "+e)},s.Handlers=c,s.Parser=i;var u=new s;u.JSONPath=s,t.exports=u},{"./dict":2,"./handlers":4,"./parser":6,assert:8}],6:[function(e,t,n){var r=e("./grammar"),a=e("../generated/parser"),i=function(){var e=new a.Parser,t=e.parseError;return e.yy.parseError=function(){e.yy.ast&&e.yy.ast.initialize(),t.apply(e,arguments)},e};i.grammar=r,t.exports=i},{"../generated/parser":1,"./grammar":3}],7:[function(e,t,n){function r(e){return String(e).match(/^[0-9]+$/)?parseInt(e):Number.isFinite(e)?parseInt(e,10):0}t.exports=function(e,t,n,a){if("string"==typeof t)throw new Error("start cannot be a string");if("string"==typeof n)throw new Error("end cannot be a string");if("string"==typeof a)throw new Error("step cannot be a string");var i=e.length;if(0===a)throw new Error("step cannot be zero");if(a=a?r(a):1,n=n<0?i+n:n,t=r(0===(t=t<0?i+t:t)?0:t||(a>0?0:i-1)),n=r(0===n?0:n||(a>0?i:-1)),t=a>0?Math.max(0,t):Math.min(i,t),n=a>0?Math.min(n,i):Math.max(-1,n),a>0&&n<=t)return[];if(a<0&&t<=n)return[];for(var c=[],s=t;s!=n&&!(a<0&&s<=n||a>0&&s>=n);s+=a)c.push(e[s]);return c}},{}],8:[function(e,t,n){var r=e("util/"),a=Array.prototype.slice,i=Object.prototype.hasOwnProperty,c=t.exports=d;function s(e,t){return r.isUndefined(t)?""+t:r.isNumber(t)&&!isFinite(t)||r.isFunction(t)||r.isRegExp(t)?t.toString():t}function o(e,t){return r.isString(e)?e.length<t?e:e.slice(0,t):e}function u(e){return o(JSON.stringify(e.actual,s),128)+" "+e.operator+" "+o(JSON.stringify(e.expected,s),128)}function l(e,t,n,r,a){throw new c.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:a})}function d(e,t){e||l(e,!0,t,"==",c.ok)}function f(e,t){if(e===t)return!0;if(r.isBuffer(e)&&r.isBuffer(t)){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return r.isDate(e)&&r.isDate(t)?e.getTime()===t.getTime():r.isRegExp(e)&&r.isRegExp(t)?e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase:r.isObject(e)||r.isObject(t)?p(e,t):e==t}function h(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function p(e,t){if(r.isNullOrUndefined(e)||r.isNullOrUndefined(t))return!1;if(e.prototype!==t.prototype)return!1;if(r.isPrimitive(e)||r.isPrimitive(t))return e===t;var n=h(e),i=h(t);if(n&&!i||!n&&i)return!1;if(n)return f(e=a.call(e),t=a.call(t));var c,s,o=j(e),u=j(t);if(o.length!=u.length)return!1;for(o.sort(),u.sort(),s=o.length-1;s>=0;s--)if(o[s]!=u[s])return!1;for(s=o.length-1;s>=0;s--)if(!f(e[c=o[s]],t[c]))return!1;return!0}function v(e,t){return!(!e||!t)&&("[object RegExp]"==Object.prototype.toString.call(t)?t.test(e):e instanceof t||!0===t.call({},e))}function b(e,t,n,a){var i;r.isString(n)&&(a=n,n=null);try{t()}catch(c){i=c}if(a=(n&&n.name?" ("+n.name+").":".")+(a?" "+a:"."),e&&!i&&l(i,n,"Missing expected exception"+a),!e&&v(i,n)&&l(i,n,"Got unwanted exception"+a),e&&i&&n&&!v(i,n)||!e&&i)throw i}c.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=u(this),this.generatedMessage=!0);var t=e.stackStartFunction||l;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var r=n.stack,a=t.name,i=r.indexOf("\n"+a);if(i>=0){var c=r.indexOf("\n",i+1);r=r.substring(c+1)}this.stack=r}}},r.inherits(c.AssertionError,Error),c.fail=l,c.ok=d,c.equal=function(e,t,n){e!=t&&l(e,t,n,"==",c.equal)},c.notEqual=function(e,t,n){e==t&&l(e,t,n,"!=",c.notEqual)},c.deepEqual=function(e,t,n){f(e,t)||l(e,t,n,"deepEqual",c.deepEqual)},c.notDeepEqual=function(e,t,n){f(e,t)&&l(e,t,n,"notDeepEqual",c.notDeepEqual)},c.strictEqual=function(e,t,n){e!==t&&l(e,t,n,"===",c.strictEqual)},c.notStrictEqual=function(e,t,n){e===t&&l(e,t,n,"!==",c.notStrictEqual)},c.throws=function(e,t,n){b.apply(this,[!0].concat(a.call(arguments)))},c.doesNotThrow=function(e,t){b.apply(this,[!1].concat(a.call(arguments)))},c.ifError=function(e){if(e)throw e};var j=Object.keys||function(e){var t=[];for(var n in e)i.call(e,n)&&t.push(n);return t}},{"util/":11}],9:[function(e,t,n){"function"===typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],10:[function(e,t,n){t.exports=function(e){return e&&"object"===typeof e&&"function"===typeof e.copy&&"function"===typeof e.fill&&"function"===typeof e.readUInt8}},{}],11:[function(e,n,r){(function(t,n){var a=/%[sdj%]/g;r.format=function(e){if(!x(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(s(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,i=r.length,c=String(e).replace(a,(function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return e}})),o=r[n];n<i;o=r[++n])g(o)||!C(o)?c+=" "+o:c+=" "+s(o);return c},r.deprecate=function(e,a){if(S(n.process))return function(){return r.deprecate(e,a).apply(this,arguments)};if(!0===t.noDeprecation)return e;var i=!1;function c(){if(!i){if(t.throwDeprecation)throw new Error(a);t.traceDeprecation?console.trace(a):console.error(a),i=!0}return e.apply(this,arguments)}return c};var i,c={};function s(e,t){var n={seen:[],stylize:u};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),m(t)?n.showHidden=t:t&&r._extend(n,t),S(n.showHidden)&&(n.showHidden=!1),S(n.depth)&&(n.depth=2),S(n.colors)&&(n.colors=!1),S(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=o),d(n,e,n.depth)}function o(e,t){var n=s.styles[t];return n?"\x1b["+s.colors[n][0]+"m"+e+"\x1b["+s.colors[n][1]+"m":e}function u(e,t){return e}function l(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}function d(e,t,n){if(e.customInspect&&t&&N(t.inspect)&&t.inspect!==r.inspect&&(!t.constructor||t.constructor.prototype!==t)){var a=t.inspect(n,e);return x(a)||(a=d(e,a,n)),a}var i=f(e,t);if(i)return i;var c=Object.keys(t),s=l(c);if(e.showHidden&&(c=Object.getOwnPropertyNames(t)),_(t)&&(c.indexOf("message")>=0||c.indexOf("description")>=0))return h(t);if(0===c.length){if(N(t)){var o=t.name?": "+t.name:"";return e.stylize("[Function"+o+"]","special")}if(w(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(E(t))return e.stylize(Date.prototype.toString.call(t),"date");if(_(t))return h(t)}var u,m="",g=!1,O=["{","}"];return j(t)&&(g=!0,O=["[","]"]),N(t)&&(m=" [Function"+(t.name?": "+t.name:"")+"]"),w(t)&&(m=" "+RegExp.prototype.toString.call(t)),E(t)&&(m=" "+Date.prototype.toUTCString.call(t)),_(t)&&(m=" "+h(t)),0!==c.length||g&&0!=t.length?n<0?w(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),u=g?p(e,t,n,s,c):c.map((function(r){return v(e,t,n,s,r,g)})),e.seen.pop(),b(u,m,O)):O[0]+m+O[1]}function f(e,t){if(S(t))return e.stylize("undefined","undefined");if(x(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return y(t)?e.stylize(""+t,"number"):m(t)?e.stylize(""+t,"boolean"):g(t)?e.stylize("null","null"):void 0}function h(e){return"["+Error.prototype.toString.call(e)+"]"}function p(e,t,n,r,a){for(var i=[],c=0,s=t.length;c<s;++c)M(t,String(c))?i.push(v(e,t,n,r,String(c),!0)):i.push("");return a.forEach((function(a){a.match(/^\d+$/)||i.push(v(e,t,n,r,a,!0))})),i}function v(e,t,n,r,a,i){var c,s,o;if((o=Object.getOwnPropertyDescriptor(t,a)||{value:t[a]}).get?s=o.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):o.set&&(s=e.stylize("[Setter]","special")),M(r,a)||(c="["+a+"]"),s||(e.seen.indexOf(o.value)<0?(s=g(n)?d(e,o.value,null):d(e,o.value,n-1)).indexOf("\n")>-1&&(s=i?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),S(c)){if(i&&a.match(/^\d+$/))return s;(c=JSON.stringify(""+a)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(c=c.substr(1,c.length-2),c=e.stylize(c,"name")):(c=c.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),c=e.stylize(c,"string"))}return c+": "+s}function b(e,t,n){return e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function j(e){return Array.isArray(e)}function m(e){return"boolean"===typeof e}function g(e){return null===e}function O(e){return null==e}function y(e){return"number"===typeof e}function x(e){return"string"===typeof e}function k(e){return"symbol"===typeof e}function S(e){return void 0===e}function w(e){return C(e)&&"[object RegExp]"===R(e)}function C(e){return"object"===typeof e&&null!==e}function E(e){return C(e)&&"[object Date]"===R(e)}function _(e){return C(e)&&("[object Error]"===R(e)||e instanceof Error)}function N(e){return"function"===typeof e}function I(e){return null===e||"boolean"===typeof e||"number"===typeof e||"string"===typeof e||"symbol"===typeof e||"undefined"===typeof e}function R(e){return Object.prototype.toString.call(e)}function T(e){return e<10?"0"+e.toString(10):e.toString(10)}r.debuglog=function(e){if(S(i)&&(i=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!c[e])if(new RegExp("\\b"+e+"\\b","i").test(i)){var n=t.pid;c[e]=function(){var t=r.format.apply(r,arguments);console.error("%s %d: %s",e,n,t)}}else c[e]=function(){};return c[e]},r.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},r.isArray=j,r.isBoolean=m,r.isNull=g,r.isNullOrUndefined=O,r.isNumber=y,r.isString=x,r.isSymbol=k,r.isUndefined=S,r.isRegExp=w,r.isObject=C,r.isDate=E,r.isError=_,r.isFunction=N,r.isPrimitive=I,r.isBuffer=e("./support/isBuffer");var A=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function P(){var e=new Date,t=[T(e.getHours()),T(e.getMinutes()),T(e.getSeconds())].join(":");return[e.getDate(),A[e.getMonth()],t].join(" ")}function M(e,t){return Object.prototype.hasOwnProperty.call(e,t)}r.log=function(){console.log("%s - %s",P(),r.format.apply(r,arguments))},r.inherits=e("inherits"),r._extend=function(e,t){if(!t||!C(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(this,e("_process"),"undefined"!==typeof t?t:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./support/isBuffer":10,_process:68,inherits:9}],12:[function(e,t,n){},{}],13:[function(e,t,n){var r=e("./_hashClear"),a=e("./_hashDelete"),i=e("./_hashGet"),c=e("./_hashHas"),s=e("./_hashSet");function o(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}o.prototype.clear=r,o.prototype.delete=a,o.prototype.get=i,o.prototype.has=c,o.prototype.set=s,t.exports=o},{"./_hashClear":37,"./_hashDelete":38,"./_hashGet":39,"./_hashHas":40,"./_hashSet":41}],14:[function(e,t,n){var r=e("./_listCacheClear"),a=e("./_listCacheDelete"),i=e("./_listCacheGet"),c=e("./_listCacheHas"),s=e("./_listCacheSet");function o(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}o.prototype.clear=r,o.prototype.delete=a,o.prototype.get=i,o.prototype.has=c,o.prototype.set=s,t.exports=o},{"./_listCacheClear":44,"./_listCacheDelete":45,"./_listCacheGet":46,"./_listCacheHas":47,"./_listCacheSet":48}],15:[function(e,t,n){var r=e("./_getNative")(e("./_root"),"Map");t.exports=r},{"./_getNative":34,"./_root":56}],16:[function(e,t,n){var r=e("./_mapCacheClear"),a=e("./_mapCacheDelete"),i=e("./_mapCacheGet"),c=e("./_mapCacheHas"),s=e("./_mapCacheSet");function o(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}o.prototype.clear=r,o.prototype.delete=a,o.prototype.get=i,o.prototype.has=c,o.prototype.set=s,t.exports=o},{"./_mapCacheClear":49,"./_mapCacheDelete":50,"./_mapCacheGet":51,"./_mapCacheHas":52,"./_mapCacheSet":53}],17:[function(e,t,n){var r=e("./_getNative")(e("./_root"),"Set");t.exports=r},{"./_getNative":34,"./_root":56}],18:[function(e,t,n){var r=e("./_MapCache"),a=e("./_setCacheAdd"),i=e("./_setCacheHas");function c(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}c.prototype.add=c.prototype.push=a,c.prototype.has=i,t.exports=c},{"./_MapCache":16,"./_setCacheAdd":57,"./_setCacheHas":58}],19:[function(e,t,n){var r=e("./_root").Symbol;t.exports=r},{"./_root":56}],20:[function(e,t,n){var r=e("./_baseIndexOf");function a(e,t){return!(null==e||!e.length)&&r(e,t,0)>-1}t.exports=a},{"./_baseIndexOf":25}],21:[function(e,t,n){function r(e,t,n){for(var r=-1,a=null==e?0:e.length;++r<a;)if(n(t,e[r]))return!0;return!1}t.exports=r},{}],22:[function(e,t,n){var r=e("./eq");function a(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}t.exports=a},{"./eq":62}],23:[function(e,t,n){function r(e,t,n,r){for(var a=e.length,i=n+(r?1:-1);r?i--:++i<a;)if(t(e[i],i,e))return i;return-1}t.exports=r},{}],24:[function(e,t,n){var r=e("./_Symbol"),a=e("./_getRawTag"),i=e("./_objectToString"),c="[object Null]",s="[object Undefined]",o=r?r.toStringTag:void 0;function u(e){return null==e?void 0===e?s:c:o&&o in Object(e)?a(e):i(e)}t.exports=u},{"./_Symbol":19,"./_getRawTag":35,"./_objectToString":55}],25:[function(e,t,n){var r=e("./_baseFindIndex"),a=e("./_baseIsNaN"),i=e("./_strictIndexOf");function c(e,t,n){return t===t?i(e,t,n):r(e,a,n)}t.exports=c},{"./_baseFindIndex":23,"./_baseIsNaN":26,"./_strictIndexOf":60}],26:[function(e,t,n){function r(e){return e!==e}t.exports=r},{}],27:[function(e,t,n){var r=e("./isFunction"),a=e("./_isMasked"),i=e("./isObject"),c=e("./_toSource"),s=/[\\^$.*+?()[\]{}|]/g,o=/^\[object .+?Constructor\]$/,u=Function.prototype,l=Object.prototype,d=u.toString,f=l.hasOwnProperty,h=RegExp("^"+d.call(f).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function p(e){return!(!i(e)||a(e))&&(r(e)?h:o).test(c(e))}t.exports=p},{"./_isMasked":43,"./_toSource":61,"./isFunction":63,"./isObject":64}],28:[function(e,t,n){var r=e("./_SetCache"),a=e("./_arrayIncludes"),i=e("./_arrayIncludesWith"),c=e("./_cacheHas"),s=e("./_createSet"),o=e("./_setToArray"),u=200;function l(e,t,n){var l=-1,d=a,f=e.length,h=!0,p=[],v=p;if(n)h=!1,d=i;else if(f>=u){var b=t?null:s(e);if(b)return o(b);h=!1,d=c,v=new r}else v=t?[]:p;e:for(;++l<f;){var j=e[l],m=t?t(j):j;if(j=n||0!==j?j:0,h&&m===m){for(var g=v.length;g--;)if(v[g]===m)continue e;t&&v.push(m),p.push(j)}else d(v,m,n)||(v!==p&&v.push(m),p.push(j))}return p}t.exports=l},{"./_SetCache":18,"./_arrayIncludes":20,"./_arrayIncludesWith":21,"./_cacheHas":29,"./_createSet":31,"./_setToArray":59}],29:[function(e,t,n){function r(e,t){return e.has(t)}t.exports=r},{}],30:[function(e,t,n){var r=e("./_root")["__core-js_shared__"];t.exports=r},{"./_root":56}],31:[function(e,t,n){var r=e("./_Set"),a=e("./noop"),i=e("./_setToArray"),c=1/0,s=r&&1/i(new r([,-0]))[1]==c?function(e){return new r(e)}:a;t.exports=s},{"./_Set":17,"./_setToArray":59,"./noop":65}],32:[function(e,n,r){(function(e){var t="object"==typeof e&&e&&e.Object===Object&&e;n.exports=t}).call(this,"undefined"!==typeof t?t:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],33:[function(e,t,n){var r=e("./_isKeyable");function a(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}t.exports=a},{"./_isKeyable":42}],34:[function(e,t,n){var r=e("./_baseIsNative"),a=e("./_getValue");function i(e,t){var n=a(e,t);return r(n)?n:void 0}t.exports=i},{"./_baseIsNative":27,"./_getValue":36}],35:[function(e,t,n){var r=e("./_Symbol"),a=Object.prototype,i=a.hasOwnProperty,c=a.toString,s=r?r.toStringTag:void 0;function o(e){var t=i.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(o){}var a=c.call(e);return r&&(t?e[s]=n:delete e[s]),a}t.exports=o},{"./_Symbol":19}],36:[function(e,t,n){function r(e,t){return null==e?void 0:e[t]}t.exports=r},{}],37:[function(e,t,n){var r=e("./_nativeCreate");function a(){this.__data__=r?r(null):{},this.size=0}t.exports=a},{"./_nativeCreate":54}],38:[function(e,t,n){function r(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}t.exports=r},{}],39:[function(e,t,n){var r=e("./_nativeCreate"),a="__lodash_hash_undefined__",i=Object.prototype.hasOwnProperty;function c(e){var t=this.__data__;if(r){var n=t[e];return n===a?void 0:n}return i.call(t,e)?t[e]:void 0}t.exports=c},{"./_nativeCreate":54}],40:[function(e,t,n){var r=e("./_nativeCreate"),a=Object.prototype.hasOwnProperty;function i(e){var t=this.__data__;return r?void 0!==t[e]:a.call(t,e)}t.exports=i},{"./_nativeCreate":54}],41:[function(e,t,n){var r=e("./_nativeCreate"),a="__lodash_hash_undefined__";function i(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?a:t,this}t.exports=i},{"./_nativeCreate":54}],42:[function(e,t,n){function r(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}t.exports=r},{}],43:[function(e,t,n){var r=e("./_coreJsData"),a=function(){var e=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function i(e){return!!a&&a in e}t.exports=i},{"./_coreJsData":30}],44:[function(e,t,n){function r(){this.__data__=[],this.size=0}t.exports=r},{}],45:[function(e,t,n){var r=e("./_assocIndexOf"),a=Array.prototype.splice;function i(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():a.call(t,n,1),--this.size,!0)}t.exports=i},{"./_assocIndexOf":22}],46:[function(e,t,n){var r=e("./_assocIndexOf");function a(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}t.exports=a},{"./_assocIndexOf":22}],47:[function(e,t,n){var r=e("./_assocIndexOf");function a(e){return r(this.__data__,e)>-1}t.exports=a},{"./_assocIndexOf":22}],48:[function(e,t,n){var r=e("./_assocIndexOf");function a(e,t){var n=this.__data__,a=r(n,e);return a<0?(++this.size,n.push([e,t])):n[a][1]=t,this}t.exports=a},{"./_assocIndexOf":22}],49:[function(e,t,n){var r=e("./_Hash"),a=e("./_ListCache"),i=e("./_Map");function c(){this.size=0,this.__data__={hash:new r,map:new(i||a),string:new r}}t.exports=c},{"./_Hash":13,"./_ListCache":14,"./_Map":15}],50:[function(e,t,n){var r=e("./_getMapData");function a(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}t.exports=a},{"./_getMapData":33}],51:[function(e,t,n){var r=e("./_getMapData");function a(e){return r(this,e).get(e)}t.exports=a},{"./_getMapData":33}],52:[function(e,t,n){var r=e("./_getMapData");function a(e){return r(this,e).has(e)}t.exports=a},{"./_getMapData":33}],53:[function(e,t,n){var r=e("./_getMapData");function a(e,t){var n=r(this,e),a=n.size;return n.set(e,t),this.size+=n.size==a?0:1,this}t.exports=a},{"./_getMapData":33}],54:[function(e,t,n){var r=e("./_getNative")(Object,"create");t.exports=r},{"./_getNative":34}],55:[function(e,t,n){var r=Object.prototype.toString;function a(e){return r.call(e)}t.exports=a},{}],56:[function(e,t,n){var r=e("./_freeGlobal"),a="object"==typeof self&&self&&self.Object===Object&&self,i=r||a||Function("return this")();t.exports=i},{"./_freeGlobal":32}],57:[function(e,t,n){var r="__lodash_hash_undefined__";function a(e){return this.__data__.set(e,r),this}t.exports=a},{}],58:[function(e,t,n){function r(e){return this.__data__.has(e)}t.exports=r},{}],59:[function(e,t,n){function r(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}t.exports=r},{}],60:[function(e,t,n){function r(e,t,n){for(var r=n-1,a=e.length;++r<a;)if(e[r]===t)return r;return-1}t.exports=r},{}],61:[function(e,t,n){var r=Function.prototype.toString;function a(e){if(null!=e){try{return r.call(e)}catch(t){}try{return e+""}catch(t){}}return""}t.exports=a},{}],62:[function(e,t,n){function r(e,t){return e===t||e!==e&&t!==t}t.exports=r},{}],63:[function(e,t,n){var r=e("./_baseGetTag"),a=e("./isObject"),i="[object AsyncFunction]",c="[object Function]",s="[object GeneratorFunction]",o="[object Proxy]";function u(e){if(!a(e))return!1;var t=r(e);return t==c||t==s||t==i||t==o}t.exports=u},{"./_baseGetTag":24,"./isObject":64}],64:[function(e,t,n){function r(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}t.exports=r},{}],65:[function(e,t,n){function r(){}t.exports=r},{}],66:[function(e,t,n){var r=e("./_baseUniq");function a(e){return e&&e.length?r(e):[]}t.exports=a},{"./_baseUniq":28}],67:[function(e,t,n){(function(e){function t(e,t){for(var n=0,r=e.length-1;r>=0;r--){var a=e[r];"."===a?e.splice(r,1):".."===a?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e){"string"!==typeof e&&(e+="");var t,n=0,r=-1,a=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!a){n=t+1;break}}else-1===r&&(a=!1,r=t+1);return-1===r?"":e.slice(n,r)}function a(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}n.resolve=function(){for(var n="",r=!1,i=arguments.length-1;i>=-1&&!r;i--){var c=i>=0?arguments[i]:e.cwd();if("string"!==typeof c)throw new TypeError("Arguments to path.resolve must be strings");c&&(n=c+"/"+n,r="/"===c.charAt(0))}return(r?"/":"")+(n=t(a(n.split("/"),(function(e){return!!e})),!r).join("/"))||"."},n.normalize=function(e){var r=n.isAbsolute(e),c="/"===i(e,-1);return(e=t(a(e.split("/"),(function(e){return!!e})),!r).join("/"))||r||(e="."),e&&c&&(e+="/"),(r?"/":"")+e},n.isAbsolute=function(e){return"/"===e.charAt(0)},n.join=function(){var e=Array.prototype.slice.call(arguments,0);return n.normalize(a(e,(function(e,t){if("string"!==typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},n.relative=function(e,t){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=n.resolve(e).substr(1),t=n.resolve(t).substr(1);for(var a=r(e.split("/")),i=r(t.split("/")),c=Math.min(a.length,i.length),s=c,o=0;o<c;o++)if(a[o]!==i[o]){s=o;break}var u=[];for(o=s;o<a.length;o++)u.push("..");return(u=u.concat(i.slice(s))).join("/")},n.sep="/",n.delimiter=":",n.dirname=function(e){if("string"!==typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,r=-1,a=!0,i=e.length-1;i>=1;--i)if(47===(t=e.charCodeAt(i))){if(!a){r=i;break}}else a=!1;return-1===r?n?"/":".":n&&1===r?"/":e.slice(0,r)},n.basename=function(e,t){var n=r(e);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},n.extname=function(e){"string"!==typeof e&&(e+="");for(var t=-1,n=0,r=-1,a=!0,i=0,c=e.length-1;c>=0;--c){var s=e.charCodeAt(c);if(47!==s)-1===r&&(a=!1,r=c+1),46===s?-1===t?t=c:1!==i&&(i=1):-1!==t&&(i=-1);else if(!a){n=c+1;break}}return-1===t||-1===r||0===i||1===i&&t===r-1&&t===n+1?"":e.slice(t,r)};var i="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,e("_process"))},{_process:68}],68:[function(e,t,n){var r,a,i=t.exports={};function c(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function o(e){if(r===setTimeout)return setTimeout(e,0);if((r===c||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}function u(e){if(a===clearTimeout)return clearTimeout(e);if((a===s||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(e);try{return a(e)}catch(t){try{return a.call(null,e)}catch(t){return a.call(this,e)}}}!function(){try{r="function"===typeof setTimeout?setTimeout:c}catch(e){r=c}try{a="function"===typeof clearTimeout?clearTimeout:s}catch(e){a=s}}();var l,d=[],f=!1,h=-1;function p(){f&&l&&(f=!1,l.length?d=l.concat(d):h=-1,d.length&&v())}function v(){if(!f){var e=o(p);f=!0;for(var t=d.length;t;){for(l=d,d=[];++h<t;)l&&l[h].run();h=-1,t=d.length}l=null,f=!1,u(e)}}function b(e,t){this.fun=e,this.array=t}function j(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];d.push(new b(e,t)),1!==d.length||f||o(v)},b.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=j,i.addListener=j,i.once=j,i.off=j,i.removeListener=j,i.removeAllListeners=j,i.emit=j,i.prependListener=j,i.prependOnceListener=j,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],69:[function(e,t,n){var r=e("escodegen").generate;t.exports=function(e,t){t||(t={});var n={},a=function e(a,i){if("Literal"===a.type)return a.value;if("UnaryExpression"===a.type){var c=e(a.argument);return"+"===a.operator?+c:"-"===a.operator?-c:"~"===a.operator?~c:"!"===a.operator?!c:n}if("ArrayExpression"===a.type){for(var s=[],o=0,u=a.elements.length;o<u;o++){if((j=e(a.elements[o]))===n)return n;s.push(j)}return s}if("ObjectExpression"===a.type){var l={};for(o=0;o<a.properties.length;o++){var d=null===(m=a.properties[o]).value?m.value:e(m.value);if(d===n)return n;l[m.key.value||m.key.name]=d}return l}if("BinaryExpression"===a.type||"LogicalExpression"===a.type){if((u=e(a.left))===n)return n;var f=e(a.right);if(f===n)return n;var h=a.operator;return"=="===h?u==f:"==="===h?u===f:"!="===h?u!=f:"!=="===h?u!==f:"+"===h?u+f:"-"===h?u-f:"*"===h?u*f:"/"===h?u/f:"%"===h?u%f:"<"===h?u<f:"<="===h?u<=f:">"===h?u>f:">="===h?u>=f:"|"===h?u|f:"&"===h?u&f:"^"===h?u^f:"&&"===h?u&&f:"||"===h?u||f:n}if("Identifier"===a.type)return{}.hasOwnProperty.call(t,a.name)?t[a.name]:n;if("ThisExpression"===a.type)return{}.hasOwnProperty.call(t,"this")?t.this:n;if("CallExpression"===a.type){var p=e(a.callee);if(p===n)return n;if("function"!==typeof p)return n;var v=a.callee.object?e(a.callee.object):n;v===n&&(v=null);var b=[];for(o=0,u=a.arguments.length;o<u;o++){var j;if((j=e(a.arguments[o]))===n)return n;b.push(j)}return p.apply(v,b)}var m;if("MemberExpression"===a.type)return(l=e(a.object))===n||"function"==typeof l?n:"Identifier"===a.property.type?l[a.property.name]:(m=e(a.property))===n?n:l[m];if("ConditionalExpression"===a.type)return(c=e(a.test))===n?n:e(c?a.consequent:a.alternate);if("ExpressionStatement"===a.type)return(c=e(a.expression))===n?n:c;if("ReturnStatement"===a.type)return e(a.argument);if("FunctionExpression"===a.type){var g=a.body.body,O={};for(Object.keys(t).forEach((function(e){O[e]=t[e]})),o=0;o<a.params.length;o++){var y=a.params[o];if("Identifier"!=y.type)return n;t[y.name]=null}for(var o in g)if(e(g[o])===n)return n;t=O;var x=Object.keys(t),k=x.map((function(e){return t[e]}));return Function(x.join(", "),"return "+r(a)).apply(null,k)}if("TemplateLiteral"===a.type){var S="";for(o=0;o<a.expressions.length;o++)S+=e(a.quasis[o]),S+=e(a.expressions[o]);return S+=e(a.quasis[o])}if("TaggedTemplateExpression"===a.type){var w=e(a.tag),C=a.quasi,E=C.quasis.map(e),_=C.expressions.map(e);return w.apply(null,[E].concat(_))}return"TemplateElement"===a.type?a.value.cooked:n}(e);return a===n?void 0:a}},{escodegen:12}],jsonpath:[function(e,t,n){t.exports=e("./lib/index")},{"./lib/index":5}]},{},["jsonpath"])("jsonpath")}()}).call(this,n(42))},181:function(e,t,n){"use strict";var r=n(626),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useZones=t.useRoonId=void 0;var i=a(n(31)),c=a(n(2)),s=a(n(630)),o=n(735),u=n(736);function l(){return(0,i.default)("local",["roon","roonId"],"Anonymous")}t.useRoonId=l,t.default=function(e){var t=c.default.useState(),n=r(t,2),a=n[0],i=n[1],d=l(),f=r(d,1)[0];return c.default.useMemo((function(){var t=new s.default({extension_id:"org.pico.elephant",display_name:"Elephant Roon Connection from ".concat(f),display_version:"1.0.0",publisher:"Joshua Pollak",email:"abottomlesspit@gmail.com",website:"https://github.com/pyrogenic/elephant",log_level:"none",core_paired:function(e){console.log({core_paired:e}),i(e)},core_unpaired:function(e){console.log({core_unpaired:e}),i((function(t){return t===e?void 0:t}))}});return t.init_services({required_services:[o,u]}),t.ws_connect(e),console.log(t),t}),[e,f]),a},t.useZones=function(e){var t=c.default.useState(),n=r(t,2),a=n[0],i=n[1];return c.default.useEffect((function(){var t;return null===(t=null===e||void 0===e?void 0:e.services.RoonApiTransport)||void 0===t?void 0:t.get_zones((function(e,t){return i(e?[]:t.zones)}))}),[null===e||void 0===e?void 0:e.services.RoonApiTransport]),a}},197:function(e,t,n){"use strict";t.__esModule=!0,t.ensureArray=void 0,t.ensureArray=function(e,t){var n=e[t];return void 0!==n?n:e[t]=new Array}},214:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return p}));var r=n(7),a=n(31),i=n(306),c=n.n(i),s=n(5),o=n(51),u=n(2),l=n.n(u),d=n(20),f=n(36),h=n(1);c.a.use(n(611));function p(t){var n=t.generator,i=l.a.useRef(null),u=l.a.useRef(),p=l.a.useRef(100),v=l.a.useRef(),b=l.a.useRef(),j=l.a.useRef(),m=l.a.useState(!0),g=Object(r.a)(m,2),O=g[0],y=g[1],x=l.a.useCallback((function(e){var t,n,r;(console.log("refresh"),null===(t=b.current)||void 0===t||t.stop(),(O||e)&&j.current)?(b.current=null===(n=v.current)||void 0===n?void 0:n.layout(j.current),null===(r=b.current)||void 0===r||r.start()):b.current=void 0}),[b,v,j,O]),k=l.a.useCallback((function(e,t,n){if(t&&n&&t===v.current){var r,a,i=n.next(!1),c=i.done,s=i.value;if(s&&(!("edges"in s)||(null===s||void 0===s||null===(r=s.edges)||void 0===r?void 0:r.length)||(null===s||void 0===s||null===(a=s.nodes)||void 0===a?void 0:a.length))){var o,u,l;if(null===(o=b.current)||void 0===o||o.stop(),t.add(s),O&&j.current)b.current=null===(u=v.current)||void 0===u?void 0:u.layout(j.current),null===(l=b.current)||void 0===l||l.start();else b.current=void 0;console.log("".concat(e," add data: nodes: ").concat(t.nodes().length," edges: ").concat(t.edges().length)),p.current=100}c?console.log("Generator done: nodes: ".concat(t.nodes().length," edges: ").concat(t.edges().length)):(p.current<5e3&&(p.current*=1.5),console.log("".concat(e," waiting ").concat(p.current,"\u2026")),setTimeout(k,p.current,e,t,n))}else n&&(console.log("Exiting generator: cy: ".concat(!!t," / ").concat(t===v.current?"current":"not current"," g: ").concat(!!n," ")),n.next(!0))}),[O]),S=l.a.useState([{selector:"node",style:{width:300,height:30,shape:"round-rectangle","text-valign":"center","background-color":"#eee",label:"data(label)"}},{selector:"node[category = 'artist']",style:{"background-color":"#efe"}},{selector:"node[category = 'album']",style:{width:300,height:300,shape:"ellipse"}},{selector:"edge",style:{width:1,"line-color":"#ccc","target-arrow-color":"#ccc","target-arrow-shape":"triangle","curve-style":"bezier","source-label":"data(label)"}},{selector:'edge[category = "musician"]',style:{width:3,color:"red"}}]),w=Object(r.a)(S,2),C=w[0],E=(w[1],l.a.useMemo((function(){var t=c()({container:void 0,elements:[],layout:{name:"grid",rows:20,cols:20}});return v.current=t,console.log("created cy, generator: ".concat(!!n)),n&&e(k,0,t,n()),t}),[n,k])),_=l.a.useMemo((function(){return Object(s.B)(new Set)}),[]),N=l.a.useMemo((function(){return Object(s.B)(new Map)}),[]);l.a.useLayoutEffect((function(){return i.current&&!u.current&&(console.log("Mounted cy."),E.mount(i.current),u.current=!0,E.on("dragfree",(function(){return x()})),E.on("add",Object(s.k)((function(e){_.add(e.target.data().category)})))),function(){console.log("Unmounted cy."),u.current=!1,v.current=void 0,E.unmount()}}),[E,x,_]),l.a.useEffect((function(){E.style(C)}),[E,C]);var I=Object(a.default)("session",["graph","fit"],!1),R=Object(r.a)(I,2),T=R[0],A=R[1],P=Object(a.default)("session",["graph","animate"],!0),M=Object(r.a)(P,2),L=M[0],F=M[1],D=Object(a.default)("session",["graph","randomize"],!1),B=Object(r.a)(D,2),G=B[0],U=B[1],z=Object(a.default)("session",["graph","spaceForLabels"],!1),$=Object(r.a)(z,2),V=$[0],H=$[1];l.a.useEffect((function(){var e={name:"cose",animate:L,fit:T,randomize:G,avoidOverlap:!0,nodeOverlap:20,nodeDimensionsIncludeLabels:V,idealEdgeLength:function(e){return"musician"===e.category?200:400},minTemp:.01,nodeRepulsion:function(e){e.category;return 100}};console.log("Options: ".concat(JSON.stringify(e))),console.log("Graph Size: nodes: ".concat(E.nodes().length," edges: ").concat(E.edges().length)),j.current=e}),[L,E,T,G,V,x]),l.a.useEffect(x,[E,x,j]);var q=l.a.useState((function(){return JSON.stringify(C,null,2)})),K=Object(r.a)(q,2),W=K[0];K[1],l.a.useMemo((function(){try{return JSON.parse(W)}catch(e){return}}),[W]);return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(f.a,{label:"Fit",value:T,setValue:A}),Object(h.jsx)(f.a,{label:"Animate",value:L,setValue:F}),Object(h.jsx)(f.a,{label:"Randomize",value:G,setValue:U}),Object(h.jsx)(f.a,{label:"Label Space",value:V,setValue:H}),Object(h.jsx)(f.a,{label:"Run",value:O,setValue:y}),Object(h.jsx)(d.a,{onClick:x.bind(null,!0),children:"Layout"}),Object(h.jsx)(d.a,{onClick:function(){return E.fit()},children:"Fit"}),Object(h.jsx)(o.a,{render:function(){return Object(h.jsx)(h.Fragment,{children:Array.from(_).sort().map((function(e){return Object(h.jsx)(f.a,{label:e,value:!N.has(e),setValue:Object(s.k)((function(t){if(t){var n=N.get(e);N.delete(e),n&&E.add(n.not(E.elements()))}else{var r=E.remove("[category = '".concat(e,"']"));N.set(e,r)}}))},e)}))})}}),Object(h.jsx)("div",{ref:i,style:{height:"80rem",marginLeft:"4rem",marginRight:"4rem",background:"#fefefe"},children:"Graph goes here."})]})}}).call(this,n(166).setImmediate)},22:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return Q})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return d})),n.d(t,"e",(function(){return i})),n.d(t,"f",(function(){return c}));var r,a,i,c,s,o,u,l,d,f,h,p,v,b,j,m,g=n(6),O=n.n(g),y=n(48),x=n(26),k=n(4),S=n(7),w=n(13),C=n(41),E=n(106),_=n(63),N=n(70),I=n(184),R=n(242),T=n.n(R),A=n(417),P=n.n(A),M=n(418),L=n(419),F=n.n(L);!function(e){e.NEEDS_VOTE="Needs Vote",e.NEEDS_MINOR_CHANGE="Needs Minor Changes",e.CORRECT="Correct"}(r||(r={})),function(e){e.ACCEPTED="Accepted"}(a||(a={})),function(e){e.MINT="Mint (M)",e.NEAR_MINT="Near Mint (NM or M-)",e.VERY_GOOD_PLUS="Very Good Plus (VG+)",e.VERY_GOOD="Very Good (VG)",e.GOOD_PLUS="Good Plus (G+)",e.GOOD="Good (G)",e.FAIR="Fair (F)",e.POOR="Poor (P)"}(i||(i={})),function(e){e.MINT="Mint (M)",e.NEAR_MINT="Near Mint (NM or M-)",e.VERY_GOOD_PLUS="Very Good Plus (VG+)",e.VERY_GOOD="Very Good (VG)",e.GOOD_PLUS="Good Plus (G+)",e.GOOD="Good (G)",e.FAIR="Fair (F)",e.POOR="Poor (P)",e.GENERIC="Generic",e.NOT_GRADED="Not Graded",e.NO_COVER="No Cover"}(c||(c={})),function(e){e.USD="USD",e.GBP="GBP",e.EUR="EUR",e.CAD="CAD",e.AUD="AUD",e.JPY="JPY",e.CHF="CHF",e.MXN="MXN",e.BRL="BRL",e.NZD="NZD",e.SEK="SEK",e.ZAR="ZAR"}(s||(s={})),function(e){e[e.ALL=0]="ALL",e[e.UNCATEGORIZED=1]="UNCATEGORIZED"}(o||(o={})),function(e){e.ALL="All",e.DELETED="Deleted",e.DRAFT="Draft",e.EXPIRED="Expired",e.FOR_SALE="For Sale",e.SOLD="Sold",e.SUSPENDED="Suspended",e.VIOLATION="Violation"}(u||(u={})),function(e){e.LISTED="listed",e.PRICE="price",e.ITEM="item",e.ARTIST="artist",e.LABEL="label",e.CATNO="catno",e.AUDIO="audio",e.STATUS="status",e.LOCATION="location"}(l||(l={})),function(e){e.FOR_SALE="For Sale",e.DRAFT="Draft"}(d||(d={})),function(e){e.NEW_ORDER="New Order",e.BUYER_CONTACTER="Buyer Contacted",e.INVOICE_SENT="Invoice Sent",e.PAYMENT_PENDING="Payment Pending",e.PAYMENT_RECEIVED="Payment Received",e.SHIPPED="Shipped",e.REFUND_SENT="Refund Sent",e.CANCELLED_NON_PAYING_BUYER="Cancelled (Non-Paying Buyer)",e.CANCELLED_ITEM_UNAVAILABLE="Cancelled (Item Unavailable)",e.CANCELLED_PER_BUYER_REQUEST="Cancelled (Per Buyer's Request)"}(f||(f={})),function(e){e.ALL="All",e.NEW_ORDER="New Order",e.BUYER_CONTACTED="Buyer Contacted",e.INVOICE_SENT="Invoice Sent",e.PAYMENT_PENDING="Payment Pending",e.PAYMENT_RECEIVED="Payment Received",e.SHIPPED="Shipped",e.MERGED="Merged",e.ORDER_CHANGED="Order Changed",e.REFUND_SENT="Refund Sent",e.CANCELLED="Cancelled",e.CANCELLED_NON_PAYING_BUYER="Cancelled (Non-Paying Buyer)",e.CANCELLED_ITEM_UNAVAILABLE="Cancelled (Item Unavailable)",e.CANCELLED_PER_BUYER_REQUEST="Cancelled (Per Buyer's Request)",e.CANCELLED_REFUND_RECEIVED="Cancelled (Refund Received)"}(h||(h={})),function(e){e.ID="id",e.BUYER="buyer",e.CREATED="created",e.STATUS="status",e.LAST_ACTIVITY="last_activity"}(p||(p={})),function(e){e.STATUS="status",e.MESSAGE="message",e.SHIPPING="shipping",e.REFUND_SENT="refund_sent",e.REFUND_RECEIVED="refund_received"}(v||(v={})),function(e){e.YEAR="year",e.TITLE="title",e.FORMAT="format"}(b||(b={})),function(e){e.RELEASE="release",e.MASTER="master",e.ARTIST="artist",e.LABEL="label"}(j||(j={})),function(e){e.LABEL="label",e.ARTIST="artist",e.TITLE="title",e.CATNO="catno",e.FORMAT="format",e.RATING="rating",e.YEAR="year",e.ADDED="added"}(m||(m={}));var D,B=function(e){Object(_.a)(n,e);var t=Object(N.a)(n);function n(){var e;return Object(C.a)(this,n),(e=t.call(this)).name="AuthError",e.message="Unauthorized",e.statusCode=401,Object.setPrototypeOf(Object(E.a)(e),n.prototype),e}return n}(Object(I.a)(Error)),G=function(e){Object(_.a)(n,e);var t=Object(N.a)(n);function n(e,r){var a;return Object(C.a)(this,n),(a=t.call(this,e)).message=e,a.name="DiscogsError",a.statusCode=r,Object.setPrototypeOf(Object(E.a)(a),n.prototype),a}return n}(Object(I.a)(Error));function U(e,t,n,r){return z.apply(this,arguments)}function z(){return(z=Object(w.a)(O.a.mark((function e(t,n,r,a){var i,c,s,o,u,l,d;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.schedule(T.a.bind(null,n,r));case 2:if(i=e.sent,c=i.status,s=i.statusText,401!==c){e.next=6;break}throw new B;case 6:if(!(422===c||c>=500)){e.next=13;break}return e.next=9,i.json();case 9:throw o=e.sent,u=o.message,console.log({status:c,statusText:s,message:u}),new G(u,c);case 13:if(!(c<200||c>=300)){e.next=15;break}throw new G(s,c);case 15:if(204!==c){e.next=17;break}return e.abrupt("return",Promise.resolve({}));case 17:if(!a){e.next=22;break}return e.next=20,i.blob();case 20:return l=e.sent,e.abrupt("return",l);case 22:return e.next=24,i.json();case 24:return d=e.sent,e.abrupt("return",d);case 26:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(e,t){var n=Object.entries(t).reduce((function(e,t){var n=Object(S.a)(t,2),r=n[0],a=n[1];return"undefined"===typeof a?e:Object(k.a)(Object(k.a)({},e),{},Object(x.a)({},r,a))}),{});return"".concat(e,"?").concat(Object(M.stringify)(n))}function V(e){return Object.entries(e).reduce((function(e,t){var n=Object(S.a)(t,2),r=n[0],a=n[1];return Object(k.a)(Object(k.a)({},e),{},Object(x.a)({},"currency"===r?"curr_abbr":r.replace(/[A-Z]/g,(function(e){return"_".concat(e.toLowerCase())})),a))}),{})}!function(e){e.GET="GET",e.POST="POST",e.PUT="PUT",e.DELETE="DELETE"}(D||(D={}));var H;function q(e){var t=e||{},n=t.page,r=void 0===n?1:n,a=t.perPage,i=void 0===a?50:a;return{page:Math.max(1,r),per_page:i<=0||i>100?50:i}}function K(e,t){var n=t||{},r=n.by,a=void 0===r?e:r,i=n.order;return{sort:a,sort_order:void 0===i?H.ASC:i}}!function(e){e.ASC="asc",e.DESC="desc"}(H||(H={}));var W,J="https://api.discogs.com";function X(e){return Boolean(e)&&"string"===typeof e.userToken}function Y(e){return Boolean(e)&&"string"===typeof e.consumerKey&&"string"===typeof e.consumerSecret&&"string"===typeof e.oAuthToken&&"string"===typeof e.oAuthTokenSecret}function Z(e){return X(e)||Y(e)}!function(e){e.DISCOGS="discogs"}(W||(W={}));var Q=function(){function t(e){Object(C.a)(this,t);var n=e||{},r=n.userAgent,a=void 0===r?"Discojs/2.1.0":r,i=n.outputFormat,c=void 0===i?W.DISCOGS:i,s=n.requestLimit,o=void 0===s?25:s,u=n.requestLimitAuth,l=void 0===u?60:u,d=n.requestLimitInterval,f=void 0===d?6e4:d,h=n.cache,p=void 0===h?void 0:h,v=n.fetchOptions,b=void 0===v?{}:v;if(this.userAgent=a,this.outputFormat=c,this.limiter=function(e){var t=e.concurrency,n=void 0===t?1:t,r=e.maxRequests,a=e.requestLimitInterval;return new F.a({maxConcurrent:n,minTime:a/r,reservoir:r,reservoirRefreshAmount:r,reservoirRefreshInterval:a})}({maxRequests:Z(e)?l:o,requestLimitInterval:f}),this.cache=p,this.fetchOptions=b,this.fetchHeaders="undefined"!==typeof(null===window||void 0===window?void 0:window.document)?new R.Headers({Accept:"application/vnd.discogs.".concat("v2",".").concat(this.outputFormat,"+json"),"Content-Type":"application/json"}):new R.Headers({Accept:"application/vnd.discogs.".concat("v2",".").concat(this.outputFormat,"+json"),"Accept-Encoding":"gzip,deflate",Connection:"close","Content-Type":"application/json","User-Agent":this.userAgent}),X(e)&&(this.setAuthorizationHeader=function(){return"Discogs token=".concat(e.userToken)}),Y(e)){var j=new P.a({consumer:{key:e.consumerKey,secret:e.consumerSecret},signature_method:"PLAINTEXT",version:"1.0"});this.setAuthorizationHeader=function(t,n){if(!t||!n)return"";var r=j.authorize({url:t,method:n},{key:e.oAuthToken,secret:e.oAuthTokenSecret});return j.toHeader(r).Authorization}}}return Object(y.a)(t,[{key:"fetch",value:function(){var t=Object(w.a)(O.a.mark((function t(n,r,a,i){var c,s,o,u,l,d,f,h=this;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=n.startsWith(J),s=n.startsWith("https://img.discogs.com"),o=s||c?n:J+(r&&"object"===typeof r?$(n,r):n),u=Object(k.a)(Object(k.a)({},this.fetchOptions),{},{method:a||D.GET}),this.setAuthorizationHeader&&this.fetchHeaders.set("Authorization",this.setAuthorizationHeader(n,a||D.GET)),l=new Map(this.fetchHeaders),i&&(d=JSON.stringify(V(i)),u.body=d,l.set("Content-Type","application/json"),"undefined"===typeof(null===window||void 0===window?void 0:window.document)&&l.set("Content-Length",e.byteLength(d,"utf8").toString())),u.headers=Object.fromEntries(l),f=function(){return U(h.limiter,o,u,s)},!this.cache){t.next=11;break}return t.abrupt("return",this.cache.get(f,o,u));case 11:return t.abrupt("return",f());case 12:case"end":return t.stop()}}),t,this)})));return function(e,n,r,a){return t.apply(this,arguments)}}()},{key:"getIdentity",value:function(){var e=Object(w.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.fetch("/oauth/identity"));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getUsername",value:function(){var e=Object(w.a)(O.a.mark((function e(){var t,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdentity();case 2:return t=e.sent,n=t.username,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getProfileForUser",value:function(){var e=Object(w.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.fetch("/users/".concat(t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getProfile",value:function(){var e=Object(w.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getUsername();case 2:return t=e.sent,e.abrupt("return",this.getProfileForUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"editProfile",value:function(){var e=Object(w.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getUsername();case 2:return n=e.sent,e.abrupt("return",this.fetch("/users/".concat(n),{},D.POST,Object(k.a)({username:n},t)));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSubmissionsForUser",value:function(){var e=Object(w.a)(O.a.mark((function e(t,n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.fetch("/users/".concat(t,"/submissions"),q(n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getSubmissions",value:function(){var e=Object(w.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getUsername();case 2:return n=e.sent,e.abrupt("return",this.getSubmissionsForUser(n,t));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getContributionsForUser",value:function(){var e=Object(w.a)(O.a.mark((function e(t,n,r){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.fetch("/users/".concat(t,"/contributions"),Object(k.a)(Object(k.a)({},K(m.ADDED,n)),q(r))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"getContributions",value:function(){var e=Object(w.a)(O.a.mark((function e(t,n){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getUsername();case 2:return r=e.sent,e.abrupt("return",this.getContributionsForUser(r,t,n));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"listFoldersForUser",value:function(){var e=Object(w.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.fetch("/users/".concat(t,"/collection/folders")));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"listFolders",value:function(){var e=Object(w.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getUsername();case 2:return t=e.sent,e.abrupt("return",this.listFoldersForUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createFolder",value:function(){var e=Object(w.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getUsername();case 2:return n=e.sent,e.abrupt("return",this.fetch("/users/".concat(n,"/collection/folders"),{},D.POST,{name:t}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getFolderForUser",value:function(){var e=Object(w.a)(O.a.mark((function e(t,n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.fetch("/users/".concat(t,"/collection/folders/").concat(n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getFolder",value:function(){var e=Object(w.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getUsername();case 2:return n=e.sent,e.abrupt("return",this.getFolderForUser(n,t));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"editFolder",value:function(){var e=Object(w.a)(O.a.mark((function e(t,n){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getUsername();case 2:return r=e.sent,e.abrupt("return",this.fetch("/users/".concat(r,"/collection/folders/").concat(t),{},D.POST,{name:n}));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"deleteFolder",value:function(){var e=Object(w.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getUsername();case 2:return n=e.sent,e.abrupt("return",this.fetch("/users/".concat(n,"/collection/folders/").concat(t),{},D.DELETE));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"listItemsByReleaseForUser",value:function(){var e=Object(w.a)(O.a.mark((function e(t,n,r){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.fetch("/users/".concat(t,"/collection/releases/").concat(n),q(r)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"listItemsByRelease",value:function(){var e=Object(w.a)(O.a.mark((function e(t,n){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getUsername();case 2:return r=e.sent,e.abrupt("return",this.listItemsByReleaseForUser(r,t,n));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"listItemsInFolderForUser",value:function(){var e=Object(w.a)(O.a.mark((function e(t,n,r,a){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.fetch("/users/".concat(t,"/collection/folders/").concat(n,"/releases"),Object(k.a)(Object(k.a)({},K(m.ADDED,r)),q(a))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"listItemsInFolder",value:function(){var e=Object(w.a)(O.a.mark((function e(t,n,r){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getUsername();case 2:return a=e.sent,e.abrupt("return",this.listItemsInFolderForUser(a,t,n,r));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"addReleaseToFolder",value:function(){var e=Object(w.a)(O.a.mark((function e(t){var n,r,a=arguments;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:o.UNCATEGORIZED,e.next=3,this.getUsername();case 3:return r=e.sent,e.abrupt("return",this.fetch("/users/".concat(r,"/collection/folders/").concat(n,"/releases/").concat(t),{},D.POST));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"editReleaseInstanceRating",value:function(){var e=Object(w.a)(O.a.mark((function e(t,n,r,a){var i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getUsername();case 2:return i=e.sent,e.abrupt("return",this.fetch("/users/".concat(i,"/collection/folders/").concat(t,"/releases/").concat(n,"/instances/").concat(r),{},D.POST,{rating:a}));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"moveReleaseInstanceToFolder",value:function(){var e=Object(w.a)(O.a.mark((function e(t,n,r,a){var i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getUsername();case 2:return i=e.sent,e.abrupt("return",this.fetch("/users/".concat(i,"/collection/folders/").concat(t,"/releases/").concat(n,"/instances/").concat(r),{},D.POST,{folderId:a}));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"deleteReleaseInstanceFromFolder",value:function(){var e=Object(w.a)(O.a.mark((function e(t,n,r){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getUsername();case 2:return a=e.sent,e.abrupt("return",this.fetch("/users/".concat(a,"/collection/folders/").concat(t,"/releases/").concat(n,"/instances/").concat(r),{},D.DELETE));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"listCustomFieldsForUser",value:function(){var e=Object(w.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.fetch("/users/".concat(t,"/collection/fields")));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"listCustomFields",value:function(){var e=Object(w.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getUsername();case 2:return t=e.sent,e.abrupt("return",this.listCustomFieldsForUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"editCustomFieldForInstance",value:function(){var e=Object(w.a)(O.a.mark((function e(t,n,r,a,i){var c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getUsername();case 2:return c=e.sent,e.abrupt("return",this.fetch("/users/".concat(c,"/collection/folders/").concat(t,"/releases/").concat(n,"/instances/").concat(r,"/fields/").concat(a),void 0,D.POST,{value:i}));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a,i){return e.apply(this,arguments)}}()},{key:"getCollectionValue",value:function(){var e=Object(w.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getUsername();case 2:return t=e.sent,e.abrupt("return",this.fetch("/users/".concat(t,"/collection/value")));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getWantlistForUser",value:function(){var e=Object(w.a)(O.a.mark((function e(t,n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.fetch("/users/".concat(t,"/wants"),q(n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getWantlist",value:function(){var e=Object(w.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getUsername();case 2:return n=e.sent,e.abrupt("return",this.getWantlistForUser(n,t));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addToWantlist",value:function(){var e=Object(w.a)(O.a.mark((function e(t,n,r){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getUsername();case 2:return a=e.sent,e.abrupt("return",this.fetch("/users/".concat(a,"/wants/").concat(t),{notes:n,rating:r},D.PUT));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"removeFromWantlist",value:function(){var e=Object(w.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getUsername();case 2:return n=e.sent,e.abrupt("return",this.fetch("/users/".concat(n,"/wants/").concat(t),{},D.DELETE));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getListsForUser",value:function(){var e=Object(w.a)(O.a.mark((function e(t,n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.fetch("/users/".concat(t,"/lists"),q(n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getLists",value:function(){var e=Object(w.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getUsername();case 2:return n=e.sent,e.abrupt("return",this.getListsForUser(n,t));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getListItems",value:function(){var e=Object(w.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.fetch("/lists/".concat(t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"searchDatabase",value:function(){var e=Object(w.a)(O.a.mark((function e(){var t,n,r=arguments;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},n=r.length>1?r[1]:void 0,e.abrupt("return",this.fetch("/database/search",Object(k.a)(Object(k.a)({},t),q(n))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"searchRelease",value:function(){var e=Object(w.a)(O.a.mark((function e(t){var n,r,a=arguments;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{},r=a.length>2?a[2]:void 0,e.abrupt("return",this.searchDatabase(Object(k.a)(Object(k.a)({},n),{},{query:t,type:j.RELEASE}),r));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getRelease",value:function(){var e=Object(w.a)(O.a.mark((function e(t,n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.fetch("/releases/".concat(t),{currency:n}));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getReleaseRatingForUser",value:function(){var e=Object(w.a)(O.a.mark((function e(t,n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.fetch("/releases/".concat(n,"/rating/").concat(t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getReleaseRating",value:function(){var e=Object(w.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getUsername();case 2:return n=e.sent,e.abrupt("return",this.getReleaseRatingForUser(n,t));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateReleaseRating",value:function(){var e=Object(w.a)(O.a.mark((function e(t,n){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getUsername();case 2:return r=e.sent,e.abrupt("return",this.fetch("/releases/".concat(t,"/rating/").concat(r),{},D.PUT,{rating:n}));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"deleteReleaseRating",value:function(){var e=Object(w.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getUsername();case 2:return n=e.sent,e.abrupt("return",this.fetch("/releases/".concat(t,"/rating/").concat(n),{},D.DELETE));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getCommunityReleaseRating",value:function(){var e=Object(w.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.fetch("/releases/".concat(t,"/rating")));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"searchMaster",value:function(){var e=Object(w.a)(O.a.mark((function e(t){var n,r,a=arguments;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{},r=a.length>2?a[2]:void 0,e.abrupt("return",this.searchDatabase(Object(k.a)(Object(k.a)({},n),{},{query:t,type:j.MASTER}),r));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMaster",value:function(){var e=Object(w.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.fetch("/masters/".concat(t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMasterVersions",value:function(){var e=Object(w.a)(O.a.mark((function e(t,n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.fetch("/masters/".concat(t,"/versions"),q(n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"searchArtist",value:function(){var e=Object(w.a)(O.a.mark((function e(t){var n,r,a=arguments;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{},r=a.length>2?a[2]:void 0,e.abrupt("return",this.searchDatabase(Object(k.a)(Object(k.a)({},n),{},{query:t,type:j.ARTIST}),r));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getArtist",value:function(){var e=Object(w.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.fetch("/artists/".concat(t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getArtistReleases",value:function(){var e=Object(w.a)(O.a.mark((function e(t,n,r){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.fetch("/artists/".concat(t,"/releases"),Object(k.a)(Object(k.a)({},K(b.YEAR,n)),q(r))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"searchLabel",value:function(){var e=Object(w.a)(O.a.mark((function e(t){var n,r,a=arguments;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{},r=a.length>2?a[2]:void 0,e.abrupt("return",this.searchDatabase(Object(k.a)(Object(k.a)({},n),{},{query:t,type:j.LABEL}),r));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getLabel",value:function(){var e=Object(w.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.fetch("/labels/".concat(t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getLabelReleases",value:function(){var e=Object(w.a)(O.a.mark((function e(t,n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.fetch("/labels/".concat(t,"/releases"),q(n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getInventoryForUser",value:function(){var e=Object(w.a)(O.a.mark((function e(t){var n,r,a,i=arguments;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:u.ALL,r=i.length>2?i[2]:void 0,a=i.length>3?i[3]:void 0,e.abrupt("return",this.fetch("/users/".concat(t,"/inventory"),Object(k.a)(Object(k.a)({status:n},K(l.LISTED,r)),q(a))));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getInventory",value:function(){var e=Object(w.a)(O.a.mark((function e(t,n,r){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getUsername();case 2:return a=e.sent,e.abrupt("return",this.getInventoryForUser(a,t,n,r));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"getListing",value:function(){var e=Object(w.a)(O.a.mark((function e(t,n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.fetch("/marketplace/listings/".concat(t),{currency:n}));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"editListing",value:function(){var e=Object(w.a)(O.a.mark((function e(t,n,r){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.fetch("/marketplace/listings/".concat(t),{currency:r},D.POST,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"deleteListing",value:function(){var e=Object(w.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.fetch("/marketplace/listings/".concat(t),{},D.DELETE));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createListing",value:function(){var e=Object(w.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.fetch("/marketplace/listings",{},D.POST,t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getOrder",value:function(){var e=Object(w.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.fetch("/marketplace/orders/".concat(t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"editOrder",value:function(){var e=Object(w.a)(O.a.mark((function e(t,n,r){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.fetch("/marketplace/orders/".concat(t),{},D.POST,{status:n,shipping:r}));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"listOrders",value:function(){var e=Object(w.a)(O.a.mark((function e(t,n,r,a){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.fetch("/marketplace/orders",Object(k.a)(Object(k.a)({status:t,archived:n},K(p.ID,r)),q(a))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"listOrderMessages",value:function(){var e=Object(w.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.fetch("/marketplace/orders/".concat(t,"/messages")));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendOrderMessage",value:function(){var e=Object(w.a)(O.a.mark((function e(t,n,r){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.fetch("/marketplace/orders/".concat(t,"/messages"),{},D.POST,{message:n,status:r}));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"getFee",value:function(){var e=Object(w.a)(O.a.mark((function e(t,n){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="/marketplace/fee/".concat(t),n&&(r+="/".concat(n)),e.abrupt("return",this.fetch(r));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getPriceSuggestions",value:function(){var e=Object(w.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.fetch("/marketplace/price_suggestions/".concat(t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMarketplaceStatistics",value:function(){var e=Object(w.a)(O.a.mark((function e(t,n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.fetch("/marketplace/stats/".concat(t),{currency:n}));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchImage",value:function(){var e=Object(w.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.fetch(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"next",value:function(e){var t=e.pagination.urls.next;return void 0===t?Promise.resolve(void 0):this.fetch(t)}},{key:"all",value:function(){var e=Object(w.a)(O.a.mark((function e(t,n,r){var a,i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[];case 1:if(void 0===n){e.next=12;break}return i=n[t],null===r||void 0===r||r(i),a=a.concat(i),e.next=7,this.next(n);case 7:if(void 0!==(n=e.sent)){e.next=10;break}return e.abrupt("break",12);case 10:e.next=1;break;case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()}],[{key:"getSupportedCurrencies",value:function(){return Object.values(s)}},{key:"getReleaseConditions",value:function(){return Object.values(i)}},{key:"getSleeveConditions",value:function(){return Object.values(c)}}]),t}()}).call(this,n(40).Buffer)},263:function(e,t,n){"use strict";t.__esModule=!0,t.arraySetAdd=void 0;var r=n(67),a=n(197);t.arraySetAdd=function(e,t,n,i){var c,s,o;Array.isArray(e)?(c=e,s=t,o=n):(c=(0,a.ensureArray)(e,t),s=n,o=i);var u="object"!==typeof s?c.indexOf(s):c.findIndex(r.isEqual.bind(null,s)),l=u>=0;if(l){if("mru"!==o)return!1;c.splice(u,1)}return c.push(s),"function"===typeof o?c.sort(o):!0===o&&c.sort(),!l}},291:function(e,t,n){},293:function(e,t,n){"use strict";t.__esModule=!0,t.sync=void 0,t.sync=function(e,t){for(var n=0;n<t.length;)if(e.includes(t[n]))n++;else{for(var r=1;n+r<t.length&&!e.includes(t[n+r]);)r++;t.splice(n,r)}for(n=0;n<e.length;)if(t.includes(e[n]))n++;else{for(r=1;n+r<t.length&&!t.includes(e[n+r]);)r++;1===r?t.push(e[n]):t.push.apply(t,e.slice(n,n+r))}}},31:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return u}));var r=n(2),a=n.n(r),i=n(35),c=n.n(i),s=n(416),o=n.n(s);function u(e,t,n){var r,i,s,u=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=c()(o()(t));switch(r.length){case 0:return;case 1:return r[0];default:return r.join(e)}}(":",t),l=a.a.useMemo((function(){return"local"===e?e=window.localStorage:"session"===e&&(e=window.sessionStorage),[e.setItem.bind(e,u),e.removeItem.bind(e,u),e.getItem(u)]}),[e,u]),d=l[0],f=l[1],h=l[2];if(null!==h)if("undefined"===h)i=void 0;else if("null"===h)i=null;else try{i=null!==(r=JSON.parse(h))&&void 0!==r?r:void 0}catch(j){console.error(j)}s=void 0===i?"function"===typeof n?n():n:i;var p=a.a.useState(s),v=p[0],b=p[1];return a.a.useEffect((function(){d(void 0===v?"undefined":null===v?"null":JSON.stringify(v))}),[v,d,f]),a.a.useEffect(b.bind(null,s),[u,b]),[v,b,function(){b("function"===typeof n?n():n)}]}},32:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};t.__esModule=!0,a(n(557),t),a(n(263),t),a(n(558),t),a(n(559),t),a(n(560),t),a(n(561),t),a(n(562),t),a(n(563),t),a(n(564),t),a(n(197),t),a(n(565),t),a(n(566),t),a(n(567),t),a(n(342),t),a(n(293),t)},342:function(e,t,n){"use strict";t.__esModule=!0,t.spread=void 0,t.spread=function(e){return void 0===e?[]:Array.isArray(e)?e:[e]}},36:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(4),a=n(215),i=n.n(a),c=n(212),s=n.n(c),o=n(2),u=n.n(o),l=n(109),d=n(1);function f(e){var t=e.value,n=e.setValue,a=u.a.useMemo(i.a,[]),c=s()(e,"value","setValue");return Object(d.jsx)(l.a,Object(r.a)({id:a,checked:t,onChange:n.bind(null,!t)},c))}},410:function(e,t,n){},438:function(e,t,n){var r,a=n(798).wrap,i=n(799);e.exports=function e(){return this instanceof e?a(i()):r||(r=a(i()))}},49:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(41),a=n(48),i=n(5),c=function(){function e(){var t=this;Object(r.a)(this,e),this.insertionOrder=new Map,this.inOrder=Object(i.B)([]),this.values=function(){return t.inOrder},this.get=function(e){var n=t.insertionOrder.get(e);if(void 0!==n)return t.inOrder[n]},this.has=function(e){return t.insertionOrder.has(e)},this.count=function(e){var n=0;return t.inOrder.forEach((function(t){e(t)&&n++})),n},this.set=Object(i.k)((function(e,n){var r=t.insertionOrder.get(e);void 0!==r?t.inOrder[r]=n:(t.insertionOrder.set(e,t.inOrder.length),t.inOrder.push(n))})),this.getOrCreate=Object(i.k)((function(e,n){var r=t.get(e);return void 0===r&&(r=n(),t.set(e,r)),r})),this.getOrRefresh=Object(i.k)((function(e,n,r){var a=t.get(e);return(void 0===a||r)&&(a=n(a),t.set(e,a)),a})),Object(i.A)(this,{size:i.m})}return Object(a.a)(e,[{key:"size",get:function(){return this.inOrder.length}}]),e}()},557:function(e,t,n){"use strict";t.__esModule=!0,t.array=void 0,t.array=function(e){if(void 0!==e)return Array.isArray(e)?e:[e]}},558:function(e,t,n){"use strict";t.__esModule=!0,t.arraySetAddAll=void 0;var r=n(263),a=n(32),i=n(342);t.arraySetAddAll=function(e,t,n,c){var s,o,u;if(Array.isArray(e)){if(s=e,!(o=t)||0===o.length)return!1;u=n}else{if(!(o=n)||0===o.length)return!1;s=(0,a.ensureArray)(e,t),u=c}return(0,i.spread)(o).map((function(e){return(0,r.arraySetAdd)(s,e,u)})).includes(!0)}},559:function(e,t,n){"use strict";t.__esModule=!0,t.arraySetClear=void 0,t.arraySetClear=function(e,t){var n=e[t];return n&&n.length>0&&n.splice(0,n.length),n}},560:function(e,t,n){"use strict";t.__esModule=!0,t.arraySetHas=void 0,t.arraySetHas=function(e,t,n){var r,a=Array.isArray(e)?[e,t]:[null!==(r=null===e||void 0===e?void 0:e[t])&&void 0!==r?r:null,n],i=a[0],c=a[1];return null!==i&&("function"===typeof c?i.findIndex(c)>=0:i.includes(c))}},561:function(e,t,n){"use strict";t.__esModule=!0,t.arraySetRemove=void 0;var r=n(67),a=n(197);t.arraySetRemove=function(e,t,n){var i,c,s;if(Array.isArray(e))i=e,c=t;else{if(void 0===e[t])return!1;i=(0,a.ensureArray)(e,t),c=n}switch(typeof c){case"function":s=i.findIndex(c);break;case"object":s=i.findIndex(r.isEqual.bind(null,c));break;default:s=i.indexOf(c)}return s>=0&&(i.splice(s,1),!0)}},562:function(e,t,n){"use strict";t.__esModule=!0,t.arraySetToggle=void 0;var r=n(67),a=n(263),i=n(197);t.arraySetToggle=function(e,t,n,c){var s,o,u;if(Array.isArray(e))s=e,o=t,u=n;else{if(o=n,u=c,void 0===e[t])return(0,a.arraySetAdd)(e,t,o,u),!0;s=(0,i.ensureArray)(e,t)}var l="object"!==typeof o?s.indexOf(o):s.findIndex(r.isEqual.bind(null,o));return l>=0?(s.splice(l,1),!1):((0,a.arraySetAdd)(s,o,u),!0)}},563:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function a(e){return Array.isArray(e)}function i(e){return e=(e=(e=e.replace(/^\W*((an?|the) )?/i,"")).replace(/\b(Mc)(?=[A-Z])/,"Mac")).replace(/\b(Ste?.) /,"Saint ")}t.__esModule=!0,t.compare=void 0,t.compare=function e(t,n,c){if(void 0===t)return void 0===n?0:(null===c||void 0===c?void 0:c.emptyLast)?1:-1;if(void 0===n)return(null===c||void 0===c?void 0:c.emptyLast)?-1:1;if(a(t)){if(a(n)){if(0===t.length)return 0===n.length?0:(null===c||void 0===c?void 0:c.emptyLast)?1:-1;if(0===n.length)return(null===c||void 0===c?void 0:c.emptyLast)?-1:1;for(var s=0;s<t.length;++s){if(s>=n.length)return 1;var o=e(t[s],n[s],c);if(0!==o)return o}return t.length===n.length?0:-1}return e(t,[n],c)}if(a(n))return e([t],n,c);if("string"===typeof t){if("string"===typeof n)return(null===c||void 0===c?void 0:c.library)&&(t=i(t),n=i(n)),t.localeCompare(n);if(null===c||void 0===c?void 0:c.toString)return e(t,c.toString(n),c)}else if("string"===typeof n){if(null===c||void 0===c?void 0:c.toString)return e(c.toString(t),n,c)}else if(null===c||void 0===c?void 0:c.toString)return e(c.toString(t),c.toString(n),c);return console.warn(r({badOperands:{a:t,b:n}},null!==c&&void 0!==c?c:{})),0}},564:function(e,t,n){"use strict";t.__esModule=!0,t.ensure=void 0,t.ensure=function(e,t,n){var r=e[t];if(void 0!==r)return r;switch(typeof n){case"function":r=new n;break;default:r=n.factory()}return e[t]=r}},565:function(e,t,n){"use strict";t.__esModule=!0,t.ensureMap=void 0,t.ensureMap=function(e,t){var n=e[t];return void 0!==n?n:e[t]={}}},566:function(e,t,n){"use strict";t.__esModule=!0,t.first=void 0,t.first=function(e){if(void 0===e)return e;if(Array.isArray(e)){if(0===e.length)return;return e[0]}return e}},567:function(e,t,n){"use strict";t.__esModule=!0,t.last=void 0,t.last=function(e){if(void 0===e)return e;if(Array.isArray(e)){if(0===e.length)return;return e[e.length-1]}return e}},601:function(e,t,n){},602:function(e,t,n){},603:function(e,t,n){},607:function(e,t,n){},619:function(e,t,n){},62:function(e,t,n){"use strict";(function(e){n.d(t,"c",(function(){return b})),n.d(t,"e",(function(){return j})),n.d(t,"a",(function(){return m})),n.d(t,"d",(function(){return g})),n.d(t,"b",(function(){return C}));var r=n(7),a=n(4),i=n(5),c=n(51),s=n(2),o=n.n(s),u=n(20),l=n(23),d=n(39),f=n(27),h=n(17),p=n(79),v=n(1),b={url:/\/collection\/folders\/?$/},j={url:/\/users\/[^/]+$/},m={url:/\/collection\/folders\/0\//},g={url:/\/inventory\?/},O={url:/\/marketplace\/(?!orders)/},y={url:/\/marketplace\/orders/},x={url:/discogs\.com\/masters\//},k={url:/discogs\.com\/releases\//},S={url:/discogs\.com\/artists\//},w={url:/discogs\.com\/lists\//};function C(t){var n=t.variant,r=t.badgeVariant,s=void 0===r?"light":r,u=t.badgeTextVariant,p=void 0===u?"dark":u,j=o.a.useMemo((function(){return Object(i.B)({collectionCount:{c:0},inventoryCount:{c:0},marketplaceCount:{c:0},ordersCount:{c:0},folderNamesCount:{c:0},mastersCount:{c:0},releasesCount:{c:0},artistsCount:{c:0},listsCount:{c:0},allCount:{c:0}})}),[]),C=o.a.useContext(h.a).cache,_=o.a.useCallback((function(t,n){if(C){var r=C.count(n);r.label=t,e((function(){return Object(i.F)((function(){return j[t]=Object(a.a)(Object(a.a)({},j[t]),{},{p:r})}))})),r.then(Object(i.k)((function(e){j[t]={c:e}})))}}),[C,j]);return C?(_("collectionCount",m),_("inventoryCount",g),_("marketplaceCount",O),_("ordersCount",y),_("folderNamesCount",b),_("mastersCount",x),_("releasesCount",k),_("artistsCount",S),_("listsCount",w),_("allCount",void 0),Object(v.jsx)(c.a,{render:function(){var e=j.collectionCount,t=j.inventoryCount,n=j.ordersCount,r=j.marketplaceCount,a=j.folderNamesCount,i=j.mastersCount,c=j.releasesCount,s=j.artistsCount,o=j.listsCount,u=j.allCount;return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(f.a,{children:Object(v.jsx)(l.a,{children:Object(v.jsxs)(d.a,{className:"mb-2",children:[Object(v.jsx)(N,{query:m,label:"Collection",count:e}),Object(v.jsx)(N,{query:g,label:"Inventory",count:t}),Object(v.jsx)(N,{query:y,label:"Orders",count:n}),Object(v.jsx)(N,{query:O,label:"Marketplace",count:r}),Object(v.jsx)(N,{query:b,label:"Folders",count:a}),Object(v.jsx)(N,{query:x,label:"Masters",count:i}),Object(v.jsx)(N,{query:k,label:"Releases",count:c}),Object(v.jsx)(N,{query:S,label:"Artists",count:s}),Object(v.jsx)(N,{query:w,label:"Lists",count:o}),Object(v.jsx)(N,{query:void 0,label:"All",count:u})]})})})})}})):null;function N(e){var t=e.query,r=e.label,a=e.count;if(!C)return null;return Object(v.jsx)(E,{count:a.c,promise:a.p,badgeVariant:s,badgeTextVariant:p,variant:n,onClick:function(){var e=C.clear(t,!0);return e.label="Clearing ".concat(r,"..."),e},label:r})}}function E(e){var t=e.count,n=e.badgeVariant,a=e.badgeTextVariant,i=e.variant,c=e.onClick,s=e.label,l=e.promise,d=o.a.useState(),f=Object(r.a)(d,2),h=f[0],b=f[1],j=o.a.useCallback((function(){return b(void 0)}),[]),m=t?Object(v.jsxs)(v.Fragment,{children:["\xa0",Object(v.jsx)(p.a,{bg:n,text:a,children:t})]}):null,g=null!==l&&void 0!==l?l:h;return Object(v.jsxs)(u.a,{variant:i,onClick:function(){return b(c().then(j))},disabled:void 0!==g,title:null===g||void 0===g?void 0:g.label,children:[s,m]})}}).call(this,n(166).setImmediate)},622:function(e,t,n){},623:function(e,t,n){},624:function(e,t,n){},630:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(631);t.default=r},645:function(e,t){},647:function(e,t){},658:function(e,t){},660:function(e,t){},685:function(e,t){},686:function(e,t){},691:function(e,t){},693:function(e,t){},700:function(e,t){},719:function(e,t){},737:function(e,t,n){},783:function(e,t,n){},786:function(e,t,n){},788:function(e,t,n){},79:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(4),a=n(108),i=n(1);function c(e){var t,n=e.text,c=null!==(t=e.bg)&&void 0!==t?t:"light";return"light"===c&&void 0===n&&(n="dark"),Object(i.jsx)(a.a,Object(r.a)({bg:c,text:n},e))}},799:function(e,t,n){e.exports=function(){return new Worker(n.p+"ba1288fbfb7dad1a5852.worker.js")}},800:function(e,t,n){},801:function(e,t,n){},802:function(e,t,n){},804:function(e,t,n){},805:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),i=n(47),c=n.n(i),s=n(7),o=n(31),u=n(22),l=(n(314),n(420)),d=n.n(l),f=n(5),h=n(179),p=n(23),v=n(150),b=n(27),j=n(28),m=n(45),g=n(35),O=n.n(g),y=n(58),x=n.n(y),k=n(210),S=n.n(k),w=n(51),C=n(34),E=n(20),_=n(107),N=n(1);function I(e){var t=e.item,n=e.thumb;return Object(N.jsxs)(j.c,{exact:!0,to:"/collection#".concat(t.instance_id),children:[n?Object(N.jsx)(_.a,{src:t.basic_information.thumb,style:{height:"1.5rem",borderRadius:5,verticalAlign:"middle",paddingInline:"0.2rem"}}):void 0,t.basic_information.title]})}var R=n(85),T=n(6),A=n.n(T),P=n(13),M=n(37),L=n(25),F=n(4),D=n(32),B=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))};function G(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(!(t.length<=e)){var r=t[e];"object"===typeof r?r=Array.isArray(r)?r.length?G.apply(void 0,B([0],r,!1)):void 0:r?r.className:void 0:!1===r&&(r=void 0);var a=G.apply(void 0,B([e+1],t,!1));return r?a?r+" "+a:r:a}}function U(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return G.apply(void 0,B([0],e,!1))}var z=n(178),$=n.n(z),V=n(303),H=n.n(V),q=n(102),K=n.n(q),W=n(61),J=n.n(W),X=n(212),Y=n.n(X),Z=n(90),Q=n.n(Z),ee=n(21),te=n(122),ne=n(19),re=n(18),ae=n(439),ie=n(422),ce=n(67),se=n(53),oe=n(305),ue=n(17),le=n(62),de=n(108);function fe(e){return e instanceof Function&&0===e.length?fe(e()):e}function he(e,t){return"function"===typeof e?he(e()):"string"===typeof e?e:t?t(e):"".concat(e)}var pe;n(601);!function(e){e.tag="tag",e.genre="genre",e.format="format",e.style="style",e.list="list",e.box="box",e.task="task",e.shelf="shelf",e.bay="bay",e.unknown="unknown"}(pe||(pe={}));var ve=a.a.forwardRef((function(e,t){var n=e.className,r=e.tag,i=e.kind,c=e.extra,s=e.title,o=e.bg,u=e.onClickIcon,l=e.onClick,d=e.onClickCount,f=e.onClickExtra,h=a.a.useContext(ue.a).lpdb;return Object(N.jsx)(w.a,{render:function(){var e,a,p,v="tags";switch(i){case pe.format:p=re.l;break;case pe.list:p=re.r,a=null===h||void 0===h||null===(e=h.listByName(he(r)))||void 0===e?void 0:e.items.length;break;case pe.genre:p=re.C,a=null===h||void 0===h?void 0:h.byTag(he(r)).length;break;case pe.style:p=re.n,a=null===h||void 0===h?void 0:h.byTag(he(r)).length;break;case pe.tag:p=re.B;break;case pe.bay:p=re.a;break;case pe.task:v="tasks",p=re.A;break;case pe.box:p=re.b;break;case pe.shelf:p=re.m;break;case pe.unknown:p=re.q;break;default:p=re.A}var b=Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(p,{onClick:u}),"\xa0",fe(r),a?Object(N.jsxs)(N.Fragment,{children:["\xa0",Object(N.jsx)(de.a,{className:"count",bg:"light",text:"dark",onClick:d,children:a})]}):null,c?Object(N.jsxs)(N.Fragment,{children:["\xa0","function"===typeof c?fe(c):Object(N.jsx)(be,{onClick:f,extra:fe(c)})]}):null]});void 0===l&&(b=Object(N.jsx)(j.c,{exact:!0,to:"/".concat(v,"/").concat(encodeURIComponent(he(r))),children:b}));return Object(N.jsx)(de.a,{ref:t,className:U(i,"tag",n),bg:null!==o&&void 0!==o?o:"secondary",text:"light"===o?"dark":void 0,onClick:l,title:s,children:b})}})}));function be(e){var t,n=e.onClick,r=e.extra;return void 0===n&&"string"===typeof r&&r.match(/[.!?]$/)&&(t=r,r="\u2026"),Object(N.jsx)(de.a,{className:"extra",bg:"light",text:"dark",onClick:n,title:t,children:fe(r)})}function je(e){var t,n,r,a,i,c,o=e.split(/- |, /,2),u=Object(s.a)(o,2),l=u[0],d=u[1];switch(l){case"Shelf":r=pe.shelf,c=d;break;case"Box":case"":r=pe.box,c=d;break;case"Service Bay":r=pe.bay,c="Remain (Service)";break;case"Sold":r=pe.unknown,c="Sold";break;case"Uncategorized":r=pe.unknown,c="Uncategorized (Uncategorized)";break;default:r=pe.unknown,c=e}var f=c.split(/ (?!\w)/,2),h=Object(s.a)(f,2),p=h[0],v=h[1],b=Object(R.a)(/\((.*)\)/,{label:1}).exec(v);switch(a=null!==(t=null===b||void 0===b||null===(n=b.groups)||void 0===n?void 0:n.label)&&void 0!==t?t:v,p){case"Remain":case"Top":case"Bottom":i="remain";break;case"Cube 1":a="C1 ".concat(a),i="remain";break;case"Leave":i="leave";break;case"Listed":i="listed";break;case"Sold":i="sold",a=p;break;case"Uncategorized":i="unknown";break;default:i=p}return{type:r,label:a,status:i}}function me(){var e=a.a.useContext(ue.a),t=e.cache,n=e.folders,r=a.a.useMemo((function(){return function(e,n){return null===t||void 0===t||t.clear(e),n}}),[t]);return a.a.useCallback((function(e){var t,a=null===n||void 0===n||null===(t=n.find((function(t){return t.id===e})))||void 0===t?void 0:t.name;return null!==a&&void 0!==a?a:r(le.c,"Unknown")}),[n,r])}n(602);function ge(e){var t=e.children;return Object(N.jsxs)("div",{className:"overlay-container",children:[Object(N.jsx)("div",{className:"overlay",children:t}),Object(N.jsx)(re.l,{})]})}var Oe=n(26),ye=Symbol("Pending");function xe(e){return"object"===typeof e&&ye in e}function ke(e){return xe(e)?e.value:e}function Se(e,t,n,r){var a=Object(Oe.a)({value:n},ye,void 0),i=e[t];return we(e,t,a),r.then((function(r){return we(e,t,n),r}),(function(n){throw we(e,t,i),n}))}function we(e,t,n){Object(f.v)(e)?Object(f.k)("mutate",(function(){return e[t]=n}))():e[t]=n}var Ce=n.p+"static/media/acoustic-sounds-logo.a186348f.svg",Ee=n.p+"static/media/vinyl-post-logo.1bcd483f.png",_e=n.p+"static/media/black-box-logo.250084b5.png";function Ne(e){var t=e.icon;return void 0===t&&(t="string"===typeof e.children),Object(N.jsxs)("a",Object(F.a)(Object(F.a)({},Object(F.a)(Object(F.a)({},e),{},{children:void 0})),{},{target:"_blank",rel:"noreferrer",children:[e.children,t&&Object(N.jsx)(re.p,{className:"append-inline-icon"})]}))}var Ie,Re,Te=n(304),Ae=n.n(Te),Pe=window.yamlAllKeys=null!==(Ie=window.yamlAllKeys)&&void 0!==Ie?Ie:new Set;function Me(e){var t=e.split(/(?:^|\n)---\n/,2),n=Object(s.a)(t,2),r=n[0],a=n[1];if(!a)return{preamble:r,values:{}};var i=Ae.a.parse(a);return Object.keys(i).forEach((function(e){Pe.has(e)||(console.log("New key: ".concat(e)),Pe.add(e))})),{preamble:r,values:i}}function Le(e,t,n){var r=Me(e),a=r.preamble,i=r.values;return i[t]===n?e:(i[t]=n,"".concat(a,"\n---\n").concat(Ae.a.stringify(i)))}function Fe(){var e=a.a.useContext(ue.a).fieldsByName,t=a.a.useMemo((function(){var t;return null===(t=e.get(Re.mediaCondition))||void 0===t?void 0:t.id}),[e]),n=a.a.useMemo((function(){var t;return null===(t=e.get(Re.sleeveCondition))||void 0===t?void 0:t.id}),[e]),r=a.a.useMemo((function(){var t;return null===(t=e.get(Re.source))||void 0===t?void 0:t.id}),[e]),i=a.a.useMemo((function(){var t;return null===(t=e.get(Re.orderNumber))||void 0===t?void 0:t.id}),[e]),c=a.a.useMemo((function(){var t;return null===(t=e.get(Re.plays))||void 0===t?void 0:t.id}),[e]),s=a.a.useMemo((function(){var t;return null===(t=e.get(Re.notes))||void 0===t?void 0:t.id}),[e]),o=a.a.useMemo((function(){var t;return null===(t=e.get(Re.price))||void 0===t?void 0:t.id}),[e]);return{mediaConditionId:t,sleeveConditionId:n,playsId:c,sourceId:r,orderNumberId:i,priceId:o,notesId:s,noteIds:{mediaCondition:t,sleeveCondition:n,source:r,orderNumber:i,notes:s,price:o,plays:c,tasks:a.a.useMemo((function(){var t;return null===(t=e.get(Re.tasks))||void 0===t?void 0:t.id}),[e])}}}!function(e){e.mediaCondition="Media Condition",e.sleeveCondition="Sleeve Condition",e.source="Source",e.orderNumber="Order",e.notes="Notes",e.price="Price",e.plays="Plays",e.tasks="Task"}(Re||(Re={}));var De,Be={mediaCondition:'Add a custom field named "'.concat(Re.mediaCondition,'" to track media conditions.'),sleeveCondition:'Add a custom field named "'.concat(Re.sleeveCondition,'" to track sleeve conditions.'),source:'Add a custom field named "'.concat(Re.source,'" to track where you got records (Amazon, Discogs, store names, etc.).'),orderNumber:'Add a custom field named "'.concat(Re.orderNumber,'" to track which order or trip you got the record in or on. For many websites, this will show links to your oder page.'),notes:'Add a custom field named "'.concat(Re.notes,'" to add your own notes to each record.'),price:'Add a custom field named "'.concat(Re.price,'" to track how much you paid for each album.'),plays:'Add a custom field named "'.concat(Re.plays,'" to track your play counts, as well as when you listened to a album.'),tasks:'Add a custom field named "'.concat(Re.tasks,'" to keep a to-do checklist for each album.')};!function(e){e.acousticsounds="Acoustic Sounds",e.amazon="Amazon",e.blackbox="Black Box",e.discogs="Discogs",e.gift="Gift",e.recordman="Record Man",e.pfc="PFC",e.vinylpost="Vinyl Post"}(De||(De={}));var Ge=/^Patch: /;function Ue(e){return e.definition.name.match(Ge)}function ze(e){return e.values().filter(Ue)}var $e=[u.e.MINT,u.e.NEAR_MINT,u.e.VERY_GOOD_PLUS,u.e.VERY_GOOD,u.e.GOOD_PLUS,u.e.GOOD,u.e.FAIR,u.e.POOR],Ve=[u.f.MINT,u.f.NEAR_MINT,u.f.VERY_GOOD_PLUS,u.f.VERY_GOOD,u.f.GOOD_PLUS,u.f.GOOD,u.f.FAIR,u.f.POOR,u.f.GENERIC,u.f.NOT_GRADED,u.f.NO_COVER];function He(e){switch(e){case"Mint (M)":case"M":return"dark";case"Near Mint (NM or M-)":case"NM":return"success";case"Very Good Plus (VG+)":case"VG+":return"primary";case"Very Good (VG)":case"VG":return"info";case"Good Plus (G+)":case"G+":return"secondary";case"Good (G)":case"G":return"warning";case"Fair (F)":case"F":case"Poor (P)":case"P":return"danger";default:return"light"}}function qe(e){switch(e){case"Mint (M)":case"M":return 8;case"Near Mint (NM or M-)":case"NM":return 7;case"Very Good Plus (VG+)":case"VG+":return 6;case"Very Good (VG)":case"VG":return 5;case"Good Plus (G+)":case"G+":return 4;case"Good (G)":case"G":return 3;case"Fair (F)":case"F":return 2;case"Poor (P)":case"P":return 1;default:return 0}}function Ke(e){var t=e.name;return ht(t=(t=t.replace(" Records","")).replace(/\batco\b/i,"ATCO"))}var We={CD:{as:pe.format},'10"':{as:pe.format},'12"':{as:pe.format},"33 \u2153 RPM":{as:pe.format,name:"33\u2153"},"45 RPM":{as:pe.format,name:"45rpm",abbr:Object(N.jsx)(ge,{children:"45"})},"78 RPM":{as:pe.format,name:"78rpm",abbr:Object(N.jsx)(ge,{children:"78"})},"140g":{as:pe.format},"180g":{as:pe.format},"200g":{as:pe.format},Album:!1,"Club Edition":{as:pe.tag,abbr:"Club"},Compilation:{as:pe.tag,abbr:"Comp"},"Deluxe Edition":!1,EP:!1,Enhanced:!1,LP:!1,"Limited Edition":{as:pe.tag},Misprint:{as:pe.tag},Mono:!1,Numbered:{as:pe.tag},"Picture Disc":{as:pe.tag},Promo:{as:pe.tag},Quadraphonic:!1,Reissue:{as:pe.tag,abbr:"RI"},Remastered:{as:pe.tag},Repress:{as:pe.tag,abbr:"RE"},Single:{as:pe.format,abbr:Object(N.jsx)(ge,{children:"1"})},"Single Sided":{as:pe.tag},Stereo:!1,"White Label":{as:pe.tag}},Je={},Xe=Object(f.B)({formats:[],roles:[]});function Ye(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Object(f.F)((function(){Object(D.arraySetAddAll)(Xe,e,n,!0)}))}function Ze(e){var t=Object(ce.uniq)(e.flatMap((function(e){var t=e.descriptions,n=e.name,r=e.text;return Object(ce.flattenDeep)(Object(ce.compact)([t,n,null===r||void 0===r?void 0:r.split(", ").map(ht)]))})));return Ye.apply(void 0,["formats"].concat(Object(L.a)(t))),t}var Qe=Object(f.m)((function(){return Xe.formats.filter((function(e){return!(e in We)}))})),et=Object(f.m)((function(){return Xe.roles.filter((function(e){return!(e in Je)}))})),tt={Vinyl:"Play graded based on a complete play through. Ships in archival inner / PPL outer.",CD:"Verified no-error playthrough."},nt=["\u2116"].concat(Object(L.a)(Object.values(tt)));var rt=function(){return Object(N.jsxs)(se.a,{children:[Object(N.jsx)(se.a.Header,{children:"Discogs Links"}),Object(N.jsxs)(se.a.Body,{children:[Object(N.jsx)(Ne,{href:"https://support.discogs.com/hc/en-us/articles/360007331734",children:"Formatting Text"}),Object(N.jsx)(Ne,{href:"https://www.discogs.com/forum/thread/810326",children:"Common Etchings"})]}),Object(N.jsx)(se.a.Header,{children:"Tuning"}),Object(N.jsx)(se.a.Body,{children:Object(N.jsx)("dl",{children:Object(N.jsx)(w.a,{children:function(){return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("dt",{children:"Novel Roles"}),Object(N.jsx)("dd",{children:et.get().join(", ")}),Object(N.jsx)("dt",{children:"Novel Formats"}),Object(N.jsx)("dd",{children:Qe.get().join(", ")}),Object(N.jsx)("dt",{children:"Idioms"}),Object(N.jsx)("dd",{children:nt.map((function(e,t){return Object(N.jsx)("code",{className:"me-5",children:e},t)}))})]})}})})})]})};function at(e,t){var n,r,a=We[e];if(a){var i=null!==(n=null!==(r=t?a.abbr:a.name)&&void 0!==r?r:a.name)&&void 0!==n?n:e;return{tag:i,kind:a.as,title:i===a.abbr?e:void 0}}}function it(e){var t=e.list.definition.name,n=e.entry.comment;return{tag:t,kind:pe.list,extra:n}}var ct=Object(f.k)("noteById",(function(e,t){if(void 0===e)return{field_id:t,value:""};try{var n=e.find((function(e){return e.field_id===t}));return n||(n={field_id:t,value:""},e.push(n),n)}catch(r){return{field_id:t,value:"message"in r?r.message:r}}})),st=Object(f.k)("getNote",(function(e,t){var n;return null===(n=ct(e,t))||void 0===n?void 0:n.value}));function ot(){var e=Fe().playsId,t=Ar();return a.a.useCallback((function(n){var r,a=n.notes,i=n.rating,c=n.date_added;if(e){for(var o=ct(a,e),u=ke(null!==(r=o.value)&&void 0!==r?r:"0").split("\n"),l=Object(ie.a)(u),d=l[0],h=l.slice(1),p=0;p<h.length;++p){var v=h[p].split("."),b=Object(s.a)(v,3),j=b[0],m=b[1],g=b[2];m&&(h[p]=[j,Number(m)+1,g].join("-"))}var O=Number(d);if(O)return{playsNote:o,plays:O,history:h,dates:Object(f.m)(dt.bind(null,h))};if(Date.now()-new Date(c).getTime()<864e6)return{playsNote:o,plays:O,history:h,dates:Object(f.m)(dt.bind(null,h))};if(i)O=1;else t(a)&&(O=1);return{playsNote:o,plays:O,history:h,dates:Object(f.m)(dt.bind(null,h))}}}),[t,e])}function ut(){var e=a.a.useContext(ue.a),t=e.lpdb,n=e.folders;return a.a.useCallback((function(e){var r=e.id,a=e.basic_information,i=a.genres,c=a.styles,s=a.formats,o=e.folder_id,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=u.includeLocation;return Object(f.m)((function(){var e,a,u=null===n||void 0===n||null===(e=n.find((function(e){return e.id===o})))||void 0===e?void 0:e.name,d=u&&l&&je(u);return Object(ce.compact)([].concat(Object(L.a)(Ze(s).map((function(e){return at(e,!1)}))),Object(L.a)((null!==(a=null===t||void 0===t?void 0:t.listsForRelease(r))&&void 0!==a?a:[]).filter((function(e){return!Ue(e.list)})).map(it)),Object(L.a)(i.map((function(e){return{tag:e,kind:pe.genre}}))),Object(L.a)(c.map((function(e){return{tag:e,kind:pe.style}}))),[d&&{kind:d.type,tag:d.label}]))}))}),[t,n])}function lt(e){var t,n=a.a.useContext(ue.a);e=null!==(t=e)&&void 0!==t?t:n.fieldsByName;var r=a.a.useMemo((function(){var t,n;return null===(t=e)||void 0===t||null===(n=t.get(Re.tasks))||void 0===n?void 0:n.id}),[e]);return{tasks:a.a.useCallback((function(e){var t=e.notes;if(!r)return[];var n=st(t,r);return n?ke(n).split("\n").sort():[]}),[r]),tasksId:r}}function dt(e){var t=[];return e.forEach((function(e){var n=e.split("-").map(Number),r=Object(s.a)(n,3),a=r[0],i=r[1],c=r[2],o=new Date(a,i-1,c);t.push(o)})),t}function ft(){var e=a.a.useContext(ue.a).client,t=Fe().notesId;return a.a.useCallback((function(n){return Object(f.m)((function(){var r=n.notes,a=n.rating;if(!e||void 0===t)return a;var i=st(r,t);if(!i)return a;var c=Me(i).values.rating;return null!==c&&void 0!==c?c:a}))}),[e,t])}function ht(e){switch("string"!==typeof e&&(e="".concat(e)),e){case Re.mediaCondition:return"Media";case Re.sleeveCondition:return"Sleeve";case"Mint (M)":return"M";case"Near Mint (NM or M-)":return"NM";case"Very Good Plus (VG+)":return"VG+";case"Very Good (VG)":return"VG";case"Good Plus (G+)":return"G+";case"Good (G)":return"G";case"Fair (F)":return"F";case"Poor (P)":return"P";case"Generic":case"No Cover":return"\u2014";case"For Sale":return"Listed";case"Shipped":return"Sold";case"Invoice Sent":return"Invoiced";case"Payment Received":return"Paid";case void 0:return"";default:return e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/(\d+)\s*gr?a?m?$/i,"$1g")).replace(/ \(\d+\)$/,"")).replace(/(in|s)'(\s|$)/,"$1\u2019$2")).replace(/'s(\s|$)/,"\u2019s$1")).replace(/n't(\s|$)/,"n\u2019t$1")).replace(/ 'n(\s|$)/i," \u2019n$1")).replace(/ Of /," of ")).replace(/ The /," the ")).replace(/ A /," a ")).replace(/ An /," an ")}}function pt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{data:"$..[?(".concat(t.map((function(e){var t=e.instance_id;return"@.instance_id === ".concat(t)})).join("||"),")]")}}function vt(){var e=a.a.useContext(ue.a).cache;return a.a.useMemo((function(){return function(t){return null===e||void 0===e?void 0:e.clear(pt(t))}}),[e])}var bt=n(243),jt=n(64),mt=n.n(jt);n(603);function gt(e){var t=e.children,n=e.uri;return Object(N.jsx)(Ne,{className:"discogs\u2013linkback",href:n,children:null!==t&&void 0!==t?t:"Data provided by Discogs."})}var Ot=n(59),yt=n.n(Ot),xt=n(423),kt=n.n(xt),St=Object(R.a)(/\b(Album|Extra|Track)|((((((Acoustic|Electric|Bass) )?Guitar)|Bass\b|Celesta|Cello|Autoharp|Banjo|Dobro|Harp|Mandolin|Sarangi|Sitar|Viol(|a|in)\b)|(Bongo|Conga|Cymbal|Drum|Percussion|Glock|Tabla\b|Tambourine|Timbales|Vibes|Vibraphone|Xylo)|(Keys\b|Keyboard|Harmonium|Mellotron|Piano|Organ|Synth)|(Horn|Flugelhorn|Trumpet|Trombone|Tuba)|(Clarinet|Flute|Kazoo|Harmonica|Oboe|Sax(|ophone)\b|Woodwind)|(Choir$|Chorus$|Orchestra))|Scratches|Vocal|Voice)/,{lead:1,_instrument:3,strings:4,guitar:5,percussion:9,keys:10,brass:11,wind:12,group:14}),wt=Object(R.a)(/\b(Arrange|Conduct|Master\b|(Compos|Lyric|Music|Writ|Words))/,{originator:2}),Ct=/\b(Lacquer|Produce|Recorded|Mastered|Remaster)/,Et=["Directed By","Mixed By","Painting"];function _t(e){var t,n=St.exec(e),r=wt.test(e),a=Ct.test(e),i=Et.includes(e),c=e;return(null===n||void 0===n?void 0:n.groups)&&(t=Object.entries(n.groups).filter((function(e){var t=Object(s.a)(e,2),n=t[0],r=t[1];return"_"!==n[0]&&r})).map((function(e){return Object(s.a)(e,1)[0]})))&&(c="".concat(e," (").concat(t.join(", "),")")),n||r||a||i||Ye("roles",e),{musicalArtist:n,createArtist:r,techArtist:a,conciseRole:c,tags:t}}function Nt(e){var t=_t(e),n=t.musicalArtist,r=t.createArtist,a=t.techArtist,i=t.conciseRole,c=t.tags;return n?{category:"musician",conciseRole:i,tags:c}:r?{category:"creative",conciseRole:i}:a?{category:"technical",conciseRole:i}:{category:"other",conciseRole:i}}var It=function(e){var t=e.item,n=a.a.useContext(ue.a).lpdb,r=null===n||void 0===n?void 0:n.details(t),i=a.a.useMemo((function(){return Object(f.m)((function(){return"ready"!==(null===r||void 0===r?void 0:r.status)?[]:Rt(r.value)}))}),[r]),c=m.f();return Object(N.jsx)(w.a,{children:function(){return Object(N.jsx)(N.Fragment,{children:i.get().map((function(e,t){var n=e.id,r=e.name,a=_t(e.role),i=a.musicalArtist,s=a.createArtist,o=a.techArtist,u=a.conciseRole,l=!u||i?"primary":s?"secondary":o?"warning":"light",d=i?pe.genre:s?pe.style:o?pe.tag:pe.box;return Object(N.jsx)(ve,{bg:l,kind:d,tag:r,extra:u,onClick:function(){return c.push("/artists/".concat(n,"/").concat(r))}},t)}))})}})};function Rt(e){var t,n,r,a=[{fallbackRole:"Album",artistData:e.artists},{fallbackRole:"Extra",artistData:null!==(t=e.extraartists)&&void 0!==t?t:[]},{fallbackRole:"Track",artistData:null!==(n=yt()(null===(r=e.tracklist)||void 0===r?void 0:r.flatMap((function(e){var t=e.artists;return null!==t&&void 0!==t?t:[]}))))&&void 0!==n?n:[]}],i=[];return a.forEach((function(e){var t=e.fallbackRole;return e.artistData.forEach((function(e){var n=e.name,r=e.id,a=e.role;a=a||t,n=ht(n),(a=a.replaceAll(/(\s*\[[^\]]*\])/g,"")).split(/,\s*/).forEach((function(e){e=e.replace("-By"," By"),i.push({name:n,id:r,role:e})}))}))})),Q()(i,JSON.stringify.bind(JSON))}n(607);function Tt(e){var t=e.children,n=e.className;return n=U(n,"icon-spinner"),Object(N.jsxs)("span",{className:n,children:[Object(N.jsx)(re.s,{className:"prepend-inline-icon"}),t]})}function At(e){var t,n,r,a,i=e.variant,c=e.size,s=U(e.className),o=!1;if("refresh"in e){var u=e.promise,l=e.disabled,d=e.refresh;n=void 0!==l?l:void 0!==u,t=d}else{var f,h=e.remote;t="pending"===(null===h||void 0===h?void 0:h.status)||null===h||void 0===h?void 0:h.refresh,i=null!==(f=i)&&void 0!==f?f:"error"===(null===h||void 0===h?void 0:h.status)?"warning":void 0,n=void 0===t,r=h&&"error"in h?JSON.stringify(h.error):void 0,o="pending"===(null===h||void 0===h?void 0:h.status)}return t?e.bare?o?Object(N.jsx)(Tt,{}):Object(N.jsx)(re.y,{className:"prepend-inline-icon",onClick:function(){var e;null===(e=t)||void 0===e||e()},title:r}):Object(N.jsxs)(E.a,{as:e.as,className:s,size:c,variant:null!==(a=i)&&void 0!==a?a:"secondary",disabled:n||o,onClick:function(){var e;null===(e=t)||void 0===e||e()},title:r,children:[o?Object(N.jsx)(Tt,{}):Object(N.jsx)(re.y,{className:"prepend-inline-icon"}),"Refresh"]}):o?Object(N.jsx)(Tt,{className:s,children:e.children}):Object(N.jsx)(N.Fragment,{children:"error"})}function Pt(e){var t=e.label,n=t.name,r=t.id,i=e.showName,c=e.hq,s=a.a.useContext(ue.a).lpdb,o=a.a.useMemo((function(){return null===s||void 0===s?void 0:s.label(r)}),[r,s]);return Object(N.jsx)(w.a,{render:function(){var e="ready"===(null===o||void 0===o?void 0:o.status)?o.value:{};return Object(N.jsx)(Mt,Object(F.a)(Object(F.a)({remote:o,name:n},e),{},{showName:i,hq:c}))}})}function Mt(e){var t,n=e.remote,r=e.id,i=e.name,c=e.images,o=e.showName,u=e.hq,l=null===(t=c=c&&x()(c,(function(e){var t=e.height,n=e.width,r=e.type,a=20*Math.abs(n/t-1);if("primary"===r&&a<10)return 0;return Math.floor(a)})))||void 0===t?void 0:t.shift(),d=a.a.createRef(),f=a.a.useState(!1),h=Object(s.a)(f,2),p=h[0],v=h[1];if(a.a.useLayoutEffect((function(){d.current&&(d.current.complete?v(0===d.current.naturalWidth):d.current.addEventListener("error",(function(e){var t=e.target;v(0===t.naturalWidth)})))}),[d]),l&&!p){var b=l.uri,m=l.uri150;return Object(N.jsxs)(j.c,{to:"/labels/".concat(r,"/").concat(i),className:"quiet music-label",children:[Object(N.jsx)("img",{ref:d,className:"music-label-logo-inline",src:u?b:m,alt:"logo",title:i}),!0===o&&Object(N.jsx)("span",{className:"name",children:i})]})}return null===o||void 0===o||o?Object(N.jsxs)(N.Fragment,{children:[p&&Object(N.jsx)(At,{bare:!0,remote:n}),Object(N.jsx)(j.c,{to:"/labels/".concat(r,"/").concat(i),className:"quiet music-label",children:i})]}):null}var Lt=n(214);n(619);function Ft(e){var t=e;return"iconAsContent"in e||(console.log("Binding ".concat(e.name," as content")),t.iconAsContent=e.bind(null,{})),t.iconAsContent}function Dt(e){var t,n,r=e.title,i=e.icons,c=e.children,o=e.content,u=e.disclosed,l=e.setDisclosed,d=a.a.useState(!1),f=Object(s.a)(d,2),h=f[0],p=f[1];void 0===u&&(u=h,l=p);var v,b=a.a.useCallback((function(){var e;return null===(e=l)||void 0===e?void 0:e(!u)}),[u,l]),j=fe(u?null!==(t=null===i||void 0===i?void 0:i.open)&&void 0!==t?t:Ft(re.f):null!==(n=null===i||void 0===i?void 0:i.closed)&&void 0!==n?n:Ft(re.h));return v="string"!==typeof r?Object(N.jsx)("div",{className:"disclosure",onClick:b,children:fe(r(j))}):Object(N.jsxs)("div",{className:"disclosure",onClick:b,children:[Object(N.jsxs)("div",{children:[r,j]}),Object(N.jsx)("div",{children:fe(v)})]}),u?o?Object(N.jsxs)(N.Fragment,{children:[v,fe(o)]}):Object(N.jsxs)(N.Fragment,{children:[v,c]}):Object(N.jsx)(N.Fragment,{children:v})}var Bt={cacheTime:5e3};function Gt(e){return"eventKey"in e?e.eventKey:e.title}var Ut=n(237),zt=n(110),$t=n(215),Vt=n.n($t);function Ht(e){var t=e.className,n=e.defaultTab,r=e.tabs,i=a.a.useState(n),c=Object(s.a)(i,2),o=c[0],u=c[1],l=function(e,t,n,r){var i,c,s,o=null!==r&&void 0!==r?r:Bt,u=o.defaultValue,l=o.verbose,d=o.cacheTime,f=a.a.useMemo((function(){return new Map}),[]),h=a.a.useRef(u),p=e[0];t=null!==(i=null!==(c=null!==(s=t)&&void 0!==s?s:h.current)&&void 0!==c?c:u)&&void 0!==i?i:p&&Gt(p);var v=a.a.useMemo((function(){return e.map((function(e){var t;return"eventKey"in e?(t="function"===typeof e.title?fe(e.title(n.bind(null,e.eventKey))):e.title,{eventKey:e.eventKey,title:t,disabled:e.disabled}):{eventKey:e.title,title:e.title,disabled:e.disabled}}))}),[e,n]),b=a.a.useMemo((function(){return e.find((function(e){return Gt(e)===t}))}),[e,t]),j=a.a.useCallback((function(){if(void 0===b)return!1;var e=Gt(b);if(f.has(e))return f.get(e);var t=fe(null===b||void 0===b?void 0:b.content);return f.set(e,t),t}),[f,b]);return void 0===t||void 0===b?[v,void 0,function(){return!1}]:(t!==h.current&&(h.current&&setTimeout((function(e){h.current!==e?(l&&console.log("lazy cache: clearing ".concat(e)),f.delete(e)):l&&console.log("lazy cache: not clearing ".concat(e," b/c it is active"))}),d,h.current),h.current=t),[v,Gt(b),j])}(r,o,u),d=Object(s.a)(l,3),f=d[0],h=d[1],p=d[2],v=a.a.useMemo(Vt.a,[]);return Object(N.jsx)(Ut.a,{id:v,className:U(t),activeKey:h,onSelect:function(e){return u(null!==e&&void 0!==e?e:void 0)},children:f.map((function(e){return Object(N.jsx)(zt.a,Object(F.a)(Object(F.a)({},e),{},{children:e.eventKey===h&&p()}),e.eventKey)}))})}n(622);var qt=Object(N.jsx)(re.s,{className:"spin"});function Kt(e){var t=e.remote,n=e.placeholder,r=e.children,a=n;return t?Object(N.jsx)(w.a,{children:function(){var e=Object(s.a)(t,2),i=e[0],c=e[1];if("ready"===i.status){var o=i.value[c];return Object(N.jsx)(N.Fragment,{children:fe(o)})}return r?Object(N.jsxs)(N.Fragment,{children:[r,fe(a),qt]}):n?Object(N.jsxs)(N.Fragment,{children:[fe(a),qt]}):qt}}):r?Object(N.jsxs)(N.Fragment,{children:[r,fe(a),qt]}):n?Object(N.jsxs)(N.Fragment,{children:[fe(a),qt]}):qt}function Wt(e,t){var n=a.a.useMemo((function(){return Object(f.B)([])}),[]);return a.a.useMemo((function(){return Object(f.l)((function(){e().forEach(Object(f.k)((function(e){var r=!!t(e);!!n.includes(e)!==r&&Object(D.arraySetToggle)(n,e)})))}))}),[e,t,n]),n}var Jt=Object(C.a)((function(){var e=m.g(),t=e.labelId,n=e.labelName,r=Number(t);if(!isFinite(r))return null;var i=a.a.useContext(ue.a),c=i.lpdb,o=i.collection;if(!c)return null;var u=a.a.useMemo((function(){return null===c||void 0===c?void 0:c.label(r)}),[r,c]),l=Wt(o.values,(function(e){return!!e.basic_information.labels.find((function(e){var t=e.id;return r===t}))})),d=function(e,t){return a.a.useMemo((function(){return console.log("Buiding new graph generator"),A.a.mark((function n(){var r,a,i,c;return A.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=[],a=[],i=[],Object(f.l)((function(){e.forEach((function(e){var n=t.details(e);r.includes(n)||"ready"===n.status&&a.includes(n.value)&&i.includes(n.value)||(r.push(n),Object(f.D)((function(){return"ready"===n.status&&n.value}),(function(e){e&&(r.splice(r.indexOf(n),1),a.includes(e)||i.includes(e)||a.push(e))})))}))})),c=A.a.mark((function e(){var t,n,c,o;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.pop(),n={nodes:[],edges:[]},t&&(i.push(t),c="r".concat(t.id),n.nodes.push({data:{id:c,label:ht(t.title),category:"album"}}),o=Rt(t),Object.entries(kt()(o,"id")).forEach((function(e){var t,r=Object(s.a)(e,2),a=r[0];r[1].forEach((function(e){void 0===t&&(t="a".concat(a),n.nodes.push({data:{group:"nodes",id:t,label:e.name,category:"artist"}}));var r=Nt(e.role),i=r.category,s=r.conciseRole;n.edges.push({data:{target:c,source:t,label:s,category:i}})}))}))),e.next=5,n;case 5:if(!e.sent){e.next=9;break}return console.log("Exiting graph generator."),e.abrupt("return","break");case 9:console.log("".concat(r.length," pending + ").concat(a.length," ready + ").concat(i.length," done"));case 10:case"end":return e.stop()}}),e)}));case 5:return n.delegateYield(c(),"t0",7);case 7:if("break"!==n.t0){n.next=10;break}return n.abrupt("break",12);case 10:n.next=5;break;case 12:case"end":return n.stop()}}),n)}))}),[e,t])}(l,c);return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("div",{className:"mb-3",children:Object(N.jsx)(Dt,{title:function(e){return Object(N.jsx)("h2",{children:Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(Pt,{label:{id:r,name:null!==n&&void 0!==n?n:"\u2026"},showName:!1}),Object(N.jsx)("span",{className:"me-2"}),Object(N.jsx)(Ne,{href:"ready"===u.status?u.value.uri:void 0,children:Object(N.jsx)(Kt,{remote:[u,"name"]})}),e]})})},content:function(){return Object(N.jsxs)(N.Fragment,{children:["ready"===u.status&&u.value.profile?Object(N.jsx)(N.Fragment,{children:Object(N.jsx)(en,Object(F.a)({src:u.value.profile},u.value))}):Object(N.jsx)("i",{children:"No information available."}),Object(N.jsx)(At,{remote:u})]})}})}),Object(N.jsx)(Ht,{tabs:[{title:"Albums",content:function(){return Object(N.jsx)(w.a,{children:function(){return Object(N.jsx)(Tr,{collectionSubset:l,storageKey:"label"})}})}},{title:"Graph",content:function(){return Object(N.jsx)(Lt.a,{generator:d})}}]})]})})),Xt=Object(C.a)((function(){var e=m.h(),t=a.a.useContext(ue.a).collection,n=yt()(t.values().map((function(e){return e.basic_information.labels}))),r=x()(Q()(n,"id"),"name");return Object(N.jsx)(N.Fragment,{children:r.map((function(t){var n=t.name,r=t.id;return Object(N.jsx)("div",{children:Object(N.jsx)(j.b,{to:"".concat(e.path,"/").concat(r,"/").concat(n),children:n})},r)}))})}));function Yt(e,t,n,r,a){var i=fe(e);return t>0&&(i=Object(N.jsx)("b",{children:i})),n>0&&(i=Object(N.jsx)("i",{children:i})),r>0&&(i=Object(N.jsx)("u",{children:i})),a.length&&(i=Object(N.jsx)(Ne,{href:a[a.length-1],children:i})),i}function Zt(){var e=m.h().path;return Object(N.jsx)("div",{children:Object(N.jsxs)(m.c,{children:[Object(N.jsx)(m.a,{path:Qt(e),children:Object(N.jsx)(Jt,{})}),Object(N.jsx)(m.a,{path:e,children:Object(N.jsx)(Xt,{})})]})})}function Qt(e){return["".concat(e,"/:labelId"),"".concat(e,"/:labelId/:labelName")]}function en(e){var t=e.className,n=e.onClick,r=(e.prewrap,e.src),i=e.uri,c=a.a.useContext(ue.a).lpdb,o=[],u=!1,l=0,d=0,f=0,h=[],p=a.a.useMemo((function(){try{return new RegExp("(?<=[.!:\\]?])\\s*[\\r\\n]\\n")}catch(e){return}}),[]);return c&&p?(r.split(/-{4,}/).forEach((function(e){o.length&&o.push(Object(N.jsx)("hr",{},o.length)),e.split(p).forEach((function(e){var t=Array.from(e.matchAll(Object(R.a)(/(\x2D )?((?:(?!\[)[\s\S])*)(?:\[((?:(?!\])[\s\S])+)\])?/g,{li:1,pre:2,tag:3}))).map((function(e){return e.groups}));if(0!==t.length){var n,r=[],i=Object(M.a)(t);try{var p=function(){var e,t=[];(v=n.value).li&&(u=!0);var i=v.pre;if(i){var o=i.split(/[\r\n]\n?/);for(t.push(Object(N.jsx)("span",{children:Yt(o.shift(),l,d,f,h)},t.length));o.length;)t.push(Object(N.jsx)("br",{},t.length)),t.push(Object(N.jsx)("span",{children:Yt(o.shift(),l,d,f,h)},t.length))}var p=v.tag,b=null!==(e=null===p||void 0===p?void 0:p.match(/^([/a-z]+)=?(.+)?$/))&&void 0!==e?e:[void 0,void 0],m=Object(s.a)(b,3),g=m[1],O=m[2],y=isFinite(Number(O))&&Number(O);if("l"===g){var x,k=y?c.label(Number(O)):null!==(x=c.labels.values().find((function(e){return"ready"===e.status&&e.value.name===O})))&&void 0!==x?x:{status:"error"};"error"!==k.status?t.push(Object(N.jsx)(j.c,{exact:!0,to:"/labels/".concat(O),children:Object(N.jsx)(Kt,{remote:[k,"name"],placeholder:ht(O)})},t.length)):O?t.push(Object(N.jsx)(Ne,{href:"https://www.discogs.com/label/".concat(encodeURIComponent(O)),children:ht(O)},t.length)):t.push(Object(N.jsxs)("span",{className:"text-warning",children:[g,"=undefined"]},t.length))}else if("a"===g){var S,w=y?c.artistStore.get(y):c.artistStore.all.find((function(e){return e.name===O}));if(w)t.push(Object(N.jsx)(j.c,{exact:!0,to:"/artists/".concat(O),children:null!==(S=w.name)&&void 0!==S?S:Object(N.jsx)(Kt,{placeholder:ht(O)})},t.length));else O?t.push(Object(N.jsx)(Ne,{href:"https://www.discogs.com/artist/".concat(encodeURIComponent(O)),children:ht(O)},t.length)):t.push(Object(N.jsxs)("span",{className:"text-warning",children:[g,"=undefined"]},t.length))}else if("r"===g){var C=y&&c.collection.values().find((function(e){return e.id===y}));if(C)t.push(Object(N.jsx)(j.c,{exact:!0,to:"#".concat(C.instance_id),children:C.basic_information.title},t.length));else{var E=y&&c.details({id:y});E?t.push(Object(N.jsx)(Ne,{href:"ready"===E.status?E.value.uri:void 0,children:Object(N.jsx)(Kt,{remote:[E,"title"],placeholder:ht(O)})},t.length)):t.push(Object(N.jsx)("span",{className:"text-warning",children:ht(O)},t.length))}}else if("m"===g){var _=y&&c.collection.values().find((function(e){return e.basic_information.master_id===y}));if(_)t.push(Object(N.jsx)(j.c,{exact:!0,to:"#".concat(_.instance_id),children:_.basic_information.title},t.length));else{var I=y&&c.master(y);I&&"ready"===I.status&&"no-master-release"===I.value?t.push(Object(N.jsx)("span",{className:"text-warning",children:ht(O)},t.length)):I&&"ready"===I.status&&"no-master-release"!==I.value?t.push(Object(N.jsx)(Ne,{href:I.value.uri},t.length)):I&&"ready"!==I.status?t.push(Object(N.jsx)(Ne,{href:void 0,children:Object(N.jsx)(Kt,{placeholder:ht(O)})},t.length)):t.push(Object(N.jsx)("span",{className:"text-warning",children:ht(O)},t.length))}}else"b"===g?l+=1:"/b"===g?l-=1:"u"===g?f+=1:"/u"===g?f-=1:"i"===g?d+=1:"/i"===g?d-=1:"url"===g?h.push(O):"/url"===g?h.pop():p&&t.push(Object(N.jsxs)("span",{title:JSON.stringify({fullTag:p,tag:g,tagId:O},null,2),children:["[",p,"]"]},t.length));r.push(Object(N.jsx)(a.a.Fragment,{children:t},r.length))};for(i.s();!(n=i.n()).done;){var v;p()}}catch(m){i.e(m)}finally{i.f()}var b=Yt(r,l,d,f,h);u?(u=!1,o.push(Object(N.jsx)("li",{children:b},o.length))):o.push(Object(N.jsx)("p",{children:b},o.length))}else o.push(Object(N.jsx)("span",{children:Yt(e,l,d,f,h)},o.length))}))})),Object(N.jsxs)(N.Fragment,{children:[Object(N.jsxs)("div",{className:U(t,"disco-tagged"),onClick:n,children:[o,"\xa0"]}),i&&Object(N.jsx)(gt,{uri:i})]})):Object(N.jsx)(N.Fragment,{children:r})}var tn=n(425),nn=n(36),rn=n(39);n(623);function an(e){var t,n=e.value,r=e.min,a=e.max,i=e.step,c=e.title,s=e.onChange,o=e.onClick;return i=null!==(t=i)&&void 0!==t?t:1,Object(N.jsxs)(rn.a,{className:"spinner",children:[Object(N.jsx)(E.a,{size:"sm",variant:"outline-secondary",disabled:void 0!==r&&n<=r,onClick:s.bind(null,n-i),children:Object(N.jsx)(re.t,{})}),Object(N.jsx)("div",{className:"count",title:c,onClick:o,children:Object(N.jsx)(rn.a.Text,{children:n})}),Object(N.jsx)(E.a,{size:"sm",variant:"outline-secondary",disabled:void 0!==a&&n>=a,onClick:s.bind(null,n+i),children:Object(N.jsx)(re.x,{})})]})}n(624);var cn=/ - |: | \(|\)/g,sn=" \u22c4 ",on=/ Record(ings?)?s?/g;function un(e){var t=e.item,n=t.basic_information.artists.map((function(e){return ht(e.name)})).join(sn),r=yt()(t.basic_information.artists.map((function(e){var t=e.name;return[Object(N.jsx)(N.Fragment,{children:t}),Object(N.jsx)("br",{})]})));r.pop();var i=t.basic_information.title,c=yt()(i.split(cn).map((function(e){return[Object(N.jsx)(N.Fragment,{children:e}),Object(N.jsx)("br",{})]})));c.pop();var u=[];t.basic_information.labels.forEach((function(e){u.find((function(t){var n=t.name,r=t.catno;return n===e.name||r===e.catno||r.replace(/\W/g,"")===e.catno.replace(/\W/g,"")}))||u.push(e)}));var l=a.a.useRef(null),d=Object(tn.useReactToPrint)({content:function(){return l.current}}),f=Object(o.default)("session",["Elephant","insert","preview"],!1),h=Object(s.a)(f,2),v=h[0],j=h[1],m=Object(o.default)("session",["Elephant","insert","greyscale"],!0),g=Object(s.a)(m,2),y=g[0],x=g[1],k=Object(o.default)("session",["Elephant","insert","logos"],!0),S=Object(s.a)(k,2),w=S[0],C=S[1],_=Object(o.default)("session",["Elephant","insert","cover"],!1),I=Object(s.a)(_,2),R=I[0],T=I[1],A=Object(o.default)("session",["Elephant","insert","singleLabel"],!1),P=Object(s.a)(A,2),M=P[0],L=P[1],D=Object(o.default)("session",["Elephant","insert","trimTitle"],!1),B=Object(s.a)(D,2),G=B[0],z=B[1],$=Object(o.default)("session",["Elephant","insert","fontSize"],14),V=Object(s.a)($,2),H=V[0],q=V[1];return Object(N.jsxs)(b.a,{children:[Object(N.jsxs)(p.a,{xs:1,children:[Object(N.jsx)(nn.a,{label:"Greyscale",value:y,setValue:x}),Object(N.jsx)(nn.a,{label:"Cover",value:R,setValue:T}),Object(N.jsx)(nn.a,{label:"Logos",value:w,setValue:C}),Object(N.jsx)(nn.a,{label:"Trim Title",value:G,setValue:z}),Object(N.jsx)(nn.a,{label:"Single Label",value:M,setValue:L}),Object(N.jsx)(an,{value:H,onChange:q})]}),Object(N.jsxs)(p.a,{xs:1,children:[Object(N.jsx)(nn.a,{label:"Preview",value:v,setValue:j}),Object(N.jsx)(E.a,{onClick:d,children:"Print"})]}),Object(N.jsx)(p.a,{children:Object(N.jsx)("div",{style:v?{mixBlendMode:y?"luminosity":void 0}:{display:"none"},children:Object(N.jsx)(K,{})})})]});function K(e){var s,o=null===(s=t.basic_information.artists[0])||void 0===s?void 0:s.name;return Object(N.jsxs)("div",Object(F.a)(Object(F.a)({ref:l,className:U("insert",R?void 0:"favor-back")},e),{},{children:[Object(N.jsx)("div",{className:"front",children:Object(N.jsxs)("div",{className:"title-card",children:[o!==i&&Object(N.jsx)("div",{className:"artist",children:r}),Object(N.jsx)("div",{className:"title",children:c}),R&&Object(N.jsx)("img",{className:"front-cover",src:t.basic_information.cover_image,alt:""})]})}),Object(N.jsxs)("div",{className:"spine",style:{fontSize:H},children:[Object(N.jsx)("div",{className:"cat-no",children:u.map((function(e){return e.catno})).join(sn)}),Object(N.jsx)("div",{className:"space"}),n!==i&&Object(N.jsx)("div",{className:"artist",children:n}),Object(N.jsx)("div",{className:"title",children:G?i.split(cn).shift():O()(i.split(cn)).join(sn)}),Object(N.jsx)("div",{className:"space"}),Object(N.jsx)("div",{className:"label",children:u.map((function(e,t){return Object(N.jsxs)(a.a.Fragment,{children:[Object(N.jsx)("div",{className:"name",children:e.name.replace(on,"")}),w&&Object(N.jsxs)(N.Fragment,{children:[" ",Object(N.jsx)(Pt,{label:e,showName:!1})]})]},t)}))})]})]}))}}function ln(e){var t;if(e){var n=null===(t=/B(\d)+/.exec(e))||void 0===t?void 0:t.shift();return n?[n,Number(n.split("B")[1])]:void 0}}var dn=n(49);function fn(){var e=a.a.useState(),t=Object(s.a)(e,2),n=t[0],r=t[1],i=a.a.useState(),c=Object(s.a)(i,2),o=c[0],u=c[1],l=a.a.useMemo((function(){return u.bind(null,void 0)}),[]);return a.a.useEffect((function(){var e=r.bind(null,(function(e){return e===n?void 0:e}));null===n||void 0===n||n.then(l,u.bind(null)).then(e)}),[l,n,r]),[n,r,o,l]}var hn=n(426),pn=n.n(hn),vn=n(226),bn=n.n(vn);function jn(){var e=a.a.useContext(ue.a).cache,t=a.a.useState({total:0}),n=Object(s.a)(t,2),r=n[0],i=n[1],c=a.a.useMemo((function(){return function(){var t,n=null===e||void 0===e||null===(t=e.rpm)||void 0===t?void 0:t[0],a=null===e||void 0===e?void 0:e.dbInflight.length,c=null===e||void 0===e?void 0:e.waiting.length,s={rpm:n,db:a,waiting:c,errorPause:null===e||void 0===e?void 0:e.errorPause,total:bn()(O()([a,c]))};pn()(r,s)||i(s)}}),[e,r]);return a.a.useEffect((function(){var e=setInterval(c,500);return clearInterval.bind(null,e)}),[c]),r}function mn(){var e=a.a.useContext(ue.a).folders;return a.a.useMemo((function(){if(!e)return{};var t,n,r,a,i,c,s,o,u=[],l=[],d=[],f=[],h=[],p=Object(M.a)(e);try{for(p.s();!(o=p.n()).done;){var v=o.value;switch(v.name){case"Uncategorized":t=v;break;case"All":n=v;break;case"Sold":r=v;break;case"Offline":a=v;break;case"Service Bay":i=v;break;default:var b=v.name.match("Remain"),j=v.name.match("Leave"),m=v.name.match("Listed"),g=v.name.match("Shelf");if((b||g)&&d.push(v),j&&u.push(v),m&&l.push(v),g&&f.push(v),"-"===v.name[0]){if(b){s=v;break}if(m){c=v;break}}if(b||j||m||g)break;h.push(v)}}}catch(O){p.e(O)}finally{p.f()}return{uncategorized:t,all:n,sold:r,offline:a,leave:u,listed:l,shelf:f,remain:d,openListed:c,openRemain:s,service:i,unknown:h}}),[e])}function gn(){var e=a.a.useContext(ue.a).cache;return a.a.useMemo((function(){return function(){return null===e||void 0===e?void 0:e.clear(le.d,!0)}}),[e])}var On=new dn.a;function yn(e){var t,n,r,i,c=e.item,o=a.a.useContext(ue.a),l=o.client,d=o.lpdb,v=gn(),j=Ar(),m=Pr(),g=function(){var e=Fe().notesId;return a.a.useCallback((function(t){return e?st(t,e):void 0}),[e])}(),O=fn(),y=Object(s.a)(O,3),x=y[0],k=y[1],S=y[2],w=a.a.useState(),C=Object(s.a)(w,2),_=C[0],I=C[1],R=a.a.useMemo((function(){return function(){return k(null===l||void 0===l?void 0:l.getPriceSuggestions(c.id).then(I))}}),[l,c.id,k]),T=a.a.useState([]),A=Object(s.a)(T,2),P=A[0],M=A[1];a.a.useMemo((function(){return d&&Object(f.D)((function(){return d.inventory.values().filter((function(e){return e.release.id===c.id}))}),M,{fireImmediately:!0})}),[c.id,d]);var F=mn().openListed,D=me();if(!d)return null;var B=j(c.notes),G=m(c.notes);if(!B||!G)return Object(N.jsx)("i",{children:"Can't create listing without conditions set."});var U={condition:B,sleeveCondition:G,price:null!==(t=null===_||void 0===_||null===(n=_[B])||void 0===n?void 0:n.value)&&void 0!==t?t:1,releaseId:c.id,status:u.d.DRAFT,location:null===(r=ln(D(c.folder_id)))||void 0===r?void 0:r[0],comments:Object(ce.compact)([g(c.notes)].concat(Object(L.a)(c.basic_information.formats.map((function(e){return tt[e.name]}))))).join(" ")},z=null===F||void 0===F?void 0:F.id,$=0===P.length&&Object(N.jsx)(b.a,{children:Object(N.jsxs)(p.a,{children:[Object(N.jsx)("pre",{children:JSON.stringify(U,null,2)}),z&&Object(N.jsxs)(E.a,{className:"me-2",disabled:void 0!==x||c.folder_id===z,onClick:function(){return k(null===l||void 0===l?void 0:l.moveReleaseInstanceToFolder(c.folder_id,c.id,c.instance_id,z).then(Object(f.k)((function(){return c.folder_id=z}))))},children:["Move to ",null===(i=ln(null===F||void 0===F?void 0:F.name))||void 0===i?void 0:i[0]," (",null===F||void 0===F?void 0:F.count,")"]}),Object(N.jsx)(E.a,{className:"me-2",disabled:void 0!==x,onClick:function(){return k(null===l||void 0===l?void 0:l.createListing(U).then(v))},children:"List for Sale"}),!_&&Object(N.jsx)(E.a,{className:"me-2",disabled:void 0!==x,onClick:R,children:"Get Price Suggestions"})]})}),V=0!==P.length&&Object(N.jsx)(b.a,{children:Object(N.jsx)(p.a,{children:P.map((function(e){return Object(N.jsx)(xn,{collectionItem:c,inventoryItem:e,suggestions:_,getSuggestions:R},e.id)}))})});return Object(N.jsx)(N.Fragment,{children:Object(N.jsxs)(b.a,{children:[Object(N.jsx)(p.a,{children:S&&Object(N.jsx)(h.a,{variant:"warning",children:JSON.stringify(S)})}),$,V]})})}function xn(e){var t=e.collectionItem,n=e.inventoryItem,r=e.suggestions,i=e.getSuggestions,c=a.a.useContext(ue.a),o=c.client,l=c.folders,d=c.lpdb,p=Fe().notesId,v=jn().total>0,b=gn(),j=vt(),m=me(),g=fn(),O=Object(s.a)(g,3),y=O[0],x=O[1],k=O[2],S=a.a.useState(0),C=Object(s.a)(S,2),_=C[0],I=C[1],R=a.a.useMemo((function(){return Object(f.B)(Object(ce.cloneDeep)(n))||_}),[n,_]),T=a.a.useCallback((function(){return I(_+1)}),[_]),M=a.a.useMemo((function(){return Object(f.m)((function(){return JSON.stringify(R)===JSON.stringify(n)}))}),[R,n]),F=a.a.useMemo((function(){return Object(f.k)((function(e){var t=m(e);R.location=t}))}),[m,R]);if(!d)return null;var B=d.releases.get(t.id),G="ready"===(null===B||void 0===B?void 0:B.status)&&B.value.community.rating,U=On.getOrCreate(n.release.title,(function(){return{}}));return Object(f.F)((function(){var e;(Object(D.arraySetAdd)(U,"prices",null!==(e=R.price.value)&&void 0!==e?e:0)||Object(D.arraySetAdd)(U,"comments",R.comments))&&console.log(Object(f.H)(U))})),Object(N.jsxs)(N.Fragment,{children:[k&&Object(N.jsx)(h.a,{variant:"warning",children:JSON.stringify(k)}),Object(N.jsx)(w.a,{children:function(){var e,c,s,d,h,g=je(m(t.folder_id)).label;return Object(N.jsxs)(ne.a,{children:[Object(N.jsxs)(ne.a.Group,{children:[Object(N.jsx)(ne.a.Label,{children:"Condition"}),Object(N.jsxs)("div",{className:"condition-row justify-content-start",children:[Object(N.jsx)("div",{className:"grade grade-media",children:Object(N.jsx)(kn,{item:R,kind:"media"})}),Object(N.jsx)("div",{className:"grade grade-sleeve",children:Object(N.jsx)(kn,{item:R,kind:"sleeve"})})]})]}),Object(N.jsxs)(ne.a.Group,{children:[Object(N.jsx)(ne.a.Label,{children:"Price"}),Object(N.jsxs)(rn.a,{children:[Object(N.jsx)(w.a,{children:function(){var e;return Object(N.jsx)(N.Fragment,{children:[.5,1,2].concat(Object(L.a)(null!==(e=U.prices)&&void 0!==e?e:[])).map((function(e,t){return Object(N.jsx)(E.a,{variant:"secondary",onClick:Object(f.k)((function(){R.price.value=e})),children:Lr({value:e,currency:u.a.USD})},t)}))})}}),Object(N.jsx)(rn.a.Text,{children:"$"}),Object(N.jsx)(ne.a.Control,{type:"number",min:"0.01",step:"0.01",value:null===(e=R.price.value)||void 0===e?void 0:e.toFixed(2),onChange:Object(f.k)((function(e){var t=e.target.value;R.price.value=Number(t)}))}),!r&&i?Object(N.jsx)(E.a,{onClick:i,children:"Get Suggestions"}):Object(N.jsxs)(ee.a,{onSelect:Object(f.k)((function(e){if(r&&e&&e in r){var t=r[e];void 0!==t&&(R.price=t)}})),children:[Object(N.jsx)(ee.a.Toggle,{disabled:!r,children:"Suggestions"}),Object(N.jsx)(ee.a.Menu,{children:r&&$e.map((function(e){var t=r[e];return t&&Object(N.jsxs)(ee.a.Item,{eventKey:e,children:[ht(e),": ",Lr(t)]},e)}))})]})]})]}),Object(N.jsxs)(ne.a.Group,{children:[Object(N.jsx)(ne.a.Label,{children:"Location"}),Object(N.jsxs)(rn.a,{children:[R.location!==g&&Object(N.jsxs)(E.a,{disabled:v,onClick:Object(f.k)((function(){return R.location=g})),children:['Use "',g,'"']}),Object(N.jsx)(ne.a.Control,{disabled:v,value:R.location,onChange:function(e){var t=e.target.value;return R.location=t}}),Object(N.jsxs)(ee.a,{onSelect:function(e){var t=Number(e);o&&e&&!isNaN(t)&&F(t)},children:[Object(N.jsx)(ee.a.Toggle,{disabled:v,children:(null===(c=R.location)||void 0===c?void 0:c.length)?R.location:"Select a location\u2026"}),Object(N.jsx)(ee.a.Menu,{children:null===l||void 0===l?void 0:l.map((function(e){return Object(N.jsx)(ee.a.Item,{eventKey:e.id,active:e.name.includes(R.location),children:e.name},e.id)}))})]})]})]}),Object(N.jsxs)(ne.a.Group,{children:[Object(N.jsx)(ne.a.Label,{children:"Comments"}),Object(N.jsx)(ne.a.Control,{disabled:v,as:"textarea",value:R.comments,onChange:Object(f.k)((function(e){var t=e.target.value;return R.comments=Sn(t)}))})]}),Object(N.jsx)(w.a,{children:function(){var e;return Object(N.jsx)(N.Fragment,{children:null===(e=U.comments)||void 0===e?void 0:e.map((function(e,t){return Object(N.jsxs)(a.a.Fragment,{children:[Object(N.jsx)("br",{}),Object(N.jsx)(ne.a.Text,{onClick:Object(f.k)((function(){return R.comments=Sn(e)})),children:e})]},t)}))})}}),Object(N.jsx)(ne.a.Group,{children:Object(N.jsx)(nn.a,{disabled:v,label:"Allow Offers",value:null!==(s=R.allow_offers)&&void 0!==s?s:(null!==(d=null===(h=R.price)||void 0===h?void 0:h.value)&&void 0!==d?d:0)>10,setValue:Object(f.k)((function(e){return R.allow_offers=e}))})}),Object(N.jsx)(E.a,{className:"me-2",variant:"secondary",disabled:void 0!==y||M.get(),onClick:T,children:"Revert"}),Object(N.jsx)(E.a,{className:"me-2",variant:"primary",disabled:void 0!==y||M.get(),onClick:function(){var e=o.editListing(R.id,{releaseId:R.release.id,location:R.location,condition:R.condition,sleeveCondition:R.sleeve_condition,comments:R.comments,price:R.price.value,allowOffers:R.allow_offers,status:u.d.DRAFT}).then(Object(f.k)((function(){n.location=R.location,n.condition=R.condition,n.sleeve_condition=R.sleeve_condition,n.comments=R.comments,n.price=R.price,n.allow_offers=R.allow_offers,n.status=u.c.DRAFT}))).then(b);x(e)},children:"Update"}),Object(N.jsx)(E.a,{className:"me-2",variant:"warning",disabled:void 0!==y||M.get()&&n.status!==u.c.DRAFT,onClick:function(){var e=o.editListing(R.id,{releaseId:R.release.id,location:R.location,condition:R.condition,sleeveCondition:R.sleeve_condition,comments:R.comments,price:R.price.value,allowOffers:R.allow_offers,status:u.d.FOR_SALE}).then(Object(f.k)((function(){n.location=R.location,n.condition=R.condition,n.sleeve_condition=R.sleeve_condition,n.comments=R.comments,n.price=R.price,n.allow_offers=R.allow_offers,n.status=u.c.FOR_SALE}))).then(b);x(e)},children:"Publish"}),Object(N.jsx)(At,{className:"me-2",refresh:b,promise:y}),Object(N.jsxs)(E.a,{className:"me-2",disabled:0===t.rating||G&&G.average<t.rating,onClick:function(){var e=new Promise(function(){var e=Object(P.a)(A.a.mark((function e(n,r){var a,i,c,s,u;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.notes.find((function(e){return e.field_id===p})),o&&void 0!==p&&a){e.next=3;break}return e.abrupt("return");case 3:if(i=ke(a.value),(c=Le(i,"rating",t.rating))===i){e.next=9;break}return s=o.editCustomFieldForInstance(t.folder_id,t.id,t.instance_id,p,c),e.next=9,Se(a,"value",c,s);case 9:return u=o.editReleaseInstanceRating(t.folder_id,t.id,t.instance_id,0),e.next=12,Se(t,"rating",0,u);case 12:return e.next=14,j(t);case 14:n();case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());x(e)},children:["Move Rating to Notes",G&&Object(N.jsxs)(N.Fragment,{children:[" (",G.average,", ",G.count," votes)"]})]}),Object(N.jsx)(gt,{uri:R.uri,children:"View on Discogs"})]})}})]})}function kn(e){var t=e.kind,n=e.item,r=a.a.useMemo((function(){return"media"===t?n.condition:n.sleeve_condition}),[n.condition,n.sleeve_condition,t]),i=a.a.useMemo((function(){return"media"===t?$e:Ve}),[t]);return Object(N.jsxs)(ee.a,{onSelect:function(e){"media"===t?n.condition=e:n.sleeve_condition=e},children:[Object(N.jsx)(ee.a.Toggle,{as:"div",className:U("badge","bg-"+He(r),"no-toggle"),children:ht(r)||Object(N.jsx)(N.Fragment,{children:"\xa0"})}),Object(N.jsx)(ee.a.Menu,{children:i.map((function(e){return Object(N.jsx)(ee.a.Item,{eventKey:e,active:r===e,children:e},e)}))})]})}function Sn(e){return e.replaceAll("&"," and ").replaceAll('"',"'")}var wn=n(181),Cn=n.n(wn);function En(e){var t=e.className,n=e.options,r=e.placeholder,a=e.value,i=e.setValue,c=e.size,s=e.variant;return Object(N.jsxs)(ee.a,{onSelect:function(e){return e?i(e):void 0},children:[Object(N.jsx)(ee.a.Toggle,{size:c,className:U(t),variant:s,children:(null===a||void 0===a?void 0:a.length)?a:r}),Object(N.jsx)(ee.a.Menu,{children:n.map((function(e){return Object(N.jsx)(ee.a.Item,{eventKey:e,active:a===e,children:e},e)}))})]})}function _n(e){var t=e.item,n=a.a.useMemo((function(){return{host:"cobalt",port:9100}}),[]),r=Cn()(n),i=Object(wn.useZones)(r);console.log({zones:i});var c=a.a.useState(void 0),u=Object(s.a)(c,2),l=u[0],d=u[1];a.a.useEffect((function(){return console.log(null===r||void 0===r?void 0:r.services.RoonApiTransport)}),[null===r||void 0===r?void 0:r.services.RoonApiTransport]);var f=null===r||void 0===r?void 0:r.services.RoonApiBrowse,h=a.a.useMemo((function(){return i?i.map((function(e){return e.display_name})):[]}),[i]),p=Object(o.default)("local",["roon","zoneName"],""),v=Object(s.a)(p,2),b=v[0],j=v[1],m=a.a.useMemo((function(){return null===i||void 0===i?void 0:i.find((function(e){return e.display_name===b}))}),[b,i]);a.a.useEffect((function(){if(f){var e="".concat(t.basic_information.artists.map((function(e){return e.name})).join(" ")," ").concat(t.basic_information.title);f.browse({hierarchy:"search",input:e,pop_all:!0},(function(t,n){f.load({hierarchy:"search"},(function(t,n){var r=n.items[0].item_key;f.browse({hierarchy:"search",item_key:r},(function(t){f.load({hierarchy:"search"},(function(t,n){var a=n.items[0];r=a.item_key,f.browse({hierarchy:"search",item_key:r},(function(t){f.load({hierarchy:"search"},(function(t,n){r=n.items[0].item_key,f.browse({hierarchy:"search",item_key:r},(function(t){f.load({hierarchy:"search"},(function(t,n){var r,i=null===n||void 0===n||null===(r=n.items.find((function(e){return"Play Now"===e.title})))||void 0===r?void 0:r.item_key;f.browse({hierarchy:"search",item_key:i},(function(t){f.load({hierarchy:"search"},(function(t,n){var r,i=null===n||void 0===n||null===(r=n.items.find((function(e){return"Play Now"===e.title})))||void 0===r?void 0:r.item_key;d({search:e,result:a.title,data:n,playNowKey:i})}))}))}))}))}))}))}))}))}))}))}}),[t.basic_information.artists,t.basic_information.title,f]);var g=a.a.useState(!1),O=Object(s.a)(g,2),y=O[0],x=O[1],k=a.a.useCallback((function(){void 0!==f?void 0!==m?l?f.browse({hierarchy:"search",item_key:l.playNowKey,zone_or_output_id:m.zone_id},(function(e){return f.load({hierarchy:"search"},(function(t,n){return console.log({r2:e,r3:t,r4:n}),x(t)}))})):x("No Roon album found."):x("Select a Zone."):x("Starting up...")}),[f,l,m]);return Object(N.jsx)(w.a,{children:function(){return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("h4",{children:null===r||void 0===r?void 0:r.display_name}),Object(N.jsxs)(E.a,{onClick:k,disabled:void 0===(null===l||void 0===l?void 0:l.playNowKey)||void 0===m,children:[Object(N.jsx)(re.w,{}),' Play "',null===l||void 0===l?void 0:l.result,'" Now']}),Object(N.jsx)("h6",{children:y}),Object(N.jsx)(En,{options:h,placeholder:"select a zone",setValue:j,value:b}),Object(N.jsx)(mt.a,{name:"zones",src:null!==i&&void 0!==i?i:{}}),Object(N.jsx)(mt.a,{name:"search",src:null!==l&&void 0!==l?l:{}})]})}})}var Nn=Object(C.a)((function(e){var t=e.item,n=a.a.useContext(ue.a),r=n.cache,i=n.lpdb,c=null===i||void 0===i?void 0:i.detail(t,"year",0).get(),o=null===i||void 0===i?void 0:i.masterDetail(t,"year",0).get(),u=null===i||void 0===i?void 0:i.details(t),l=null===i||void 0===i?void 0:i.masterForColectionItem(t),d=a.a.useMemo((function(){return pt(t)}),[t]),h=a.a.useState(0),v=Object(s.a)(h,2),j=v[0],m=v[1],g=a.a.useRef(!0);a.a.useEffect((function(){return null===r||void 0===r||r.count(d).then((function(e){return g.current&&m(e)}),console.warn),function(){g.current=!1}}),[r,d,u,t,l]);var O=Object(f.m)((function(){return A.a.mark((function e(){var t,n,r,a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("ready"===(null===u||void 0===u?void 0:u.status)){e.next=3;break}return e.next=3,{nodes:[{data:{id:"loading",label:null===u||void 0===u?void 0:u.status}}],edges:[]};case 3:if("ready"===(null===u||void 0===u?void 0:u.status)){e.next=8;break}return e.next=6,{nodes:[],edges:[]};case 6:e.next=3;break;case 8:return t="r".concat(u.value.id),e.next=11,{nodes:[{data:{id:t,label:u.value.title}}],edges:[]};case 11:return n=Rt(u.value),r=[],a=[],Object.entries(Object(ce.groupBy)(n,"id")).forEach((function(e){var n,i=Object(s.a)(e,2),c=i[0];i[1].forEach((function(e){void 0===n&&(n="a".concat(c),r.push({data:{id:n,label:e.name}})),a.push({data:{target:t,source:n,label:e.role}})}))})),e.next=17,{nodes:r,edges:a};case 17:case"end":return e.stop()}}),e)}))}));return i&&c&&o?Object(N.jsx)(w.a,{children:function(){var e,n=null===(e=function(e){if("ready"===(null===e||void 0===e?void 0:e.status))return e.value}(u))||void 0===e?void 0:e.series;return Object(N.jsx)(N.Fragment,{children:Object(N.jsx)(Ht,{className:"drawer",defaultTab:"Listing",tabs:[{title:"Artists",content:function(){return Object(N.jsx)(It,{item:t})}},{title:"Series",disabled:!(null===n||void 0===n?void 0:n.length),content:function(){return Object(N.jsx)("ul",{children:null===n||void 0===n?void 0:n.map((function(e,t){return Object(N.jsx)("li",{children:Object(N.jsxs)(bt.a,{title:JSON.stringify(e,null,2),children:[Object(N.jsx)(bt.a.Image,{src:e.thumbnail_url}),Object(N.jsx)(bt.a.Caption,{children:e.name})]})},t)}))})}},{title:"Data",content:function(){return Object(N.jsxs)(b.a,{children:[Object(N.jsxs)(p.a,{xs:4,children:[Object(N.jsx)(mt.a,{name:"Collection Item",src:t,collapsed:!0}),Object(N.jsxs)(E.a,{size:"sm",variant:"secondary",disabled:!j,onClick:function(){return null===r||void 0===r?void 0:r.clear(d,!0)},children:[!!j&&Object(N.jsx)(re.y,{className:"prepend-inline-icon"}),"Refresh"]}),Object(N.jsx)(E.a,{size:"sm",onClick:function(){console.log(i.collection.get(t.instance_id))},children:"RG"})]}),Object(N.jsxs)(p.a,{xs:4,children:[Object(N.jsx)(mt.a,{name:"Listing",src:t,collapsed:!0}),Object(N.jsxs)(E.a,{size:"sm",variant:"secondary",disabled:!j,onClick:function(){return null===r||void 0===r?void 0:r.clear(d,!0)},children:[!!j&&Object(N.jsx)(re.y,{className:"prepend-inline-icon"}),"Refresh"]})]}),Object(N.jsxs)(p.a,{xs:4,children:["ready"===(null===u||void 0===u?void 0:u.status)&&Object(N.jsx)(mt.a,{name:"Release",src:u.value,collapsed:!0}),Object(N.jsx)(At,{remote:u,size:"sm"})]}),Object(N.jsxs)(p.a,{xs:4,children:["ready"===(null===l||void 0===l?void 0:l.status)&&("no-master-release"===l.value?Object(N.jsx)("i",{children:"no master release"}):Object(N.jsx)(mt.a,{name:"Master",src:l.value,collapsed:!0})),Object(N.jsx)(At,{remote:l,size:"sm"})]})]})}},{title:"Notes",content:function(){return Object(N.jsxs)(b.a,{children:[Object(N.jsxs)(p.a,{children:[Object(N.jsx)("h5",{children:"Release"}),"ready"===(null===u||void 0===u?void 0:u.status)&&u.value.notes&&Object(N.jsx)(en,{src:u.value.notes,uri:u.value.uri})]}),Object(N.jsxs)(p.a,{children:[Object(N.jsx)("h5",{children:"Master"}),"ready"===(null===l||void 0===l?void 0:l.status)&&"no-master-release"!==l.value&&l.value.notes&&Object(N.jsx)(en,{src:l.value.notes,uri:l.value.uri})]})]})}},{title:"Spine",content:function(){return Object(N.jsx)(b.a,{children:Object(N.jsx)(p.a,{children:Object(N.jsx)(un,{item:t})})})}},{title:"Listing",content:function(){return Object(N.jsx)(b.a,{children:Object(N.jsx)(p.a,{children:Object(N.jsx)(yn,{item:t})})})}},{title:"Graph",content:function(){return Object(N.jsx)(b.a,{children:Object(N.jsx)(p.a,{children:Object(N.jsx)(w.a,{render:function(){return Object(N.jsx)(Lt.a,{generator:O.get()})}})})})}},{title:"Roon",content:function(){return Object(N.jsx)(b.a,{children:Object(N.jsx)(p.a,{children:Object(N.jsx)(_n,{item:t})})})}}]})})}}):null})),In=(n(410),a.a.createContext({}));function Rn(e){return e.basic_information.formats.findIndex((function(e){return"Vinyl"===e.name}))>=0}function Tn(e){return!Rn(e)&&e.basic_information.formats.findIndex((function(e){return"CD"===e.name}))>=0}var An=Ft(re.v),Pn=Ft(re.e),Mn=Ft(re.o);function Ln(e){var t=e.item,n=a.a.useContext(ue.a),r=n.cache,i=n.client,c=n.folders,s=a.a.useContext(In).selection,o=me();return Object(N.jsx)(w.a,{children:function(){var e,n=ke(t.folder_id),a=je(o(n)),u=a.label,l=a.status,d=a.type,f=l,h=void 0,p=void 0;switch(l){case"remain":f=!1;break;case"unknown":p="warning",f=!1;break;case"leave":f=An,h="badge-light listed";break;case"listed":h="badge-light listed",f=Pn;break;case"sold":f=Mn,d=pe.tag,h="badge-success"}return s=null!==(e=s)&&void 0!==e?e:[t],Object(N.jsxs)(ee.a,{onSelect:function(e){var t,n=Number(e);i&&e&&!isNaN(n)&&(null===(t=s)||void 0===t||t.forEach(function(){var e=Object(P.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se(t,"folder_id",n,i.moveReleaseInstanceToFolder(t.folder_id,t.id,t.instance_id,n));case 2:null===r||void 0===r||r.clear(pt(t));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},children:[Object(N.jsx)(ee.a.Toggle,{as:ve,bg:p,className:U(h,"d-flex","d-flex-row"),kind:d,tag:u,extra:f}),Object(N.jsx)(ee.a.Menu,{children:null===c||void 0===c?void 0:c.map((function(e,n){var r=Object(N.jsxs)(ee.a.Item,{eventKey:e.id,active:t.folder_id===e.id,children:[e.name," (",e.count,")"]},n);return n&&c[n-1].name.split("(")[0]!==e.name.split("(")[0]?[Object(N.jsx)(ee.a.Divider,{},"".concat(n,".d")),r]:r}))})]})}})}var Fn=n(428),Dn=n.n(Fn),Bn=n(238),Gn=n(440);n(737);function Un(e){var t=a.a.useContext(ue.a),n=t.cache,r=t.client,i=Fe().playsId,c=ot(),s=a.a.useMemo((function(){return Object(f.B)([])}),[]);a.a.useEffect((function(){return Object(f.l)((function(){var t=0,n=c(e);i&&n&&Object(f.F)((function(){n.dates.get().forEach((function(e,n){var r;(s.length<=n||(null===(r=s[n])||void 0===r?void 0:r.getTime())!==e.getTime())&&Object(f.G)(s,n,e),t++}));for(var e=s.length-t,r=0;r<e;++r)Object(f.E)(s,s.length-1)}))}))}),[s,i,c,e]);var o=a.a.useMemo((function(){return pt(e)}),[e]),u=a.a.useCallback((function(t,a){var s=e.folder_id,u=e.id,l=e.instance_id,d=c(e);if(i&&d){var f=d.playsNote;if(!a||t!==d.playsNote.value){var h=r.editCustomFieldForInstance(s,u,l,i,t);Se(f,"value",t,h),n&&h.then((function(){return n.clear(o)}))}}}),[n,o,r,i,c,e]),l=a.a.useCallback((function(t){var n=c(e);i&&n&&u(function(e,t){var n=e.plays,r=e.history,a=t.toString(),i=$n(new Date),c=[a].concat(Object(L.a)(r));t>n?Object(D.arraySetAdd)(c,i):Object(D.arraySetRemove)(c,i);return c.join("\n")}(n,t),!1)}),[u,i,c,e]),d=a.a.useCallback((function(){var t=c(e);i&&t&&s&&u(zn(t,s),!0)}),[u,s,i,c,e]),h=Object(f.B)({showCalendar:!1,showDay:s?s[s.length-1]:void 0});return Object(N.jsx)(w.a,{render:function(){var t=c(e);if(Tn(e)||!t)return null;var n=t.plays,r=t.history,a=Object(N.jsx)(Bn.a,{id:"popover-basic",children:Object(N.jsx)(N.Fragment,{children:Object(N.jsx)(w.a,{children:function(){return Object(N.jsx)(N.Fragment,{children:Object(N.jsx)(Dn.a,{highlightDates:null===s||void 0===s?void 0:s.toJSON(),openToDate:h.showDay,onChange:Object(f.k)((function(e){h.showDay=e,Object(D.arraySetToggle)(s,e,(function(e,t){return e.getTime()-t.getTime()}))})),inline:!0,children:Object(N.jsxs)(v.a,{fluid:!0,children:[Object(N.jsx)(de.a,{bg:"dark",onClick:Object(f.k)((function(){return h.showDay=new Date})),children:"Today"}),Object(N.jsx)("pre",{children:s&&zn(t,s)})]})})})}})})});return Object(N.jsx)(Gn.a,{show:h.showCalendar,rootClose:!0,overlay:a,placement:"bottom",onExiting:function(){return d()},children:Object(N.jsx)("div",{style:{background:(null===s||void 0===s?void 0:s.find((function(e){return e.getTime()>Date.now()})))?"red":void 0},children:Object(N.jsx)(an,{value:null!==n&&void 0!==n?n:0,min:0,onChange:l,onClick:Object(f.k)((function(){return h.showCalendar=!h.showCalendar})),title:r.join("\n")})})})}})}function zn(e,t){return[e.plays-e.history.length+t.length].concat(Object(L.a)(t.map($n))).join("\n")}function $n(e){return[e.getFullYear(),e.getMonth()+1,e.getDate()].join("-")}var Vn=n(183),Hn=n.n(Vn);n(783);function qn(e){if("function"===typeof e)return e}function Kn(e){var t=e.value,n=e.onEnter,r=e.onLeave,a=e.onClick;return Object(N.jsx)("div",{className:"star ".concat(t<=0?"star-zero":t>=1?"star-full":"star-half"),onMouseMove:qn(n),onMouseLeave:qn(r),onClick:qn(a),children:t?"\u2605":"\u2606"})}function Wn(e,t,n){if((e-=t)<=-1)return 0;if(e>=0)return 1;if(n){if(e<=-.75)return 0;if(e>=-.25)return 1}return.5}function Jn(e){var t=e.disabled,n=e.value,r=e.count,i=e.roundUp,c=e.votes,o=e.setValue,u=a.a.useState(),l=Object(s.a)(u,2),d=l[0],f=l[1],h=a.a.useRef(),p=c?" (".concat(c," votes)"):"";return Object(N.jsx)("div",{className:"stars ".concat(t?"disabled":""),title:"".concat(n," stars").concat(p),children:Hn()(1,r+1).map((function(e){return Object(N.jsx)(Kn,{value:Wn(null!==d&&void 0!==d?d:n,e,i),onEnter:!t&&v.bind(null,e,!0),onLeave:!t&&v.bind(null,e,!1),onClick:!t&&b.bind(null,e)},e)}))});function v(e,t){clearTimeout(h.current),t?(f(e),h.current=setTimeout(f.bind(null,void 0),1e3)):f(void 0)}function b(e){o(e)}}function Xn(e){var t=e.row,n=a.a.useContext(ue.a),r=n.client,i=n.cache,c=n.lpdb,s=n.setError,o=vt(),u=ft(),l=null===c||void 0===c?void 0:c.releaseStore.get(t.id);if(a.a.useEffect((function(){(null===l||void 0===l?void 0:l.stale)&&l.refresh()}),[l]),!r||!i||!c||!l)return Object(N.jsx)(N.Fragment,{});var d=u(t);return Object(N.jsx)(w.a,{render:function(){var e=t.folder_id,n=t.id,a=t.instance_id,i=t.rating,c=l.rating,u=l.ratingCount,f=ke(d.get()),h=function(){var i=Object(P.a)(A.a.mark((function i(c){var u;return A.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:u=r.editReleaseInstanceRating(e,n,a,c),Se(t,"rating",c,u).then((function(){o(t)}),(function(e){s(e)}));case 2:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}();return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(Jn,{disabled:i!==f||xe(d.get()),value:f,count:5,setValue:h}),c?Object(N.jsx)(Jn,{disabled:!0,value:c,count:5,votes:u,setValue:J.a,roundUp:!0}):!!l.stale&&Object(N.jsx)(Tt,{})]})}})}n(291);function Yn(e){var t=e.as,n=e.artists,r=e.className,a=e.title,i=e.instance_id,c=null!==t&&void 0!==t?t:v.a;return Object(N.jsxs)(c,{className:U("ArtistsCell",r),children:[n&&Object(N.jsx)(b.a,{className:"artist",children:Object(N.jsx)(p.a,{children:n.map((function(e,t){var n=e.id,r=e.name;return Object(N.jsx)(j.c,{className:"comma-sep",to:"/artists/".concat(n,"/").concat(r),children:ht(r)},t)}))})}),Object(N.jsx)(b.a,{className:"title expand",children:Object(N.jsx)(p.a,{children:Object(N.jsx)("span",{id:null===i||void 0===i?void 0:i.toString(),children:ht(a)})})})]})}var Zn=n(79),Qn=n(11),er=n(430),tr=n.n(er);function nr(e){return null===e||void 0===e?void 0:e.replace(/^\W*((an?|the) )?/i,"")}function rr(e,t,n){var r,a,i=void 0===n?{}:n,c=i.preA,s=i.postB,o="minimize",u="minimize";if(Array.isArray(e)&&(o=(r=e)[0],e=r[1]),"minimize"===o&&(e=nr(e)),Array.isArray(t)&&(u=(a=t)[0],t=a[1]),"minimize"===u&&(t=nr(t)),void 0===e)return void 0===t?[void 0,void 0]:void 0===s||sr(s,t)?[void 0,ar(u,t)]:[void 0,rr([u,t],s)[0]];if(void 0===t)return void 0===c||sr(c,e)?[ar(o,e),void 0]:[rr(c,[o,e])[1],void 0];var l="",d="";if(sr(e,t))l=ar(o,e),d=ar(u,t);else for(var f=0,h=tr()(ir(o,e),ir(u,t));f<h.length;f++){var p=h[f],v=p[0],b=p[1];if(v&&(l&&"words"===o&&(l+=" "),l+=v),b&&(d&&"words"===u&&(d+=" "),d+=b),v!==b&&!sr(v,b))break}if("literal"===o)l=e;else if(c&&!sr(c,e)){var j=rr([o,c],[o,e])[1];j&&j.length>l.length&&(l=j)}if("literal"===u)d=t;else if(s&&!sr(s,t)){var m=rr([u,t],[u,s])[0];m&&m.length>d.length&&(d=m)}return[l,d]}function ar(e,t){var n,r;switch(e){case"literal":return t;case"minimize":return null!==(n=t[0])&&void 0!==n?n:"";case"words":return null!==(r=ir(e,t)[0])&&void 0!==r?r:"";default:throw new Error("Unexpected mode: ".concat(e))}}function ir(e,t){switch(e){case"literal":return[t];case"minimize":return t.split("");case"words":return O()(t.split(/\W+/));default:throw new Error("Unexpected mode: ".concat(e))}}function cr(e){return null===e||void 0===e?void 0:e.toLocaleLowerCase().replace(/\s|['"]/g,"")}function sr(e,t){return e=cr(e),t=cr(t),e?!!t&&0===e.localeCompare(t):!t}var or={leading:!1,periodic:!1,verbose:void 0,wait:100};function ur(e){var t=a.a.useRef();return t.current=e,a.a.useCallback((function(){return t.current}),[])}var lr=n(233),dr=n.n(lr),fr=n(431),hr=n(434),pr=n(123),vr=(n(786),n(185)),br=n.n(vr),jr=n(433),mr=n.n(jr);n(788);function gr(e){var t=e.count,n=e.pageSize,r=e.currentPage,i=e.gotoPage,c=e.spine,o=e.keyboardNavigation,u=e.variant,l=a.a.useMemo((function(){var e=Math.ceil(t/n)-1,a=0,i=0,c=e,s=e;return Math.abs(r-a)<Math.abs(r-s)?(a=Math.max(0,r-4),i=Math.max(0,r-2),c=Math.min(e,i+4),s=Math.min(e,a+8)):(s=Math.min(s,r+4),c=Math.min(s,r+2),i=Math.max(0,c-4),a=Math.max(0,s-8)),{maxPage:e,minShownPage:a,minShownPageSm:i,maxShownPageSm:c,maxShownPage:s}}),[t,r,n]),d=l.maxPage,f=l.minShownPage,h=l.minShownPageSm,v=l.maxShownPageSm,j=l.maxShownPage;u=u||"outline-secondary";var m=a.a.useMemo((function(){return null===c||void 0===c?void 0:c(r)}),[c,r]),g=a.a.useState(),O=Object(s.a)(g,2),y=O[0],x=O[1],k=a.a.useMemo((function(){return function(){return i(br()(r-1,0,d))}}),[r,i,d]),S=a.a.useMemo((function(){return function(){return i(br()(r+1,0,d))}}),[r,i,d]),w=a.a.useMemo((function(){return function(){return i(br()(0,0,d))}}),[i,d]),C=a.a.useMemo((function(){return function(){return i(br()(d,0,d))}}),[i,d]),_=a.a.useMemo((function(){return 0===r}),[r]),I=a.a.useMemo((function(){return r===d}),[r,d]),R=a.a.useMemo((function(){return function(e,t){switch(e){case"left":case"pageup":t.preventDefault(),k(),x({op:"prev",bad:_});break;case"right":case"pagedown":t.preventDefault(),S(),x({op:"next",bad:I});break;case"home":t.preventDefault(),w(),x({op:"prev",bad:_});break;case"end":t.preventDefault(),C(),x({op:"next",bad:I})}}}),[w,C,S,I,_,k]),T=a.a.useMemo((function(){for(var e=[],t=[],n=0;n<d;++n){var r=null===c||void 0===c?void 0:c(n);if(e.push(r),r){var a,i=Object(s.a)(r,2),o=i[0],u=i[1],l=null!==o&&void 0!==o?o:u;l&&(null===(a=Object(D.last)(t))||void 0===a?void 0:a[1])!==l&&t.push([n,l])}}return{spines:e,sections:t}}),[d,c]);return Object(N.jsxs)(b.a,{className:U("Pager",(null===y||void 0===y?void 0:y.bad)&&"bad"),children:["global"===o&&Object(N.jsx)(mr.a,{isExclusive:!0,handleEventType:"keydown",handleKeys:["left","right","home","end","pageup","pagedown"],onKeyEvent:R}),Object(N.jsx)(p.a,{children:Object(N.jsxs)(rn.a,{children:[Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(E.a,{className:U("first",(null===y||void 0===y?void 0:y.bad)&&"prev"===(null===y||void 0===y?void 0:y.op)&&"bad"),variant:u,disabled:_,onClick:function(){return i(0)},children:Object(N.jsx)(re.j,{})},"min page"),Object(N.jsx)(E.a,{className:"prev",variant:u,disabled:_,onClick:k,children:Object(N.jsx)(re.g,{})},"page- 1"),0<h&&Object(N.jsx)(rn.a.Text,{className:0<f?"":"auto-show-md",children:Object(N.jsx)(re.u,{})},0),f<r&&Hn()(f,r).map((function(e){return Object(N.jsx)(Or,{autoHide:e<h,spine:c,gotoPage:i,page:e,variant:u},e)}))]}),Object(N.jsxs)(ee.a,{onSelect:function(e){return i(Number(e))},children:[Object(N.jsxs)(ee.a.Toggle,{as:rn.a.Text,className:"spine no-toggle",children:[(null===m||void 0===m?void 0:m[0])&&m[0],Object(N.jsx)("span",{className:"pad"}),(r+1).toString(),Object(N.jsx)("span",{className:"pad"}),(null===m||void 0===m?void 0:m[1])&&m[1]]}),T.sections.length>0&&Object(N.jsx)(ee.a.Menu,{children:T.sections.map((function(e){var t=Object(s.a)(e,2),n=t[0],r=t[1];return Object(N.jsx)(ee.a.Item,{eventKey:n,children:r},n)}))})]}),Object(N.jsxs)(N.Fragment,{children:[r<j&&Hn()(r+1,j+1).map((function(e){return Object(N.jsx)(Or,{autoHide:e>v,spine:c,gotoPage:i,page:e,variant:u},e)})),j<d&&Object(N.jsx)(rn.a.Text,{children:Object(N.jsx)(re.u,{})},d),Object(N.jsx)(E.a,{className:"next",variant:u,disabled:I,onClick:S,children:Object(N.jsx)(re.h,{})},"page+ 1"),Object(N.jsx)(E.a,{className:U("last",(null===y||void 0===y?void 0:y.bad)&&"next"===(null===y||void 0===y?void 0:y.op)&&"bad"),variant:u,disabled:I,onClick:function(){return i(d)},children:Object(N.jsx)(re.k,{})},"max page")]})]})})]})}function Or(e){var t,n=e.autoHide,r=e.page,a=e.spine,i=e.gotoPage,c=e.variant,o=null!==(t=null===a||void 0===a?void 0:a(r))&&void 0!==t?t:[],u=Object(s.a)(o,2),l=u[0],d=u[1];return Object(N.jsxs)(E.a,{className:n?"spine auto-hide-md":"spine",variant:c,onClick:function(){return i(r)},children:[l&&Object(N.jsx)("div",{className:"from",children:l}),r+1,d&&Object(N.jsx)("div",{className:"to",children:d})]},r+1)}function yr(e){switch(typeof e){case"undefined":return"";case"string":return e;default:return e[1]}}var xr=function(e){var t=e.indeterminate,n=Object(Qn.a)(e,["indeterminate"]),r=a.a.useRef(null);return a.a.useEffect((function(){r.current&&(r.current.indeterminate=null!==t&&void 0!==t&&t)}),[r,t]),Object(N.jsx)("input",Object(F.a)({type:"checkbox",ref:r},n))};function kr(e){return"string"===typeof e?e:null===e||void 0===e?void 0:e[1]}function Sr(e){var t,n=e.data,r=e.detail,i=e.mnemonic,c=e.rowClassName,u=e.sessionKey,l=e.search,d=e.goto,f=e.filter,h=e.selectedRows,p=e.setSelectedRows,v=e.getRowId,b=e.pager;b=null===(t=b)||void 0===t||t;var j=u?Object(o.default)("session",[u,"pageIndex"].join(),0):a.a.useState(0),m=Object(s.a)(j,2),g=m[0],y=m[1],x=u?Object(o.default)("session",[u,"sortBy"].join(),[]):a.a.useState([]),k=Object(s.a)(x,2),S=k[0],w=k[1],C=u?Object(o.default)("session",[u,"pageSize"].join(),10):a.a.useState(10),E=Object(s.a)(C,2),_=E[0],I=E[1],R=a.a.useRef(!0),T=function(e,t,n){var r={};return null===e||void 0===e||e.forEach((function(e){var a,i=null!==(a=null===t||void 0===t?void 0:t(e,0))&&void 0!==a?a:"".concat(n.indexOf(e));r[i]=!0})),r}(h,v,n),A=R.current?{pageIndex:g,sortBy:S,pageSize:_,selectedRowIds:T}:{};R.current=!1;var P=a.a.useMemo((function(){return O()([pr.useGlobalFilter,pr.useSortBy,r&&pr.useExpanded,b&&pr.usePagination,p&&pr.useRowSelect])}),[r,p,b]),M=a.a.useCallback((function(e){return Cr(e)}),[]),D=a.a.useMemo((function(){return function(e,t,n){if(void 0===n)return e;var r=n.filter,a=n.search;return r&&(e=e.filter((function(e){var t=e.original;return r(t)}))),a&&(e=Object(fr.a)(e,a,{keys:[function(e){return M(e.original)}]})),e}}),[M]),B=a.a.useRef({}),G=!1,z=pr.useTable.apply(void 0,[Object(F.a)(Object(F.a)({},e),{},{initialState:A,autoResetPage:G,autoResetExpanded:!1,autoResetGroupBy:G,autoResetSelectedRows:G,autoResetSortBy:G,autoResetFilters:G,autoResetRowState:G,autoResetGlobalFilter:!1,globalFilter:D})].concat(Object(L.a)(P),[function(e){p&&e.visibleColumns.push((function(e){return[{id:"selection",Header:function(e){var t=e.getToggleAllPageRowsSelectedProps;return t?Object(N.jsx)("div",{children:Object(N.jsx)(xr,Object(F.a)({},t()))}):null},Cell:function(e){var t=e.row;return t.getToggleRowSelectedProps?Object(N.jsx)("div",{children:Object(N.jsx)(xr,Object(F.a)({},t.getToggleRowSelectedProps()))}):null}}].concat(Object(L.a)(e))}))}])),$=z.getTableBodyProps,V=z.getTableProps,H=z.gotoPage,q=z.headerGroups,W=z.prepareRow,J=z.rows,X=z.setPageSize,Y=z.setSortBy,Z=z.state,Q=Z.pageIndex,ee=Z.pageSize,te=Z.selectedRowIds,ne=Z.sortBy,ae=z.setGlobalFilter,ie=z.visibleColumns,ce=z.page;b||(z.page=ce=J),a.a.useEffect((function(){return y(Q)}),[Q,y]),a.a.useEffect((function(){return w(ne)}),[w,ne]),a.a.useEffect((function(){return I(ee)}),[I,ee]);var se=a.a.useCallback((function(){ae({filter:f,goto:d,search:l})}),[ae,f,d,l]),oe=function(e,t){var n,r,i,c,s=a.a.useRef(),o=ur(e),u=ur(null!==(n=null===t||void 0===t?void 0:t.leading)&&void 0!==n?n:or.leading),l=ur(null!==(r=null===t||void 0===t?void 0:t.periodic)&&void 0!==r?r:or.periodic),d=ur(null!==(i=null===t||void 0===t?void 0:t.verbose)&&void 0!==i?i:or.verbose),f=ur(null!==(c=null===t||void 0===t?void 0:t.wait)&&void 0!==c?c:or.wait),h=a.a.useMemo((function(){var e=d();return e&&console.warn("[".concat(e,"] building callback")),function(){var t,n;e=d();var r=null===(t=s.current)||void 0===t?void 0:t.args;if(e){var a=void 0===r?"clearing":"invoking, then deferring further invocations within ".concat(f(),"ms");console.log("[".concat(e,"] ").concat(a))}if(void 0!==r){if(null===(n=o())||void 0===n||n.apply(void 0,r),s.current){var i=s.current.callback,c=setTimeout(i,f());s.current={args:void 0,callback:i,handle:c}}}else s.current=void 0}}),[s,o,d]);return[a.a.useMemo((function(){var e=d();return e&&console.warn("[".concat(e,"] building debouncedFn")),function(){for(var t,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];e=d();var a=f();if(s.current){if(l())return e&&console.log("[".concat(e,"] updating args")),void(s.current.args=n);e&&console.log("[".concat(e,"] clear timeout, deferring for another ").concat(a,"ms")),clearTimeout(s.current.handle);var i=setTimeout(h,a);s.current={args:n,callback:h,handle:i}}else u()?(e&&console.log("[".concat(e,"] invoking on leading edge, then deferring further invocations within ").concat(a,"ms")),null===(t=o())||void 0===t||t.apply(void 0,n),i=setTimeout(h,a),s.current={args:void 0,callback:h,handle:i}):(e&&console.warn("[".concat(e,"] deferring invocation for ").concat(a,"ms")),i=setTimeout(h,a),s.current={args:n,callback:h,handle:i})}}),[o,u,f,h]),h]}(se,{leading:!0,wait:200,periodic:!0}),ue=Object(s.a)(oe,1)[0];a.a.useEffect(ue,[ue,l]),a.a.useEffect(se,[se,f]),a.a.useEffect((function(){return B.current.search&&B.current.search!==l&&(y(0),H(0),w([]),Y([])),B.current.search=l,function(){}}),[H,l,y,w,Y]),a.a.useEffect((function(){if(d&&B.current.goto!==d){var e=J.findIndex((function(e){return e.original===d}));if(e>=0){var t=Math.floor(e/ee);H(t),B.current.goto=d}}return function(){}}),[H,ee,J,d]),a.a.useEffect((function(){p&&p(K()(J.filter((function(e){return te[e.id]})),"original"))}),[p,te&&JSON.stringify(Object.keys(te))]);var le=a.a.useCallback((function(e){var t,n,r,a,c;if(!i)throw new Error("missing mnemonic");var s=e*ee,o=s>0?null===(t=J[s-1])||void 0===t?void 0:t.original:void 0,u=null===(n=J[s])||void 0===n?void 0:n.original,l=Math.min(s+ee-1,J.length-1),d=null===(r=J[l])||void 0===r?void 0:r.original,f=l<J.length-1?null===(a=J[l+1])||void 0===a?void 0:a.original:void 0;if(u&&d){var h=null===(c=ne[0])||void 0===c?void 0:c.id,p=i(h,u),v=i(h,d);if(p&&v){var b,j=o&&i(h,o),m=f&&i(h,f),g=rr(p,v,{preA:kr(j),postB:kr(m)});if(j===p)g[0]=dr()(O()([null===(b=le(e-1))||void 0===b?void 0:b[1],g[0]]),"length").pop();return g}}}),[i,ee,J,ne]),de=a.a.createRef(),he=a.a.useMemo((function(){return b?{pager:Object(N.jsx)(gr,{count:J.length,currentPage:Q,gotoPage:H,pageSize:ee,keyboardNavigation:"global",spine:i&&le}),pageSizeSelector:Object(N.jsx)("select",{value:ee,onChange:function(e){X(Number(e.target.value))},children:[5,10,20,30,40,50].map((function(e){return Object(N.jsxs)("option",{value:e,children:["Show ",e]},e)}))})}:{}}),[H,i,Q,ee,J.length,X,b,le]),pe=he.pager,ve=he.pageSizeSelector,be=V(),je=$();return Object(N.jsxs)("div",{ref:de,children:[pe,Object(N.jsxs)(hr.a,Object(F.a)(Object(F.a)({},be),{},{className:U(be,"BootstrapTable"),children:[Object(N.jsx)("thead",{children:q.map((function(e){return Object(N.jsx)("tr",Object(F.a)(Object(F.a)({},e.getHeaderGroupProps()),{},{children:wr(e).map((function(e){var t=e,n=e.getHeaderProps(e.getSortByToggleProps);return Object(N.jsxs)("th",Object(F.a)(Object(F.a)({},n),{},{className:U(n,t.className),children:[e.render("Header"),e.isSorted&&(e.isSortedDesc?Object(N.jsx)(re.f,{}):Object(N.jsx)(re.i,{}))]}))}))}))}))}),Object(N.jsx)("tbody",Object(F.a)(Object(F.a)({},je),{},{children:O()(yt()(ce.map((function(e){var t,n=e;W(n),r&&(t=function(e){var t,r=e.target,a=null===(t=r.attributes.getNamedItem("role"))||void 0===t?void 0:t.value,i=r.classList;("cell"===a||"row"===a||i.contains("expand"))&&n.toggleRowExpanded()});var a=n.getRowProps();return[Object(N.jsx)("tr",Object(F.a)(Object(F.a)({"data-key":a.key},a),{},{className:U(a,null===c||void 0===c?void 0:c(n.original),d===n.original&&"flash"),onClick:t,children:n.cells.map((function(e){var t=e.getCellProps(),n=e.column;return Object(N.jsx)("td",Object(F.a)(Object(F.a)({},t),{},{className:U(t,n.className),children:e.render("Cell")}))}))})),n.isExpanded&&Object(N.jsx)("tr",{className:"detail-row",children:Object(N.jsx)("td",{colSpan:ie.length,children:fe(null===r||void 0===r?void 0:r(n.original))})},a.key+"-detail")]}))))}))]})),ve]})}function wr(e){return e.headers}function Cr(e,t,n){var r,a;if(t=null!==(r=t)&&void 0!==r?r:[],n=null!==(a=n)&&void 0!==a?a:new Set,e){if(n.has(e))return t;n.add(e),Object.values(e).forEach((function(e){switch(typeof e){case"string":var r;if(!e.startsWith("http"))null===(r=t)||void 0===r||r.push(e);break;case"number":var a;if(e>10)null===(a=t)||void 0===a||a.push(e.toString());break;case"object":Cr(e,t,n)}}))}return O()(t)}function Er(){var e=me();return a.a.useCallback((function(t){return"sold"===je(e(t.folder_id)).status}),[e])}var _r={ready:"remote-ready",error:"remote-error",pending:"remote-pending"};var Nr=function(e,t){var n=e.values.Tasks,r=t.values.Tasks;return Object(D.compare)(n,r,{emptyLast:!0})};function Ir(e,t){var n;switch(e[0]){case"=":n=e.slice(1);break;default:n=e}return"object"===typeof t&&(n=JSON.parse(n)),n}var Rr="Release";function Tr(e){var t=a.a.useContext(ue.a);J()("CollectionTable",Object(F.a)(Object(F.a)({},e),{},{elephantContext:t}));var n=e.search,r=e.filter,i=e.collectionSubset,c=e.storageKey,u=t.cache,l=t.client,d=t.collection,h=t.fieldsById,p=t.folders,v=t.inventory,b=t.orders,j=t.lists,m=t.lpdb,g=Number(window.location.hash.split("#",2)[1]);g&&!isNaN(g)||(g=void 0);var y=gn(),x=me(),k=Fe(),S=k.mediaConditionId,C=k.sleeveConditionId,_=k.playsId,I=k.sourceId,R=k.orderNumberId,T=k.priceId,A=k.notesId,P=k.noteIds,B=lt(),G=B.tasks,z=B.tasksId,V=Ar(),q=Pr(),W=function(){var e=ot();return a.a.useCallback((function(t){var n,r;return null!==(n=null===(r=e(t))||void 0===r?void 0:r.plays)&&void 0!==n?n:0}),[e])}(),X=ut(),Y=a.a.useCallback((function(e){var t;if(I&&R){var n=st(e.notes,I);return"PFC"===n&&(n="".concat(n," ").concat(st(e.notes,R))),["literal",null!==(t=n)&&void 0!==t?t:""]}}),[I,R]),Z=a.a.useCallback((function(e,t){var n,r;switch(e){case Rr:return t.basic_information.artists[0].name;case"Rating":return["literal","".concat(ke(t.rating)).concat("\u2605")];case"Label":return(r=t.basic_information.labels,Object(ce.uniq)(r.map(Ke))).join(" ");case"Source":return Y(t);case"Location":return["literal",je(x(t.folder_id)||"Uncategorized").label];case"Plays":return["literal","".concat(W(t))];case"Tasks":return["words",G(t).join(" ")];case"Tags":return["words",X(t,{includeLocation:!1}).get().map((function(e){return e.tag})).join(" ")];case"Type":return["words",[].concat(Object(L.a)(Ze(t.basic_information.formats)),[null===(n=t.basic_information.formats[0])||void 0===n?void 0:n.name]).join(" ")];case"Year":return["literal",(Number(t.basic_information.year)||"").toString()];default:return}}),[Y,x,W,G,X]);J()("autoSortBy",{mnemonic:Z});var ne=a.a.useCallback((function(e){return function(t,n){var r=yr(Z(e,t.original)),a=yr(Z(e,n.original));return Object(D.compare)(r,a)}}),[Z]),ae=a.a.useMemo((function(){return ne("Source")}),[ne]),ie=a.a.useMemo((function(){return ne("Location")}),[ne]),se=Er(),le=a.a.useCallback((function(e,t){var n=V(e.original.notes),r=q(e.original.notes),a=V(t.original.notes),i=q(t.original.notes),c=qe(n),s=qe(r),o=qe(a),u=qe(i);return c-o||s-u}),[V,q]),de=a.a.useMemo((function(){var e;return null===p||void 0===p||null===(e=p.find((function(e){return"Sold"===e.name})))||void 0===e?void 0:e.id}),[p]),he=a.a.useCallback((function(){if(void 0!==S&&void 0!==C)return[Object(F.a)({Header:"Cond.",className:"minimal-column centered-column",accessor:function(e){var t=e.id;return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsxs)("div",{className:"condition-row",children:[Object(N.jsx)("div",{className:"grade grade-media",children:Object(N.jsx)(Mr,{kind:"media",item:e})}),Object(N.jsx)("div",{className:"grade grade-sleeve",children:Object(N.jsx)(Mr,{kind:"sleeve",item:e})})]}),Object(N.jsx)(w.a,{render:function(){var n,r,a,i=v.get(t),c=b.values().map((function(e){var n=e.items.find((function(e){return e.release.id===t}));return n?[e,n]:[]})),o=0,d=O()(c.map((function(e,t){var n=Object(s.a)(e,2),r=n[0],a=n[1];if(r&&a){var i=ht(r.status);return"Sold"===i&&o++,Object(N.jsx)("div",{className:"d-flex d-flex-row",children:Object(N.jsx)("div",{className:"listed",children:Object(N.jsx)(Ne,{href:"https://www.discogs.com/sell/order/".concat(r.id),children:Object(N.jsx)(Zn.a,{as:"div",bg:"light",className:H()(i),title:"Sold for ".concat(Lr(a.price)),children:i})})})},t)}})));if(d.length){if(o){var h,j,g=null!==(h=null===m||void 0===m||null===(j=m.entriesForRelease(e.id))||void 0===j?void 0:j.filter(se).length)&&void 0!==h?h:0;o>g?n=de:se(e)||d.pop()}}else if(i){var k,S=ke(i.location),C=ht(ke(i.status)),_=null===p||void 0===p||null===(k=p.find((function(e){return e.name.match(S)})))||void 0===k?void 0:k.id,I=je(x(e.folder_id)).label;"Sold"===i.status?e.folder_id!==de&&(n=de):_&&_!==e.folder_id?n=_:S!==I&&(r=I,a="Listing location: ".concat(null!==S&&void 0!==S?S:"unset")),d.push(Object(N.jsx)("div",{className:"d-flex d-flex-row",children:Object(N.jsx)("div",{className:"listed",children:Object(N.jsx)(Ne,{href:"https://www.discogs.com/sell/item/".concat(i.id),children:Object(N.jsx)(Zn.a,{as:"div",bg:"light",className:H()(C),title:"Listed for ".concat(Lr(i.price)),children:C})})})},d.length))}return n&&d.push(Object(N.jsxs)(E.a,{className:"badge text-light",variant:"dark",size:"sm",disabled:!l||!n,title:a,onClick:function(){if(l&&n){var t=l.moveReleaseInstanceToFolder(e.folder_id,e.id,e.instance_id,n).then(Object(f.k)((function(){null===u||void 0===u||u.clear(pt(e)),e.folder_id=n})));Se(e,"folder_id",n,t)}},children:[Object(N.jsx)(re.d,{}),je(x(n)).label]},d.length)),i&&r&&d.push(Object(N.jsxs)(E.a,{className:"badge text-light",variant:"dark",size:"sm",disabled:!l||!r,title:a,onClick:function(){if(l&&r){var e=l.editListing(i.id,{releaseId:i.release.id,location:r,condition:i.condition,sleeveCondition:i.sleeve_condition,comments:i.comments,price:i.price.value,allowOffers:i.allow_offers,status:i.status}).then(y);Se(i,"location",r,e)}},children:[r,Object(N.jsx)(re.c,{})]},d.length)),d.length||d.push(Object(N.jsx)("div",{className:"condition-row",children:Object(N.jsx)(w.a,{render:function(){var t=V(e.notes);if(!t)return null;var n=null===m||void 0===m?void 0:m.suggestions(e);if("ready"===(null===n||void 0===n?void 0:n.status)){var r,a=null===(r=n.value)||void 0===r?void 0:r[t];if(a)return Object(N.jsx)("span",{className:"price price-preview t-small",children:Lr(a)})}return Object(N.jsx)(At,{className:"badge",variant:"outline-secondary",remote:n,children:"$0.00"})}})},d.length)),Object(N.jsx)(N.Fragment,{children:d})}})]})}},{sortType:le}),[Re.mediaCondition,Re.sleeveCondition]]}),[S,C,le,v,b,p,x,de,m,se,l,u,y,V]),be=vt();J()("sourceColumn",{cache:u,client:l,orderNumberId:R,priceId:T,sourceId:I,sortBySource:ae});var ge=a.a.useCallback((function(){if(l&&u&&void 0!==I&&void 0!==R&&void 0!==T&&void 0!==A)return[{Header:"Source",accessor:function(e){var t,n,r=e.notes,a=st(r,A),i=ht(st(r,I)),c=ht(st(r,R)),s=/^\d+\.\d\d$/.test(ke(null!==(t=st(r,T))&&void 0!==t?t:""))?"$":null,o=u&&l&&!(i===De.pfc||i===De.gift)&&Object(N.jsxs)("div",{className:"d-flex d-flex-row d-inline-flex price t-small",children:[s,Object(N.jsx)(Fr,{noteId:T,row:e,contextDropdownMenu:void 0===a?void 0:Object(N.jsx)(ee.a.Menu,{children:Object(N.jsx)(ee.a.Item,{onSelect:function(){Le(a,"original-price",o);var t=e.folder_id,n=e.id,i=e.instance_id,c=ct(r,A),s=l.editCustomFieldForInstance(t,n,i,A,a);Se(c,"value",a,s).then((function(){be(e)}),(function(e){console.error(e)}))},children:"Test"})})})]}),d=function(e,t){switch(t=t.split("\n").pop(),e){case De.acousticsounds:return{Icon:function(){return Object(N.jsx)("img",{alt:e,src:Ce,className:"icon"})},uri:"https://store.acousticsounds.com/index.cfm?get=account&do=orderdetail&order_id=".concat(t)};case De.amazon:return{Icon:oe.a,uri:"https://smile.amazon.com/gp/your-account/order-details/ref=ppx_yo_dt_b_order_details_o00?ie=UTF8&orderID=".concat(t)};case De.discogs:return{Icon:oe.b,uri:"https://www.discogs.com/sell/order/".concat(t)};case De.vinylpost:return{Icon:function(){return Object(N.jsx)("img",{alt:e,src:Ee,className:"icon"})},uri:"https://vinylpost.co/".concat(t,"/")};case De.blackbox:return{Icon:function(){return Object(N.jsx)("img",{alt:e,src:_e,className:"icon"})}};default:return{}}}(i,c),f=d.uri,h=d.Icon;return h=null!==(n=h)&&void 0!==n?n:function(){return Object(N.jsx)(Zn.a,{bg:"dark",children:i})},f?Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(Ne,{href:f,children:Object(N.jsx)(h,{className:"me-1"})}),o]}):c?Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(h,{className:"me-1"}),o,Object(N.jsx)("div",{className:"me-1",children:c})]}):Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(h,{className:"me-1"}),o]})},sortType:ae},[Re.source,Re.orderNumber,Re.price]]}),[l,u,I,R,T,A,ae,be]),Oe=a.a.useCallback((function(e,t){var n,r;return(null!==(n=W(e.original))&&void 0!==n?n:-1)-(null!==(r=W(t.original))&&void 0!==r?r:-1)}),[W]),ye=a.a.useCallback((function(){if(l&&_)return[{Header:"Plays",className:"centered-column",accessor:function(e){return Object(N.jsx)(Un,Object(F.a)({},e))},sortType:Oe},[Re.plays]]}),[l,_,Oe]),xe=a.a.useCallback((function(){if(l&&u&&A)return[{Header:"Notes",accessor:function(e){return Object(N.jsx)(Fr,{as:"textarea",row:e,rows:3,noteId:A})}},[Re.notes]]}),[u,l,A]),we=a.a.useCallback((function(){if(l&&u&&z){return[{Header:"Tasks",accessor:G,sortType:Nr,Cell:function(e){var t=e.row.original;return Object(N.jsx)(Br,{noteId:z,row:t})}},[Re.tasks]]}}),[u,l,G,z]);J()("fieldColumns",{conditionColumn:he,fieldsById:h,notesColumn:xe,playCountColumn:ye,sourceColumn:ge,tasksColumn:we});var Ie=a.a.useMemo((function(){var e=[],t=[];return[ye(),he(),ge(),xe(),we()].forEach((function(n){n&&(e.push(n[0]),n[1].forEach((function(e){return t.push(e)})))})),null===h||void 0===h||h.forEach((function(n){var r=n.name,a=n.id;return!t.includes(r)&&e.push({Header:ht(r),accessor:function(e){var t=e.notes;return ht(st(t,a))}})})),e}),[he,h,xe,ye,ge,we]),Te=a.a.useCallback((function(e,t,n){var r=e.original,a=t.original,i=r.basic_information,c=a.basic_information,s=i.artists,o=c.artists,u=Object(D.compare)(s,o,{toString:function(e){return e.name},library:!0});if(u)return u;var l=i.title,d=c.title;return Object(D.compare)(l,d,{library:!0})}),[]),Ae=a.a.useCallback((function(e,t){return ke(e.original.rating)-ke(t.original.rating)}),[]),Pe=a.a.useCallback((function(e,t,n){var r=e.values[n],a=t.values[n];return Object(D.compare)(r,a)}),[]),Me=a.a.useMemo((function(){return{Header:"Year",className:"centered-column",accessor:function(e){return e.basic_information.year},Cell:function(e){var t=e.value,n=e.row.original;return Object(N.jsx)(w.a,{children:function(){var e=m.masterDetail(n,"year",void 0).get(),r=U("release-year",_r[e.status]),a=t&&Object(N.jsx)("span",{className:r,children:t});if("ready"===e.status){var i=e.value&&Object(N.jsx)("span",{className:"master-year",children:e.value});return a?i?t!==e.value?Object(N.jsxs)(N.Fragment,{children:[i,Object(N.jsx)("br",{}),a]}):i:a:i||Object(N.jsx)("span",{className:r,children:"unknown"})}return Object(N.jsxs)(N.Fragment,{children:[a||Object(N.jsx)("span",{className:r,children:"unknown"}),e.refresh&&Object(N.jsxs)(N.Fragment,{children:[" ",Object(N.jsx)(re.y,{onClick:e.refresh})]})]})}})},sortType:ne("Year")}}),[ne,m]),Ge=a.a.useMemo((function(){return{Header:"Type",className:"minimal-column",accessor:function(e){return e.basic_information.formats},Cell:function(e){var t=e.row.original,n=e.value;return Object(N.jsxs)(N.Fragment,{children:[Tn(t)?Object(N.jsx)(re.n,{className:"cd",title:"CD"}):Object(N.jsx)(re.n,{className:"vinyl",title:"Vinyl"}),O()(Ze(n).map((function(e){return at(e,!0)}))).filter((function(e){var t=e.kind,n=e.tag;return t===pe.format&&"CD"!==n})).map((function(e,t){var n=e.tag;return Object(N.jsx)(a.a.Fragment,{children:fe(n)},t)}))]})},sortType:ne("Type")}}),[ne]),Ue=a.a.useMemo((function(){return{Header:"Label",className:"centered-column",accessor:function(e){return function(e){return Q()(e,"id")}(e.basic_information.labels)},Cell:function(e){var t=e.value;return Object(N.jsx)(N.Fragment,{children:t.map((function(e,t){return Object(N.jsx)(Pt,{label:e,hq:!0},t)}))})},sortType:ne("Label")}}),[ne]),$e=a.a.useMemo((function(){return{Header:Object(N.jsx)(N.Fragment,{children:"\xa0"}),id:"Cover",className:"minimal-column",accessor:function(e){return Object(N.jsx)(Ne,{href:Gr(e),children:Object(N.jsx)("img",{className:"cover",src:e.basic_information.thumb,width:64,alt:"Cover"})})}}}),[]),Ve=a.a.useMemo((function(){return{Header:Rr,className:"col-md-2 col-lg-3",accessor:function(e){var t=e.instance_id,n=e.basic_information;return{artists:n.artists,title:n.title,instance_id:t}},Cell:function(e){var t=e.value;return Object(N.jsx)(Yn,Object(F.a)({},t))},sortType:Te}}),[Te]),He=a.a.useMemo((function(){return{Header:"Rating",className:"minimal-column",accessor:function(e){return Object(N.jsx)(Xn,{row:e})},sortType:Ae}}),[Ae]),We=a.a.useMemo((function(){return{Header:"Location",className:"minimal-column multi-capable",Cell:function(e){var t=e.row;return Object(N.jsx)(Ln,{item:t.original})},sortType:ie}}),[ie]),Je=a.a.useMemo((function(){return{Header:"Tags",className:"col-md-2",accessor:function(e){return X(e)},Cell:function(e){var t=e.value;return Object(N.jsx)(w.a,{render:function(){var e=t.get().map((function(e){return Object(N.jsxs)("span",{children:[Object(N.jsx)(ve,Object(F.a)({},e))," "]},e.kind+e.tag)}));return Object(N.jsx)("div",{className:"d-inline d-flex-column",children:e})}})},sortType:Pe}}),[Pe,X]);J()("collectionTableColumns",{coverColumn:$e,fieldColumns:Ie,formatColumn:Ge,labelColumn:Ue,locationColumn:We,ratingColumn:He,releaseColumn:Ve,tagsColumn:Je,yearColumn:Me});var Xe=a.a.useMemo((function(){return[$e,Ve,Me,Ue,Ge,He].concat(Object(L.a)(Ie),[We,Je])}),[$e,Ie,Ge,Ue,We,He,Ve,Je,Me]),Ye=a.a.useCallback((function(e){if(se(e))return"sold"}),[se]),Qe=Object(o.default)("session",[c,"selection"],[]),et=Object(s.a)(Qe,2),tt=et[0],nt=et[1],rt=a.a.useRef(!0),it=a.a.useState(),dt=Object(s.a)(it,2),ft=dt[0],bt=dt[1],jt=a.a.useMemo((function(){return function(e){return Object(N.jsx)(Nn,{item:e})}}),[]),mt=a.a.useMemo((function(){return function(e){return e.instance_id.toString()}}),[]),gt={columns:Xe,detail:jt,rowClassName:Ye,selectedRows:ft,setSelectedRows:bt,getRowId:mt};a.a.useEffect((function(){rt.current||nt(K()(ft,"instance_id"))}),[ft,nt]),a.a.useMemo((function(){return Object(f.l)((function(){if(rt.current){var e=O()(tt.map((function(e){return d.get(e)})));bt(e),e.length===tt.length&&(rt.current=!1)}}))}),[d,tt]),J()("collectionTableData",{collection:d,collectionSubset:i,lists:j,lpdb:m});var Ot=a.a.useMemo((function(){return Object(f.m)((function(){var e,t=Object(M.a)(ze(j));try{var n=function(){var t=e.value,n=t.definition.description.split("\n");t.items.forEach((function(e){var t=null===m||void 0===m?void 0:m.entriesForRelease(e.id);if(null===t||void 0===t?void 0:t.length){var r=e.comment,a=Ir.bind(null,r);Object(f.F)((function(){var e,r=Object(M.a)(t);try{var i=function(){var t=e.value;t=null===m||void 0===m?void 0:m.collection.get(t.instance_id),n.forEach((function(e){$.a.apply(t,e,a)}))};for(r.s();!(e=r.n()).done;)i()}catch(c){r.e(c)}finally{r.f()}}))}}))};for(t.s();!(e=t.n()).done;)n()}catch(r){t.e(r)}finally{t.f()}return null!==i&&void 0!==i?i:d.values()}))}),[d,i,j,m]),yt=a.a.useState(),xt=Object(s.a)(yt,2),kt=xt[0],St=xt[1];a.a.useMemo((function(){return Object(f.l)((function(){St(Ot.get().find((function(e){return e.instance_id===g})))}))}),[Ot,g]);var wt=a.a.useState(!0),Ct=Object(s.a)(wt,2),Et=Ct[0],_t=Ct[1],Nt=a.a.useMemo((function(){var e=[];return Object.entries(P).forEach((function(t){var n=Object(s.a)(t,2),r=n[0];void 0===n[1]&&e.push(Be[r])})),e}),[P]);return Object(N.jsxs)(N.Fragment,{children:[Et&&Nt.length>0&&Nt.length<8&&Object(N.jsxs)(te.a,{className:"m-5",show:Et,onClose:_t.bind(null,!1),children:[Object(N.jsx)(te.a.Header,{children:"Custom Fields Enable More Functionality"}),Object(N.jsx)(te.a.Body,{className:"pb-2",children:Nt.map((function(e,t){return Object(N.jsx)("div",{children:fe(e)},t)}))})]}),ft&&ft.length>0&&Object(N.jsx)(In.Provider,{value:{selection:ft},children:Object(N.jsx)("div",{className:"multi",children:Object(N.jsx)(Sr,Object(F.a)({pager:!1,data:ft},gt))})}),Object(N.jsx)(w.a,{children:function(){return Object(N.jsx)(Sr,Object(F.a)({sessionKey:i?void 0:"Collection",search:n,filter:r,goto:kt,data:Object(L.a)(Ot.get()),mnemonic:Z},gt))}})]})}function Ar(){var e=Fe().mediaConditionId;return a.a.useCallback((function(t){return e?st(t,e):void 0}),[e])}function Pr(){var e=Fe().sleeveConditionId;return a.a.useCallback((function(t){return e?st(t,e):void 0}),[e])}function Mr(e){var t=e.kind,n=e.item,r=a.a.useContext(ue.a),i=r.client,c=r.cache,s=Fe(),o=s.mediaConditionId,u=s.sleeveConditionId,l=a.a.useMemo((function(){return"media"===t?$e:Ve}),[t]),d="media"===t?o:u;return void 0===d?null:Object(N.jsx)(w.a,{children:function(){var e=st(n.notes,d),t=!!e&&xe(e);e=e?ke(e):e;var r=t?{onClick:J.a}:{};return Object(N.jsxs)(ee.a,{onSelect:function(e){i&&e&&Se(ct(n.notes,d),"value",e,i.editCustomFieldForInstance(n.folder_id,n.id,n.instance_id,d,e)).then((function(){null===c||void 0===c||c.clear(pt(n))}))},children:[Object(N.jsx)(ee.a.Toggle,Object(F.a)(Object(F.a)({as:"div",className:U("badge","bg-"+He(e),t&&"disabled","no-toggle")},r),{},{children:ht(e)||Object(N.jsx)(N.Fragment,{children:"\xa0"})})),Object(N.jsx)(ee.a.Menu,{children:l.map((function(t){return Object(N.jsx)(ee.a.Item,{eventKey:t,active:e===t,children:t},t)}))})]})}})}function Lr(e){return void 0===e.value?"":"".concat(function(e){var t;switch(e){case u.a.USD:t="$";break;case u.a.GBP:t="\xa3";break;case u.a.EUR:t="\u20ac";break;case u.a.CAD:t="C$";break;case u.a.AUD:t="A$";break;case u.a.JPY:t="\xa5";break;case u.a.CHF:t=u.a.CHF;break;case u.a.MXN:t=u.a.MXN;break;case u.a.BRL:t=u.a.BRL;break;case u.a.NZD:t=u.a.NZD;break;case u.a.SEK:t=u.a.SEK;break;case u.a.ZAR:t=u.a.ZAR;break;default:t=null!==e&&void 0!==e?e:"?"}return t}(e.currency)).concat(e.value.toFixed(2))}function Fr(e){var t=e.row,n=e.noteId,r=e.contextDropdownMenu,i=a.a.useContext(ue.a),c=i.client,o=i.setError,u=a.a.useState(!1),l=Object(s.a)(u,2),d=l[0],f=l[1],h=a.a.useState(),p=Object(s.a)(h,2),v=p[0],b=p[1],j=a.a.useState(!1),m=Object(s.a)(j,2),g=m[0],O=m[1],y=a.a.useRef(),x=a.a.useRef(!1),k=function(e){x.current=e,O(e)},S=vt();a.a.useMemo((function(){if(g){var e=J.a,t=setInterval((function(){y.current&&x.current&&(x.current=!1,y.current.focus()),x.current||e()}));return e=function(){return clearInterval(t)}}}),[g]);var C=a.a.useRef(null);return Object(ae.a)(C,(function(){return f(!1)}),{disabled:!d}),Object(N.jsx)(w.a,{render:function(){var a,i,s=t.folder_id,u=t.id,l=t.instance_id,h=t.notes,p=ct(h,n),j=function(){var e=Object(P.a)(A.a.mark((function e(){var r;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:void 0!==v?(r=c.editCustomFieldForInstance(s,u,l,n,v),Se(p,"value",v,r).then((function(){b(void 0),k(!1),S(t)}),(function(e){b(void 0),k(!1),o(e)}))):k(!1);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=null!==(a=p.value)&&void 0!==a?a:"";if(i=e.as&&!g?Object(N.jsx)(en,{className:"hover-lined",src:ke(m),uri:!1,prewrap:!0,onClick:k.bind(null,!0)}):Object(N.jsx)(ne.a.Control,Object(F.a)(Object(F.a)({ref:y},Y()(e,"row","noteId","client","cache","setError","contextDropdownMenu")),{},{className:"hover-lined",disabled:xe(m),value:null!==v&&void 0!==v?v:ke(m),onChange:function(e){var t=e.target.value;return b(t)},onBlur:j})),r&&!g){var O=i;i=Object(N.jsxs)(ee.a,{show:d,children:[O,Object(N.jsx)("div",{ref:C,children:r})]})}return Object(N.jsx)("div",{className:e.as?"flex flex-column":void 0,onContextMenu:g||!r?void 0:function(e){e.preventDefault(),f(!0)},children:i})}})}var Dr=["Clean","Entry","Replace","Sell","Sleeve","Spine","Own Sleeve"];function Br(e){var t=e.row,n=e.noteId,r=a.a.useContext(ue.a),i=r.client,c=r.setError,s=vt(),o=a.a.useMemo((function(){if(!n)return Object(f.B)([]);var e=st(t.notes,n);return e?(e=ke(e),Object(f.B)(x()(e.split("\n").map((function(e){var t=e.match(Object(R.a)(/^\[([ X])\] (.*)$/,{checked:1,task:2})),n=e,r=!1;return(null===t||void 0===t?void 0:t.groups)&&(n=t.groups.task,r="X"===t.groups.checked),{task:n,checked:r}})),"task"))):Object(f.B)([])}),[n,t.notes]),u=t.folder_id,l=t.id,d=t.instance_id,h=t.notes,p=ct(h,n);a.a.useMemo((function(){return Object(f.D)((function(){return o.map((function(e){var t=e.checked,n=e.task;return"[".concat(t?"X":" ","] ").concat(n)})).join("\n")}),function(){var e=Object(P.a)(A.a.mark((function e(r){var a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log({folder_id:u,release_id:l,instance_id:d,notes:h}),console.log("New value: ".concat(r)),void 0!==r&&(a=i.editCustomFieldForInstance(u,l,d,n,r),Se(p,"value",r,a).then((function(){s(t)}),(function(e){c(e)})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[s,i,u,d,p,n,h,l,t,c,o]);var v=Dr.filter((function(e){return!o.find((function(t){return t.task===e}))}));return Object(N.jsx)(w.a,{render:function(){var e,t=null!==(e=p.value)&&void 0!==e?e:"";return Object(N.jsxs)(N.Fragment,{children:[o.map((function(e){var n=e.task,r=e.checked;return Object(N.jsx)(nn.a,{disabled:xe(t),label:n,value:r,setValue:Object(f.k)((function(t){e.checked=t}))},n)})),v&&Object(N.jsxs)(ee.a,{onSelect:Object(f.k)((function(e){e&&o.push({task:e,checked:!1})})),children:[Object(N.jsx)(ee.a.Toggle,{as:"div",className:"no-toggle",children:Object(N.jsx)(re.x,{})}),Object(N.jsx)(ee.a.Menu,{children:v.map((function(e){return Object(N.jsx)(ee.a.Item,{eventKey:e,children:e},e)}))})]})]})}})}function Gr(e){var t=e.id;return"https://www.discogs.com/release/".concat(t)}var Ur=function(){var e=m.g(),t=e.artistId,n=e.artistName,r=a.a.useContext(ue.a),i=r.lpdb,c=r.collection,s=Number(t),o=i?i.artist(s,n):void 0,u=o&&i?i.store.roles(o.id):void 0,l=Wt(c.values,(function(e){var t=e.basic_information.artists,n=e.id;return!!t.find((function(e){return e.id===s}))||!!(null===u||void 0===u?void 0:u.find((function(e){return"object"===typeof e.release&&e.release.id===n})))}));if(!isFinite(s)||!i||!o||!u)return null;var d=Object(f.m)((function(){return c.values().filter((function(e){return e.basic_information.artists.find((function(e){return e.id===s}))}))}));return Object(N.jsx)(w.a,{children:function(){return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(Dt,{title:function(e){return Object(N.jsx)("h2",{children:Object(N.jsxs)(N.Fragment,{children:[null!==n&&void 0!==n?n:o.name,e]})})},content:function(){return Object(N.jsxs)(N.Fragment,{children:[o.profile&&Object(N.jsx)(en,{src:o.profile,uri:o.uri}),Object(N.jsxs)("dl",{children:[Object(N.jsx)("dt",{children:"Roles"}),Object(N.jsx)("dd",{children:S()(O()(u.map((function(e){return e.role})))).sort().join(", ")}),Object(N.jsx)("dt",{children:"Primary Releases"}),Object(N.jsx)("dd",{children:d.get().sort((function(e,t){return e.basic_information.title.localeCompare(t.basic_information.title)})).map((function(e,t){return Object(N.jsx)("li",{children:Object(N.jsx)(I,{item:e})},t)}))})]}),Object(N.jsx)(E.a,{onClick:o.refresh,children:"Refresh"})]})}}),Object(N.jsx)(Tr,{collectionSubset:l,storageKey:"artist-".concat(s)})]})}})},zr=Object(C.a)((function(){var e=a.a.useContext(ue.a).lpdb,t=m.h();return e?(e.artistStore.loadAll(),e.releaseStore.loadAll(),Object(N.jsx)(N.Fragment,{children:x()(e.artistStore.all,"name").map((function(e){var n=e.name,r=e.id;return Object(N.jsx)("div",{children:Object(N.jsx)(j.b,{to:"".concat(t.path,"/").concat(r,"/").concat(n),children:n})},r)}))})):null}));function $r(){var e=m.h();return Object(N.jsx)("div",{children:Object(N.jsxs)(m.c,{children:[Object(N.jsx)(m.a,{path:Vr(e.path),children:Object(N.jsx)(Ur,{})}),Object(N.jsx)(m.a,{path:e.path,children:Object(N.jsx)(zr,{})})]})})}function Vr(e){return["".concat(e,"/:artistId"),"".concat(e,"/:artistId/:artistName")]}function Hr(){var e=a.a.useContext(ue.a),t=e.cache,n=e.client,r=a.a.useState(),i=Object(s.a)(r,2),c=i[0],o=i[1],u=a.a.useState(1),l=Object(s.a)(u,2),d=l[0],f=l[1],h=a.a.useCallback((function(){var e=f.bind(null,d+1);o(null===t||void 0===t?void 0:t.clear(le.e).then(e,e))}),[d,t]),v=a.a.useState({status:"pending"}),j=Object(s.a)(v,2),m=j[0],g=j[1],O=a.a.useState(!1),y=Object(s.a)(O,2),x=y[0],k=y[1],S=a.a.useMemo((function(){return"ready"===m.status?Me(m.value.profile).values:void 0}),[m]);a.a.useEffect((function(){if(console.log("Promise: ".concat(c)),c){var e=o.bind(null,(function(e){return c===e?void 0:e}));c.then(e,e)}}),[c,o]),a.a.useEffect((function(){if(n){var e=n.getProfile().then((function(e){g({status:"ready",value:e,refresh:h}),k(!1)}),(function(e){return g({status:"error",error:e,refresh:h})}));o(e)}}),[n,d]);var w=a.a.useState(!1),C=Object(s.a)(w,2),_=C[0],I=C[1],R=a.a.useState(),T=Object(s.a)(R,2),A=T[0],P=T[1];return a.a.useEffect((function(){x&&void 0===A&&"ready"===m.status&&P(m.value.profile)}),[x,A,m]),Object(N.jsxs)(N.Fragment,{children:[Object(N.jsxs)(b.a,{children:[Object(N.jsx)(p.a,{children:"ready"===m.status&&Object(N.jsx)(ne.a,{children:Object(N.jsxs)(ne.a.Group,{children:[Object(N.jsx)(ne.a.Label,{children:"Profile"}),Object(N.jsxs)(se.a,{children:[Object(N.jsxs)(se.a.Body,{onClick:k.bind(null,!0),children:[x&&!_?Object(N.jsx)(ne.a.Control,{as:"textarea",rows:10,value:A,onChange:function(e){var t=e.target.value;return P(t)}}):Object(N.jsx)(en,{src:null!==A&&void 0!==A?A:m.value.profile,uri:m.value.uri}),A&&Object(N.jsxs)(ne.a.Group,{children:[Object(N.jsx)(ne.a.Label,{children:"Test"}),Object(N.jsx)(ne.a.Control,{onChange:function(e){return A&&P(Le(A,"test",e.target.value))}})]})]}),x&&Object(N.jsxs)(se.a.Footer,{children:[Object(N.jsx)(E.a,{variant:_?"secondary":"outline-secondary",onClick:I.bind(null,!_),children:"Preview"}),Object(N.jsx)(E.a,{disabled:A===m.value.profile,onClick:function(){P(void 0),k(!1)},children:"Revert"}),Object(N.jsx)(E.a,{disabled:A===m.value.profile,onClick:function(){return o(null===n||void 0===n?void 0:n.editProfile({profile:A}).then(h))},children:"Submit"})]})]})]})})}),Object(N.jsxs)(p.a,{children:[S&&Object(N.jsx)(mt.a,{src:S,collapsed:!1}),"ready"===m.status&&Object(N.jsx)(mt.a,{src:m.value,collapsed:!0})]})]}),Object(N.jsx)(b.a,{children:Object(N.jsx)(p.a,{children:Object(N.jsx)(At,{remote:m})})})]})}var qr=function(){var e,t,n,r,i,c,u=a.a.useContext(ue.a),l=u.cache,d=u.client,h=u.folders,v=u.collection,j=Object(o.default)("session",["folders","checked"],[]),m=Object(s.a)(j,2),g=m[0],y=m[1],k=a.a.useMemo((function(){return v.values().filter((function(e){var t=e.instance_id;return Object(D.arraySetHas)(g,t)}))}),[g,v]),S=mn(),w=a.a.useMemo((function(){var e=0;if(h){var t,n=Object(M.a)(h);try{for(n.s();!(t=n.n()).done;){var r=ln(t.value.name);r&&r[1]>e&&(e=r[1])}}catch(a){n.e(a)}finally{n.f()}}return e}),[h]),C=a.a.useMemo((function(){var e;return ln(null===(e=S.openListed)||void 0===e?void 0:e.name)}),[null===(e=S.openListed)||void 0===e?void 0:e.name]),_=a.a.useMemo((function(){return C&&"Box, Listed (".concat(C[0],")")}),[C]),I=a.a.useMemo((function(){return"- Listed (B".concat(w+1,")")}),[w]),R=a.a.useMemo((function(){var e;return ln(null===(e=S.openRemain)||void 0===e?void 0:e.name)}),[null===(t=S.openRemain)||void 0===t?void 0:t.name]),T=a.a.useMemo((function(){return R&&"Box, Remain (".concat(R[0],")")}),[R]),A=a.a.useMemo((function(){return"- Remain (B".concat(w+1,")")}),[w]),P=fn(),B=Object(s.a)(P,2),G=B[0],U=B[1],z=a.a.useCallback((function(e,t,n){if(e&&t&&e.name!==t&&t!==n){var r=null===d||void 0===d?void 0:d.editFolder(e.id,t),a=n&&(null===d||void 0===d?void 0:d.createFolder(n));U(Promise.all(O()([r,a])).then((function(){return null===l||void 0===l?void 0:l.clear(le.c,!0)})))}}),[l,d,U]);return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(b.a,{children:Object(N.jsx)(p.a,{children:Object(N.jsxs)("dl",{children:[Object(N.jsxs)("dt",{children:["Open Listed: ",null===(n=S.openListed)||void 0===n?void 0:n.name," (",null===(r=S.openListed)||void 0===r?void 0:r.count," items)"]}),Object(N.jsx)("dd",{children:Object(N.jsxs)(rn.a,{children:[Object(N.jsx)(rn.a.Text,{children:"Rename to"}),Object(N.jsx)(rn.a.Text,{children:Object(N.jsx)("code",{children:_})}),Object(N.jsx)(rn.a.Text,{children:"and create"}),Object(N.jsx)(rn.a.Text,{children:Object(N.jsx)("code",{children:I})}),Object(N.jsx)(E.a,{disabled:void 0!==G,onClick:S.openListed&&_?z.bind(null,S.openListed,_,I):void 0,children:"Go"})]})}),Object(N.jsxs)("dt",{children:["Open Remain: ",null===(i=S.openRemain)||void 0===i?void 0:i.name," (",null===(c=S.openRemain)||void 0===c?void 0:c.count," items)"]}),Object(N.jsx)("dd",{children:Object(N.jsxs)(rn.a,{children:[Object(N.jsx)(rn.a.Text,{children:"Rename to"}),Object(N.jsx)(rn.a.Text,{children:Object(N.jsx)("code",{children:T})}),Object(N.jsx)(rn.a.Text,{children:"and create"}),Object(N.jsx)(rn.a.Text,{children:Object(N.jsx)("code",{children:A})}),Object(N.jsx)(E.a,{disabled:void 0!==G,onClick:S.openRemain&&T?z.bind(null,S.openRemain,T,A):void 0,children:"Go"})]})})]})})}),Object(N.jsx)(b.a,{children:Object(N.jsxs)(p.a,{children:[Object(N.jsxs)(ee.a,{className:"d-inline me-2",onSelect:function(e){var t=Number(e);if(d&&e&&!isNaN(t)){var n=k.map((function(e){var n=d.moveReleaseInstanceToFolder(e.folder_id,e.id,e.instance_id,t).then((function(){return e.folder_id=t}));return Se(e,"folder_id",t,n),n}));Promise.all(n).then(Object(f.k)((function(){null===l||void 0===l||l.clear(pt.apply(void 0,Object(L.a)(k)),!0)})))}},children:[Object(N.jsxs)(ee.a.Toggle,{children:["Move ",k.length," items\u2026"]}),Object(N.jsx)(ee.a.Menu,{children:null===h||void 0===h?void 0:h.map((function(e,t){var n=Object(N.jsxs)(ee.a.Item,{eventKey:e.id,children:[e.name," (",e.count,")"]},e.id);return t&&h[t-1].name.split("(")[0]!==e.name.split("(")[0]&&(n=Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(ee.a.Divider,{}),n]})),n}))})]}),Object(N.jsx)(E.a,{className:"me-2",variant:"secondary",disabled:0===g.length,onClick:y.bind(null,[]),children:"Reset"})]})}),Object(N.jsx)(b.a,{children:x()(h,(function(e){var t;return null!==(t=je(e.name).label)&&void 0!==t?t:e.name})).map((function(e){var t,n=v.values().filter((function(t){return t.folder_id===e.id}));return n.sort(Kr),Object(N.jsx)(p.a,{xs:4,children:Object(N.jsxs)(se.a,{children:[Object(N.jsx)(se.a.Header,{children:null!==(t=je(e.name).label)&&void 0!==t?t:e.name}),Object(N.jsx)(se.a.Body,{children:n.map((function(e){return Object(N.jsxs)(ne.a.Check,{id:"check"+e.instance_id,className:"text-nowrap",children:[Object(N.jsx)(ne.a.Check.Input,{checked:Object(D.arraySetHas)(g,e.instance_id),onChange:function(){Object(D.arraySetToggle)(g,e.instance_id),y(Object(L.a)(g))}}),Object(N.jsxs)(ne.a.Check.Label,{style:{display:"flex"},children:[Object(N.jsx)("div",{style:{width:"1rem"},children:e.rating}),Object(N.jsx)(Yn,Object(F.a)({as:"div",instance_id:e.instance_id},e.basic_information))]})]},e.instance_id)}))})]})},e.id)}))}),Object(N.jsx)(b.a,{children:Object(N.jsx)(Dt,{title:function(e){return Object(N.jsx)(p.a,{children:Object(N.jsxs)("h4",{children:["Folder Sets ",fe(e)]})})},children:Object.entries(S).map((function(e){var t=Object(s.a)(e,2),n=t[0],r=t[1];return Object(N.jsxs)(p.a,{md:4,children:[Object(N.jsx)("h4",{children:n}),r&&Object(N.jsx)(mt.a,{src:r},n)]})}))})})]})};function Kr(e,t){var n=Object(D.compare)(e.basic_information.artists,t.basic_information.artists,{emptyLast:!0,toString:function(e){return e.name},library:!0});return 0!==n?n:Object(D.compare)(e.basic_information.title,t.basic_information.title,{emptyLast:!0,library:!0})}function Wr(){var e=a.a.useContext(ue.a).cache,t=a.a.useState(),n=Object(s.a)(t,2),r=n[0],i=n[1],c=a.a.useState(),o=Object(s.a)(c,2),u=o[0],l=o[1];return a.a.useMemo((function(){return Object(f.l)((function(){return l(e?{version:e.version,cache:e}:void 0)}))}),[e]),a.a.useEffect((function(){var e;null===u||void 0===u||null===(e=u.cache)||void 0===e||e.keys(le.a).then((function(e){i(x()(e,(function(e){var t;return Number(null===(t=e.match(/page=(\d+)/))||void 0===t?void 0:t.pop())})).pop())}))}),[u]),a.a.useCallback((function(){Promise.all([null===e||void 0===e?void 0:e.clear({url:r}),null===e||void 0===e?void 0:e.clear(le.d)]).then((function(){return null===e||void 0===e?void 0:e.clear(le.c,!0)}))}),[e,r])}function Jr(){var e=a.a.useContext(ue.a).client,t=a.a.useState(""),n=Object(s.a)(t,2),r=n[0],i=n[1],c=a.a.useState(""),o=Object(s.a)(c,2),u=o[0],l=o[1],d=Wr(),f=fn(),h=Object(s.a)(f,2),v=h[0],j=h[1],m=a.a.useState(),g=Object(s.a)(m,2),O=g[0],y=g[1],x=a.a.useCallback((function(){return null===e||void 0===e?void 0:e.searchRelease(r,{barcode:u}).then(y,y)}),[u,e,r]);return Object(N.jsx)(N.Fragment,{children:Object(N.jsxs)(ne.a,{children:[Object(N.jsxs)(ne.a.Group,{className:"mb-2",children:[Object(N.jsx)(ne.a.Label,{children:"Search"}),Object(N.jsx)(ne.a.Control,{value:r,onChange:function(e){var t=e.target.value;return i(t)}}),Object(N.jsx)(ne.a.Label,{children:"Barcode"}),Object(N.jsx)(ne.a.Control,{value:u,onChange:function(e){var t=e.target.value;return l(t)}})]}),Object(N.jsx)(E.a,{disabled:void 0!==v,onClick:x,children:"Go"}),O&&O.results.map((function(t){var n;return Object(N.jsxs)(b.a,{children:[Object(N.jsx)(p.a,{className:"minimal-column",children:Object(N.jsx)(Ne,{href:"https://discogs.com".concat(t.uri),children:Object(N.jsx)("img",{className:"cover",src:t.thumb,width:64,height:64,alt:"Cover"})})}),Object(N.jsx)(p.a,{children:t.title}),Object(N.jsx)(p.a,{children:t.year}),Object(N.jsx)(p.a,{children:null===(n=t.format)||void 0===n?void 0:n.join(" ")}),Object(N.jsx)(p.a,{children:t.country}),Object(N.jsx)(p.a,{children:Object(N.jsx)(E.a,{disabled:t.user_data.in_collection||void 0!==v,onClick:function(){return j(null===e||void 0===e?void 0:e.addReleaseToFolder(t.id).then(d))},children:"Add to Collection"})})]})})),O&&Object(N.jsx)(mt.a,{src:O})]})})}function Xr(e){var t=e.token,n=e.setToken,r=Object(m.h)(),a=Object(o.default)("session",r.path,null),i=Object(s.a)(a,2),c=i[0],u=i[1],l=Object(wn.useRoonId)(),d=Object(s.a)(l,2),f=d[0],h=d[1];return Object(N.jsx)(v.a,{fluid:!1,children:Object(N.jsxs)(Ut.a,{id:"controlled-tab-example",activeKey:null!==c&&void 0!==c?c:void 0,onSelect:u,className:"mb-3",children:[Object(N.jsx)(zt.a,{eventKey:"home",title:"Auth",children:Object(N.jsxs)(ne.a,{children:[Object(N.jsxs)(ne.a.Group,{className:"mb-2",children:[Object(N.jsx)(ne.a.Label,{children:"User Token"}),Object(N.jsx)(ne.a.Control,{type:"text",value:t,onChange:function(e){var t=e.target.value;return n(t)}})]}),Object(N.jsxs)(ne.a.Group,{className:"mb-2",children:[Object(N.jsx)(ne.a.Label,{children:"Roon Extension Identitfier"}),Object(N.jsx)(ne.a.Control,{type:"text",value:f,onChange:function(e){var t=e.target.value;return h(t)}})]})]})}),Object(N.jsx)(zt.a,{eventKey:"profile",title:"Profile",children:Object(N.jsx)(Hr,{})}),Object(N.jsx)(zt.a,{eventKey:"folders",title:"Folders",children:Object(N.jsx)(qr,{})}),Object(N.jsx)(zt.a,{eventKey:"contact",title:"Contact",disabled:!0,children:"Contact"}),Object(N.jsx)(zt.a,{eventKey:"testbed",title:"Testbed",children:Object(N.jsx)(Jr,{})})]})})}var Yr=n(435),Zr=n.n(Yr),Qr=n(436),ea=n.n(Qr),ta=Object(C.a)((function(){var e,t=a.a.useContext(ue.a),n=t.collection,r=t.lpdb,i=t.cache,c=t.lists;if(!r||!i)return null;var s=Q()(n.values(),"id").map((function(e){return e.id})),o=r.releaseStore.known,u=s.filter((function(e){return!o.has(e)})),l=u[0],d=r.releaseStore.all.filter((function(e){return e.stale})),h=d[0];return Object(N.jsxs)(b.a,{children:[Object(N.jsx)(p.a,{children:Object(N.jsxs)(se.a,{children:[Object(N.jsx)(se.a.Header,{children:"Elephant Data"}),Object(N.jsxs)(se.a.Body,{children:[Object(N.jsx)(b.a,{children:Object(N.jsx)(p.a,{children:Object(N.jsx)(le.b,{})})}),Object(N.jsx)("h5",{children:"Releases"}),Object(N.jsxs)("p",{children:["Loaded ",r.releaseStore.count.loaded," / Stored ",null!==(e=r.releaseStore.count.all)&&void 0!==e?e:"?"," / Known ",s.length]}),Object(N.jsx)("hr",{}),l&&Object(N.jsxs)("p",{children:["First unstored: ",Object(N.jsx)(E.a,{onClick:function(){return r.releaseStore.get(l)},children:l})]}),Object(N.jsx)("hr",{}),u.length?Object(N.jsxs)(E.a,{onClick:function(){return u.forEach((function(e){return r.releaseStore.get(e)}))},children:["Get all ",u.length," unstored releases"]}):null,Object(N.jsx)("hr",{}),Object(N.jsx)(E.a,{onClick:function(){return r.releaseStore.loadAll()},children:"Load All Releases"}),Object(N.jsx)("hr",{}),h&&Object(N.jsxs)("p",{children:["First stale: ",Object(N.jsxs)(E.a,{onClick:function(){return h.refresh()},children:[h.title," @ version ",h.version]})]}),d.length?Object(N.jsxs)(E.a,{onClick:function(){return d.forEach((function(e){return e.refresh()}))},children:["Update all ",d.length," stale releases"]}):null,Object(N.jsx)("hr",{}),Object(N.jsx)(b.a,{children:ze(c).map((function(e){return Object(N.jsx)(p.a,{children:Object(N.jsxs)(se.a,{children:[Object(N.jsxs)(se.a.Header,{title:e.definition.description,children:[e.definition.name," ",Object(N.jsx)(Zn.a,{children:e.items.length}),e.definition.resource_url&&Object(N.jsxs)(N.Fragment,{children:[" ",Object(N.jsx)(re.y,{onClick:function(){return i.clear({url:e.definition.resource_url})}})]})]}),Object(N.jsx)(se.a.Body,{children:e.items.map((function(e){var t=e.id,n=r.collection.values().find((function(e){var n=e.id;return t===n}));if(n)return Object(N.jsx)("li",{children:Object(N.jsx)(I,{item:n})},t);var a=r.releaseStore.get(t).title;return Object(N.jsx)("li",{children:a},t)}))})]})},e.definition.id)}))})]})]})}),Object(N.jsx)(p.a,{children:Object(N.jsxs)(se.a,{children:[Object(N.jsx)(se.a.Header,{children:"Request Tracker"}),Object(N.jsxs)(se.a.Body,{children:[Object(N.jsxs)(ne.a,{children:[Object(N.jsxs)(ne.a.Group,{children:[Object(N.jsx)(ne.a.Label,{children:"Simultaneous Request Limit"}),Object(N.jsx)(ne.a.Control,{type:"number",min:0,max:i.requestPerMinuteCap.value,value:i.simultaneousRequestLimit.value,onChange:Object(f.k)((function(e){var t=e.target.value;return i.simultaneousRequestLimit.value=Number(t)}))})]}),Object(N.jsxs)(ne.a.Group,{children:[Object(N.jsx)(ne.a.Label,{children:"Request Per Minute Cap"}),Object(N.jsx)(ne.a.Control,{type:"number",min:0,max:120,value:i.requestPerMinuteCap.value,onChange:Object(f.k)((function(e){var t=e.target.value;return i.requestPerMinuteCap.value=Number(t)}))})]}),Object(N.jsxs)(ne.a.Group,{children:[Object(N.jsx)(ne.a.Label,{children:"Error Rate Limit"}),Object(N.jsx)("div",{children:Object(N.jsxs)(ne.a.Text,{children:[i.rpm[1]," rpm"]})})]})]}),Object(N.jsx)("h5",{children:"Cache Checks"}),Object(N.jsx)("div",{children:i.dbInflight.map((function(e,t){return Object(N.jsx)(Zn.a,{children:ra(e)},t)}))}),Object(N.jsx)("hr",{}),Object(N.jsx)("h5",{children:"Pending Requests"}),Object(N.jsx)("div",{children:i.waiting.map((function(e,t){return Object(N.jsx)(Zn.a,{children:ra(e)},t)}))}),Object(N.jsx)("hr",{}),Object(N.jsx)("h5",{children:"Active Discogs Requests"}),Object(N.jsx)("ol",{children:i.inflight.map((function(e,t){var n=e.detail,r=e.start,a=Date.now();return Object(N.jsx)("li",{children:Object(N.jsxs)(Zn.a,{children:[ra(n)," (",Math.floor((a-r)/100)/10,"s)"]},t)},t)}))}),Object(N.jsx)("hr",{}),Object(N.jsx)("h5",{children:"Completed Requests"}),Object(N.jsx)("div",{children:i.history.reverse().map((function(e,t){var n=O()(K()(e,"end")),r=e.length-n.length;if(!n.length){if(!r)return;return Object(N.jsx)("div",{children:Object(N.jsxs)("h6",{children:["+",t,"m  +",r," in-flight"]})},t)}var a=ea()(n),i=Zr()(n),c=na(a),s=na(i);return Object(N.jsxs)("div",{children:[Object(N.jsxs)("h6",{children:["+",t,"m (",c,"-",s,")",r?" +".concat(r," in-flight"):""]}),Object(N.jsx)("ol",{children:e.map((function(e,t){var n=e.start,r=e.end,a=e.detail,i=e.error;return!!r&&Object(N.jsx)("li",{children:Object(N.jsxs)(Zn.a,{className:i?"text-danger":"text-muted",children:[ra(a)," (",(r-n)/1e3,") ",i&&i.message]})},t)}))})]},t)}))})]})]})})]})}));function na(e){return e?new Date(e).toLocaleTimeString(void 0,{minute:"numeric",second:"numeric"}):"?"}function ra(e){return e.replace("https://api.discogs.com/","")}var aa=n(41),ia=n(48),ca=n(441),sa=function(){function e(){Object(aa.a)(this,e),this.listeners=[],this.logEntries=Object(f.B)([]),Object(f.A)(this,{listeners:f.B,prune:f.k,track:f.k})}return Object(ia.a)(e,[{key:"track",value:function(e,t,n){var r=this,a={promise:n,detail:t,key:e,start:Date.now(),end:void 0,error:void 0};Object(f.A)(a,{detail:f.B,key:f.B,start:f.B,end:f.B,error:f.B});var i=Object(f.k)((function(e){delete a.promise,a.end=Date.now(),a.error=e,r.send("end",a)}));this.logEntries.push(a),n.then(i.bind(null,void 0),i),this.send("start",a)}},{key:"history",value:function(e,t){var n=this.logEntries.filter((function(t){return t.key===e}));if(!t)return n;var r=[],a=Date.now();return r[0]=this.inflight(e),n.forEach((function(e){var n;if(!r[0].includes(e)){var i=Math.floor((a-e.start)/t);(null!==(n=r[i])&&void 0!==n?n:r[i]=[]).push(e)}})),r}},{key:"inflight",value:function(e){return this.logEntries.filter((function(t){var n=t.key,r=t.end;return n===e&&!r}))}},{key:"prune",value:function(e){for(var t=Date.now()-e,n=this.logEntries.length-1;n>=0;--n){var r=this.logEntries[n].end;r&&r<t&&this.logEntries.splice(n,1)}}},{key:"send",value:function(e,t){this.listeners.forEach((function(n){try{n(e,t)}catch(n){console.error(n)}}))}}]),e}(),oa=window;function ua(e,t){var n=Object(f.B)({value:t},void 0,{name:e}),r=localStorage.getItem(e);return null!==r&&(n.value=r),Object(f.D)((function(){return"".concat(n.value)}),localStorage.setItem.bind(localStorage,e)),n}function la(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500,r=0,a=t();function i(){var e=Date.now();return e<r?a:(r=e+n,a=t())}return i}var da=function(){function e(){var t=this;Object(aa.a)(this,e),this.storage=void 0,this.cache=!0,this.bypass=!1,this.log=!1,this.version=0,this.waiting=[],this.pause=void 0,this.errorPause=0,this.unpause=void 0,this.pauseCheck=void 0,this.lastErrorTimestamp=ua("lastErrorTimestamp",0),this.simultaneousRequestLimit=ua("simultaneousRequestLimit",20),this.requestPerMinuteCap=ua("requestPerMinuteCap",50),this.checkRate=function(){var e=Object(s.a)(t.rpm,2),n=e[0],r=e[1],a=t.requestPerMinuteCap.value;if(r<a&&(a=r),n>=a||t.errorPause>Date.now()){if(void 0===t.unpause){t.pause=new Promise((function(e,n){t.log&&console.log("paused"),t.unpause=e}));var i=function(){t.log&&console.log("unpaused"),t.pause=void 0,t.unpause=void 0};t.pause.then(i,i),t.pauseCheck=setInterval(t.checkRate,1e3)}}else{t.unpause&&t.unpause();var c=t.pauseCheck;c&&(t.pauseCheck=void 0,clearInterval(c))}},this.rpmCache=la("rpm",(function(){var e,n,r=6e4,a=1,i=Date.now()-t.lastErrorTimestamp.value;return i<2*r&&(r=i,a=.1),[null!==(e=null===(n=t.tracker.history("discogs",r)[0])||void 0===n?void 0:n.length)&&void 0!==e?e:0,Math.floor(r/100*a)/10]})),this.inflightCache=la("inflight",(function(){return t.tracker.inflight("discogs")})),this.dbInflightCache=la("dbInflight",(function(){return t.tracker.inflight("idb").map((function(e){return e.detail}))})),this.historyCache=la("history",(function(){return t.tracker.prune(18e3),t.tracker.history("discogs",6e4)})),this.activeGets=new Map,this.priorityGets=new Map,this.get=function(){var e=Object(P.a)(A.a.mark((function e(n){var r,a,i,c,s,o,u,l,d,h,p,v,b=arguments;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i=b.length,c=new Array(i>1?i-1:0),s=1;s<i;s++)c[s-1]=b[s];if(o=null!==(r=null===(a=c[1])||void 0===a?void 0:a.method)&&void 0!==r?r:"GET",u=t.cache,l=t.bypass,d=t.log,h="object"===typeof c[0]?c[0].url:c[0],"GET"===o){e.next=20;break}h="".concat(o," ").concat(h),Object(f.F)(t.waiting.push.bind(t.waiting,h)),e.prev=7;case 8:if(t.checkRate(),void 0!==t.pause){e.next=12;break}return e.abrupt("break",16);case 12:return e.next=14,t.pause;case 14:e.next=8;break;case 16:return e.prev=16,Object(f.F)((function(){return Object(D.arraySetRemove)(t.waiting,h)})),e.finish(16);case 19:return e.abrupt("return",n());case 20:if(!t.activeGets.has(h)){e.next=23;break}return t.log&&console.log("Returning existing active request: ".concat(h)),e.abrupt("return",t.activeGets.get(h));case 23:return t.log&&console.log("Starting new active request for ".concat(h)),p=t.getInternal(n,h,d,l,u),t.activeGets.set(h,p),t.highPriorityKey(h)&&t.priorityGets.set(h,p),v=function(){t.log&&console.log("Active request completed for ".concat(h)),t.activeGets.get(h)===p&&(t.log&&console.log("Deleted cached promise: ".concat(h)),t.activeGets.delete(h)),t.priorityGets.get(h)===p&&(t.log&&console.log("Deleted cached priority promise: ".concat(h)),t.priorityGets.delete(h))},p.then(v,v),e.abrupt("return",p);case 30:case"end":return e.stop()}}),e,null,[[7,,16,19]])})));return function(t){return e.apply(this,arguments)}}(),this.getInternal=function(){var e=Object(P.a)(A.a.mark((function e(n,r,a,i,c){var s,o,u,l,d,h,p;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a&&console.log({key:r,cache:c,bypass:i,log:a}),s=3,o=0;case 3:0,Object(f.F)((function(){return t.waiting.push(r)})),e.prev=5;case 6:if(e.t0=!i,!e.t0){e.next=12;break}return e.next=11,t.getFromCache(r);case 11:e.t0=e.sent;case 12:if(!(u=e.t0)){e.next=16;break}return o&&t.log&&console.log("Returning cached value after wait filled it in: ".concat(r)),e.abrupt("return",u.data);case 16:t.checkRate();case 17:if(!t.priorityGets.size||t.priorityGets.has(r)){e.next=24;break}return o++,t.log&&console.log("Waiting for ".concat(t.priorityGets.size," higher-priority gets: ").concat(r)),e.next=22,Promise.all(t.priorityGets.values()).catch(J.a);case 22:e.next=17;break;case 24:if(!t.simultaneousRequestLimit.value){e.next=36;break}if(!((l=t.tracker.inflight("discogs")).length>=t.simultaneousRequestLimit.value)){e.next=33;break}return o++,t.log&&console.log("Waiting for the number of inflight requests (".concat(l.length,") to drop: ").concat(r)),e.next=31,Promise.any(l.map((function(e){return e.promise}))).catch(J.a);case 31:e.next=34;break;case 33:return e.abrupt("break",36);case 34:e.next=24;break;case 36:if(void 0!==t.pause){e.next=38;break}return e.abrupt("break",44);case 38:return o++,t.log&&console.log("Waiting #".concat(o,": ").concat(r)),e.next=42,t.pause.catch(J.a);case 42:e.next=6;break;case 44:e.next=50;break;case 46:throw e.prev=46,e.t1=e.catch(5),console.warn(e.t1),e.t1;case 50:return e.prev=50,Object(f.F)((function(){Object(D.arraySetRemove)(t.waiting,r)})),e.finish(50);case 53:return o&&t.log&&console.log("Resuming after waiting: ".concat(r)),e.prev=54,d=n(),t.tracker.track("discogs",r,d),h=void 0,e.next=60,d;case 60:return h=e.sent,a&&console.log({key:r,newValue:h}),c&&t.cacheValue(r,h),e.abrupt("return",h);case 66:if(e.prev=66,e.t2=e.catch(54),"object"!==typeof(p=function(){if("statusCode"in e.t2)return console.log("".concat(e.t2.statusCode,": ").concat(r)),{v:void 0};console.warn(e.t2);var n=Date.now();Object(f.F)((function(){return t.lastErrorTimestamp.value=n}));var a=n+1e4;if(t.errorPause=a,setTimeout(t.clearErrorPause,1e4,a),--s<=0)throw e.t2}())){e.next=71;break}return e.abrupt("return",p.v);case 71:e.next=3;break;case 73:case"end":return e.stop()}}),e,null,[[5,46,50,53],[54,66]])})));return function(t,n,r,a,i){return e.apply(this,arguments)}}(),this.clearErrorPause=function(e){t.errorPause===e&&(t.errorPause=0)},this.clear=function(){var e=Object(P.a)(A.a.mark((function e(n){var r,a,i,c=arguments;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>1&&void 0!==c[1]&&c[1],n){e.next=5;break}return e.next=4,t.storage;case 4:return e.abrupt("return",e.sent.delete("get",IDBKeyRange.lowerBound("")));case 5:return e.next=7,t.storage;case 7:return a=e.sent.transaction(["get"],"readwrite"),e.next=10,t.keys(n,a.db);case 10:return i=e.sent,e.next=13,Promise.all(i.map((function(e){return a.db.delete("get",e).then((function(){return console.log("cleared ".concat(e))}))})));case 13:return e.next=15,a.done;case 15:r&&Object(f.F)((function(){return t.version++}));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.cacheValue=function(){var e=Object(P.a)(A.a.mark((function e(n,r){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.storage;case 2:return e.next=4,e.sent.put("get",{url:n,data:r});case 4:Object(f.F)((function(){return t.version++}));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.allKeysPromise=void 0,this.getAllKeys=function(){return t.allKeysPromise||(t.allKeysPromise=t.storage.then((function(e){return e.getAllKeys("get")})),t.allKeysPromise.then((function(){return t.allKeysPromise=void 0}),(function(){return t.allKeysPromise=void 0}))),t.allKeysPromise},this.count=Object(P.a)(A.a.mark((function e(){var n,r,a,i,c=arguments;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=c.length>0&&void 0!==c[0]?c[0]:{},r=n.url,!(a=n.data)){e.next=9;break}return e.next=4,t.storage;case 4:return e.next=6,e.sent.getAll("get");case 6:return e.next=8,e.sent.filter((function(e){return!(r&&!fa(r,e.url))&&fa(a,e.data)}));case 8:return e.abrupt("return",e.sent.length);case 9:if(!r){e.next=15;break}return e.next=12,t.getAllKeys();case 12:return i=(i=e.sent).filter(fa.bind(null,r)),e.abrupt("return",i.length);case 15:return e.next=17,t.storage;case 17:return e.abrupt("return",e.sent.count("get"));case 18:case"end":return e.stop()}}),e)}))),this.keys=Object(P.a)(A.a.mark((function e(){var n,r,a,i,c,s,o=arguments;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.length>0&&void 0!==o[0]?o[0]:{},r=n.url,a=n.data,i=o.length>1?o[1]:void 0,e.prev=2,null===i||void 0===i){e.next=7;break}e.t0=i,e.next=10;break;case 7:return e.next=9,t.storage;case 9:e.t0=e.sent;case 10:if(c=e.t0,!a){e.next=15;break}return e.next=14,c.getAll("get");case 14:return e.abrupt("return",e.sent.filter((function(e){return!(r&&!fa(r,e.url))&&fa(a,e.data)})).map((function(e){return e.url})));case 15:if(!r){e.next=21;break}return e.next=18,t.getAllKeys();case 18:return s=(s=e.sent).filter(fa.bind(null,r)),e.abrupt("return",s);case 21:return e.abrupt("return",t.getAllKeys());case 24:return e.prev=24,e.t1=e.catch(2),console.error(e.t1),e.abrupt("return",[]);case 28:case"end":return e.stop()}}),e,null,[[2,24]])}))),this.entries=Object(P.a)(A.a.mark((function e(){var n,r,a,i,c,s=arguments;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=s.length>0&&void 0!==s[0]?s[0]:{},r=n.url,a=n.data,i=s.length>1?s[1]:void 0,e.prev=2,null===i||void 0===i){e.next=7;break}e.t0=i,e.next=10;break;case 7:return e.next=9,t.storage;case 9:e.t0=e.sent;case 10:return c=e.t0,e.next=13,c.getAll("get");case 13:return e.abrupt("return",e.sent.filter((function(e){return!(r&&!fa(r,e.url))&&!(a&&!fa(a,e.data))})).map((function(e){return[e.url,e.data]})));case 16:return e.prev=16,e.t1=e.catch(2),console.error(e.t1),e.abrupt("return",[]);case 20:case"end":return e.stop()}}),e,null,[[2,16]])}))),this.storage=ca.a("DiscogsIndexedCache",7,{upgrade:function(e,t){if(t<1&&e.createObjectStore("get",{keyPath:"url"}),t<5){e.createObjectStore("artists",{keyPath:"id"}).createIndex("by-name","name");var n=e.createObjectStore("artistRoles",{keyPath:"id"});n.createIndex("by-artist","artist"),n.createIndex("by-role","role"),n.createIndex("by-release","release")}if(t<6){var r=e.createObjectStore("releases",{keyPath:"id"});r.createIndex("by-master","masterId"),r.createIndex("by-year","year")}if(t<7){e.deleteObjectStore("artistRoles");var a=e.createObjectStore("artistRoles");a.createIndex("by-artist","artist"),a.createIndex("by-role","role"),a.createIndex("by-release","release")}}}),Object(f.A)(this,{cache:f.B,bypass:f.B,log:f.B,version:f.B,waiting:f.B,simultaneousRequestLimit:f.B,requestPerMinuteCap:f.B,clear:f.k}),this.tracker.listeners.push(this.checkRate)}return Object(ia.a)(e,[{key:"tracker",get:function(){return oa["[[PromiseTracker]]"]=oa["[[PromiseTracker]]"]||new sa}},{key:"rpm",get:function(){return this.rpmCache()}},{key:"inflight",get:function(){return this.inflightCache()}},{key:"dbInflight",get:function(){return this.dbInflightCache()}},{key:"history",get:function(){return this.historyCache()}},{key:"highPriorityKey",value:function(e){return!!e.match("per_page")}},{key:"getFromCache",value:function(e){var t=this;Object(f.F)((function(){return Object(D.arraySetRemove)(t.waiting,e)}));var n=this.storage.then((function(t){return t.get("get",e)}));return this.tracker.track("idb",e+" [IDB]",n),n.then((function(){return Object(f.F)((function(){return t.waiting.push(e)}))})),n}}]),e}();function fa(e,t){try{if(null===t)return!0;if("string"===typeof t)return"string"===typeof e?t.includes(e):e.test(t);if("string"!==typeof e)return fa(e,JSON.stringify(t));try{return $.a.query(t,e,1).length>0}catch(n){try{$.a.parse(e)}catch(r){console.error("Failed to parse JSONPath expression",e,r)}throw n}}catch(n){return console.error("Error running test on value",fa,t,n),!1}}var ha=n(293),pa=n(437),va=n.n(pa),ba=n(14),ja=n(234),ma=n.n(ja),ga=ba.g.model("Image",{type:ba.g.enumeration(["primary","secondary"]),width:ba.g.number,height:ba.g.number,uri:ba.g.identifier,uri150:ba.g.string}),Oa=ba.g.model("Artist",{id:ba.g.identifierNumber,name:ba.g.optional(ba.g.string,"unknown"),cacheKey:ba.g.optional(ba.g.string,"artist"),profile:ba.g.optional(ba.g.string,""),images:ba.g.optional(ba.g.array(ga),[])}).views((function(e){return{get uri(){return"https://www.discogs.com/artist/".concat(e.id)}}})).actions((function(e){var t={hydrating:!1,promise:void 0},n=Object(ba.b)(A.a.mark((function n(){var r,a,i;return A.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.hydrating){n.next=3;break}return t.hydrating=!1,n.abrupt("return");case 3:return r=Object(ba.c)(e),a=r.db,n.next=6,a;case 6:return i=n.sent,n.next=9,i.put("artists",Object(ba.e)(e));case 9:case"end":return n.stop()}}),n)}))),r=Object(ba.b)(A.a.mark((function n(){var r,a,i,c,s,o,u,l=arguments;return A.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=l.length>0&&void 0!==l[0]&&l[0],n.prev=1,a=Object(ba.c)(e),i=a.cache,c=a.client,r&&i.clear({url:e.cacheKey}),n.next=6,c.getArtist(Number(e.id));case 6:(o=n.sent)?((s=ma()(o,"profile","images")).id=e.id,s.name=ht(o.name),s.cacheKey=o.resource_url,Object(ba.a)(e,s)):console.warn("Failed to retrieve artist ".concat(e.id," from Discogs")),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(1),console.warn("Failed to retrieve artist ".concat(e.id," from Discogs"),n.t0);case 13:return n.prev=13,null===(u=t.resolve)||void 0===u||u.call(t),n.finish(13);case 16:case"end":return n.stop()}}),n,null,[[1,10,13,16]])})));return{loading:function(){var e;return null!==(e=t.promise)&&void 0!==e?e:Promise.resolve()},startLoading:function(){var e=new Promise((function(e,n){return t.resolve=e})),n=function(){t.promise===e&&(t.promise=void 0,t.resolve=void 0)};e.then(n,n),t.promise=e},hydrate:function(n){var r;t.hydrating=!0,Object(ba.a)(e,n),null===(r=t.resolve)||void 0===r||r.call(t)},persist:n,refresh:r,afterCreate:function(){Object(ba.f)(e,n)}}})),ya=ba.g.model("ArtistStore",{artists:ba.g.optional(ba.g.map(Oa),{})}).views((function(e){return{get all(){return Array.from(e.artists.values())}}})).actions((function(e){function t(t,n){if(0===t)throw new Error("Zero is not a valid ID.");var r=e.artists.get(t.toString());if(void 0===r){r=Oa.create({id:t,name:n}),e.putInternal(r);var a=Object(ba.c)(e).db,i=r;i.startLoading();var c=function(e){console.error(e),i.refresh()};a.then((function(e){return e.get("artists",t)}),c).then((function(e){e?(e.name=ht(e.name),i.hydrate(e)):i.refresh()}),c)}return r}return{get:t,loadAll:function(){Object(ba.c)(e).db.then((function(e){return e.getAllKeys("artists").then((function(e){return e.forEach((function(e){return 0!==e&&t(e)}))}))}))},putInternal:function(t){e.artists.put(t)}}})),xa=ba.g.maybe(ba.g.reference(ba.g.late((function(){return Oa})),{get:function(e,t){if(e)return Pa(t).artistStore.get(Number(e))},set:function(e){return e.id}})),ka=ba.g.model("ArtistRoleModel",{artist:xa,role:ba.g.string}),Sa=ba.g.model("Release",{id:ba.g.identifierNumber,title:ba.g.optional(ba.g.string,"unknown"),cacheKey:ba.g.optional(ba.g.string,"release"),artists:ba.g.optional(ba.g.array(ka),[]),rating:ba.g.maybe(ba.g.number),ratingCount:ba.g.maybe(ba.g.integer),images:ba.g.optional(ba.g.array(ga),[]),thumb:ba.g.maybe(ba.g.string),version:ba.g.optional(ba.g.integer,0)}).views((function(e){return{get stale(){return e.version<3}}})).actions((function(e){var t={hydrating:!1};var n=Object(ba.b)(A.a.mark((function n(){var r,a,i,c,o,u,l,d,f,h,p,v,b,j,m,g,O;return A.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.hydrating){n.next=4;break}return t.hydrating=!1,n.abrupt("return");case 4:return r=Object(ba.c)(e),a=r.db,n.next=7,a;case 7:return i=n.sent,c=i.transaction(["releases","artistRoles"],"readwrite"),n.next=11,c.db.put("releases",Object(ba.e)(e));case 11:return n.sent,n.next=14,c.db.getAllKeysFromIndex("artistRoles","by-release",e.id);case 14:o=n.sent,u=Object(M.a)(e.artists),n.prev=16,u.s();case 18:if((l=u.n()).done){n.next=31;break}if(d=l.value,f=d.artist,h=d.role,f){n.next=24;break}console.warn("bogus element in ".concat(e.title,"'s artists, role is ").concat(h)),n.next=29;break;case 24:if(p=Ca(f.id,h,e.id),v=Object(s.a)(p,2),b=v[0],j=v[1],Object(D.arraySetRemove)(o,j)){n.next=29;break}return n.next=28,c.db.put("artistRoles",b,j);case 28:n.sent;case 29:n.next=18;break;case 31:n.next=36;break;case 33:n.prev=33,n.t0=n.catch(16),u.e(n.t0);case 36:return n.prev=36,u.f(),n.finish(36);case 39:m=Object(M.a)(o),n.prev=40,m.s();case 42:if((g=m.n()).done){n.next=49;break}return O=g.value,n.next=47,c.db.delete("artistRoles",O);case 47:n.next=42;break;case 49:n.next=54;break;case 51:n.prev=51,n.t1=n.catch(40),m.e(n.t1);case 54:return n.prev=54,m.f(),n.finish(54);case 57:return n.next=59,c.done;case 59:n.sent;case 61:case"end":return n.stop()}}),n,null,[[16,33,36,39],[40,51,54,57]])}))),r=Object(ba.b)(A.a.mark((function t(){var n,r,a,i,c,s,o=arguments;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>0&&void 0!==o[0]&&o[0],r=Object(ba.c)(e),a=r.cache,i=r.client,n&&a.clear({url:e.cacheKey}),t.next=5,i.getRelease(Number(e.id));case 5:c=t.sent,(s=ma()(c,"title","images","thumb")).id=e.id,s.cacheKey=c.resource_url,s.artists=O()(Rt(c).map((function(e){var t=e.id,n=e.role;return t&&{artist:t.toString(),role:n}}))),s.rating=c.community.rating.average,s.ratingCount=c.community.rating.count,s.version=3,Object(ba.a)(e,s);case 15:case"end":return t.stop()}}),t)})));return{hydrate:function(n){t.hydrating=!0,Object(ba.a)(e,n)},persist:n,refresh:r,afterCreate:function(){Object(ba.f)(e,n)}}})),wa=ba.g.model("ReleaseStore",{releases:ba.g.map(Sa)}).views((function(e){var t=Object(f.B)({loaded:0,all:void 0}),n=Object(f.B)(new Set);return{get all(){return Array.from(e.releases.values())},get count(){return Object(ba.c)(e).db.then((function(e){return e.count("releases")})).then(Object(f.k)((function(e){return t.all=e}))),Object(f.F)((function(){return t.loaded=e.releases.size})),t},get known(){return Object(ba.c)(e).db.then((function(e){return e.getAllKeys("releases")})).then((function(e){return e.forEach(Object(f.k)((function(e){n.add(e)})))})),e.releases.forEach(Object(f.k)((function(e){var t=e.id;return n.add(t)}))),n}}})).actions((function(e){function t(t){var n=e.releases.get(t.toString());if(void 0===n){n=Sa.create({id:t}),e.putInternal(n);var r=Object(ba.c)(e).db,a=n;r.then((function(e){return e.get("releases",t)})).then((function(e){e?a.hydrate(e):a.refresh()})).catch((function(e){console.error(e),a.refresh()}))}return n}return{get:t,loadAll:function(){Object(ba.c)(e).db.then((function(e){return e.getAllKeys("releases").then((function(e){return e.forEach((function(e){return t(e)}))}))}))},putInternal:function(t){e.releases.put(t)}}}));function Ca(e,t,n){return[{artist:e,role:t,release:n},"".concat(e,"-").concat(n,"-").concat(t)]}var Ea=ba.g.maybe(ba.g.reference(ba.g.late((function(){return Sa})),{get:function(e,t){return Pa(t).releaseStore.get(Number(e))},set:function(e){return e.id}})),_a=n(438),Na=new(0,n.n(_a).a),Ia=Object(f.k)(ha.sync),Ra=ba.g.model({id:ba.g.identifier,artist:xa,role:ba.g.string,release:Ea}),Ta=ba.g.model({arms:ba.g.optional(ba.g.map(Ra),{})}).actions((function(e){return{get:function(t){var n=e.arms.get(t);if(n)return n;var r=Object(R.a)(/^([0-9]+)\x2D([0-9]+)\x2D(.*)$/,{artist:1,release:2,role:3}).exec(t);if(!r)throw new Error("Bad armId: ".concat(t));return n=Ra.create(Object(F.a)({id:t},r.groups)),e.arms.put(n),n}}})),Aa=ba.g.model("Store",{artistStore:ba.g.optional(ya,{}),releaseStore:ba.g.optional(wa,{}),armStore:ba.g.optional(Ta,{})}).views((function(e){var t=new Map;return{roles:function(n){var r="number"===typeof n?n:n.id;if(isNaN(r))throw new Error("NaN artist");var a=t.get(r);void 0===a&&(t.set(r,a=[]),Object(ba.c)(e).db.then((function(t){t.getAllKeysFromIndex("artistRoles","by-artist",r).then((function(t){t.forEach(Object(f.k)((function(t){var n;null===(n=a)||void 0===n||n.push(e.armStore.get(t))})))}),(function(e){return console.log("".concat(e.message," for key ").concat(r))}))})));return a}}}));function Pa(e){return Object(ba.d)(e)}var Ma=function(){return Object(f.B)([])},La=function(){function e(t,n){var r=this;Object(aa.a)(this,e),this.client=t,this.cache=n,this.addToCollection=Object(f.k)((function(e){var t=r.collection.get(e.instance_id);t?(va()(t,e),e=t):r.collection.set(e.instance_id,e);var n=r.entriesByReleaseId.getOrCreate(e.id,Ma);Object(D.arraySetAdd)(n,e)})),this.collection=new dn.a,this.entriesByReleaseId=new dn.a,this.releases=new dn.a,this.labels=new dn.a,this.masters=new dn.a,this.mastersByReleaseId=new dn.a,this.inventory=new dn.a,this.lists=new dn.a,this.tags=Object(f.B)([]),this.byTagCache=new Map,this.inventoryByReleaseIdCache=new dn.a,this.priceSuggestionsByReleaseIdCache=new dn.a,this.store=void 0,this.master=Object(f.k)((function(e){var t=function(){};if(void 0===e||0===e)return{status:"ready",value:"no-master-release",refresh:t};var n=r.masters.get(e);if(n)return n;var a=Object(f.B)({status:"pending"});return t=function(){return r.client.getMaster(e).then(Object(f.k)((function(e){Object(f.G)(a,"status","ready"),Object(f.G)(a,"value",e),Object(f.G)(a,"refresh",t)})),Object(f.k)((function(e){Object(f.G)(a,"status","error"),Object(f.G)(a,"error",e),Object(f.G)(a,"refresh",t)})))},r.masters.set(e,a),t(),a})),this.label=Object(f.k)((function(e){var t=function(e){},n=r.labels.get(e);return n||(n=Object(f.B)({status:"pending"}),t=function(a){r.cache.bypass=!a;var i=r.client.getLabel(e);return r.cache.bypass=!1,i.then(Object(f.k)((function(e){Object(f.G)(n,"status","ready"),Object(f.G)(n,"value",e),Object(f.G)(n,"refresh",t)})),Object(f.k)((function(e){Object(f.G)(n,"status","error"),Object(f.G)(n,"error",e),Object(f.G)(n,"refresh",t)})))},r.labels.set(e,n),t(!0),n)})),this.inventoryByReleaseId=function(e){var t,n=r.inventory.values().filter((function(t){var n=t.release.id;return e===n}));switch(n.length){case 0:return;case 1:return n[0];default:return(t=console).warn.apply(t,["Multiple listings for ".concat(e,":")].concat(Object(L.a)(n))),n[0]}},this.priceSuggestionsByReleaseId=function(e,t){void 0===t?t={status:"pending"}:t.status="pending";var n=Object(f.B)(t);return function t(){return r.client.getPriceSuggestions(e).then(Object(f.k)((function(e){return Object(f.G)(n,{status:"ready",value:e,refresh:t}),n})),Object(f.k)((function(e){return Object(f.G)(n,{status:"error",error:e,refresh:t}),n})))}(),n};var a={cache:n,client:t,db:n.storage};this.store=Aa.create({},a)}return Object(ia.a)(e,[{key:"artistStore",get:function(){return this.store.artistStore}},{key:"releaseStore",get:function(){return this.store.releaseStore}},{key:"byTag",value:function(e){if(!this.byTagCache.has(e)){var t=Object(f.B)([]);this.byTagCache.set(e,t),this.refresh(e,t)}return this.byTagCache.get(e)}},{key:"listByName",value:function(e){var t,n=Object(M.a)(this.lists.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.definition.name===e)return r}}catch(a){n.e(a)}finally{n.f()}}},{key:"listsForRelease",value:function(e){var t,n=[],r=Object(M.a)(this.lists.values());try{for(r.s();!(t=r.n()).done;){var a=t.value,i=a.items.find((function(t){return t.id===e}));i&&n.push({list:a,entry:i})}}catch(c){r.e(c)}finally{r.f()}return n}},{key:"entriesForRelease",value:function(e){return this.entriesByReleaseId.get(e)}},{key:"details",value:function(e){var t=this,n=e.id,r=this.releases.get(n);if(void 0!==r)return r;r=Object(f.B)({status:"pending"});var a=function(){};return a=function(){var e;if("ready"===(null===(e=r)||void 0===e?void 0:e.status)){var i={url:r.value.resource_url};return t.cache.clear(i).then(a)}return t.client.getRelease(n).then(Object(f.k)((function(e){Object(f.G)(r,"status","ready"),Object(f.G)(r,"value",e),Object(f.G)(r,"refresh",a)})),Object(f.k)((function(e){Object(f.G)(r,"status","error"),Object(f.G)(r,"error",e),Object(f.G)(r,"refresh",a)})))},this.releases.set(n,r),a(),r}},{key:"masterForColectionItemFancySlowWay",value:function(e){var t=this,n=this.mastersByReleaseId.get(e.id);return n||(n=Object(f.B)({status:"pending"}),this.mastersByReleaseId.set(e.id,n),Object(f.l)((function(){var r=t.details(e);if("ready"===r.status){var a=t.masterForRelease(r.value);Object(f.F)((function(){Object(f.G)(n,"status",a.status)})),"ready"===a.status?(Object(f.G)(n,"value",a.value),Object(f.G)(n,"refresh",a.refresh)):"error"===a.status&&(Object(f.G)(n,"error",a.error),Object(f.G)(n,"refresh",a.refresh))}else"error"===r.status?Object(f.F)((function(){Object(f.G)(n,"error",r.error),Object(f.G)(n,"refresh",r.refresh)})):Object(f.F)((function(){Object(f.G)(n,"status",r.status)}))})),n)}},{key:"masterForColectionItem",value:function(e){return this.master(e.basic_information.master_id)}},{key:"masterForRelease",value:function(e){return this.master(e.master_id)}},{key:"detail",value:function(e,t,n){var r=this;return Object(f.m)((function(){var a=r.details(e);return"ready"===a.status?{status:a.status,value:a.value[t]}:{status:a.status,value:n}}))}},{key:"masterDetail",value:function(e,t,n){var r=this;return Object(f.m)((function(){var a=r.masterForColectionItem(e);return"ready"===a.status&&"no-master-release"!==a.value?{status:a.status,value:a.value[t],refresh:a.refresh}:{status:a.status,value:n,refresh:"pending"!==a.status&&a.refresh}}))}},{key:"artist",value:function(e,t){return this.artistStore.get(e,t)}},{key:"listing",value:function(e){var t=e.id;return this.inventoryByReleaseIdCache.getOrCreate(t,this.inventoryByReleaseId.bind(this,t))}},{key:"suggestions",value:function(e){var t=e.id,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.priceSuggestionsByReleaseIdCache.getOrRefresh(t,this.priceSuggestionsByReleaseId.bind(this,t),n)}},{key:"refresh",value:function(e,t){Na.byTag(e).then((function(e){Ia(e,t)}))}}]),e}(),Fa=n(46),Da=n.p+"static/media/elephant.e3c642c8.svg";n(800),n(801);function Ba(e){var t=e.autoHide,n=e.children;return e.hidden||t&&0===a.a.Children.count(n)?null:Object(N.jsx)("span",{className:"loader",children:Object(N.jsx)("span",{children:n})})}n(802);function Ga(e){var t=e.className,n=e.collection,r=e.search,i=e.setSearch,c=e.filter,s=a.a.useMemo((function(){return Object(f.m)((function(){return c?n.count(c.fn):n.size}))}),[n,c]);return Object(N.jsxs)("div",{className:U("search-box",t),children:[Object(N.jsx)(w.a,{render:function(){return Object(N.jsx)(ne.a.Control,{placeholder:"search ".concat(s.get()," records"),value:r,onChange:function(e){var t=e.target.value;i(t)}})}}),Object(N.jsx)(re.z,{className:"prepend"}),Object(N.jsx)(re.D,{className:U("append",!r&&"d-none"),onClick:i.bind(null,"")})]})}var Ua=n(155),za=["Year",0,1,2,3,4,5];function $a(e){var t=e.items,n=a.a.useContext(ue.a),r=n.lpdb,i=n.orders,c=Fe().priceId,l=ot(),d=ft(),h=a.a.useMemo((function(){return new Set(K()(t,"id"))}),[t]),v=a.a.useMemo((function(){var e=0,t=0,n=0,r=new Map;return i.values().forEach((function(a){a.status.includes("Cancelled")||(n++,t+=.75,a.items.forEach((function(n){var a=n.release.id,i=n.price.value;h.has(a)&&(e+=1,i&&(t+=i,r.set(a,i)))})))})),{count:e,txCount:n,value:{currency:u.a.USD,value:t},valueByRelease:r}}),[i,h]),j=a.a.useMemo((function(){return Object(L.a)(O()(t.map((function(e){if(!Tn(e))return[e.basic_information.title,e.rating]}))))}),[t]),m=a.a.useMemo((function(){return[[{type:"number",label:"Release"},{type:"number",label:"Price",pattern:"$0.00"},{type:"number",label:"Sold For"}]].concat(Object(L.a)(O()(t.map((function(e){var t=e.id,n=e.basic_information.title,r=e.notes,a=c&&st(r,c),i=v.valueByRelease.get(t);return(a||i)&&[n,a,i]})))))}),[v.valueByRelease,t,c]),g=a.a.useMemo((function(){return Object(L.a)(O()(t.map((function(e){var t=e.basic_information.title,n=e.notes,r=e.rating,a=c&&st(n,c);return a&&!isNaN(Number(a))&&r&&!isNaN(Number(r))&&[Number(a),r,t]}))))}),[t,c]),y=a.a.useMemo((function(){var e={};g.forEach((function(t){var n,r,a=Object(s.a)(t,2),i=a[0],c=a[1],o=Math.ceil(i),u=Math.ceil(c),l=e[o]=null!==(n=e[o])&&void 0!==n?n:{},d=l[u]=null!==(r=l[u])&&void 0!==r?r:0;e[o][u]=d+1}));var t=[];return Object.entries(e).forEach((function(e){var n=Object(s.a)(e,2),r=n[0],a=n[1];return Object.entries(a).forEach((function(e){var n=Object(s.a)(e,2),a=n[0],i=n[1];return t.push(["",Number(r),Number(a),Number(a),i])}))})),t}),[g]),x=a.a.useMemo((function(){var e=m.map((function(e){var t=Object(s.a)(e,2)[1];return isNaN(Number(t))?0:Number(t)}));return bn()(e)}),[m]),k=a.a.useMemo((function(){var e=new Map;t.forEach((function(t){if(!Tn(t)){var n=function(e,t){return Object(f.m)((function(){var n=e.masterDetail(t,"year",void 0).get();return"ready"===n.status&&n.value?n.value:ke(t.basic_information.year)}))}(r,t).get();if(n){var a=ke(d(t).get()),i=za.indexOf(Math.ceil(a));if(!(i<1)){if(!e.has(n)){var c=za.map((function(){return 0}));c[0]=n,e.set(n,c)}e.get(n)[i]++}}}}));var n=za.map((function(e){return{label:e.toString(),type:"number"}}));return n[0]={type:"number",label:"Year",pattern:"0000"},[n].concat(Object(L.a)(dr()(Array.from(e.values()))))}),[d,t,r]),S=a.a.useMemo((function(){var e=new Map;return t.forEach((function(t){if(!Tn(t)){var n=l(t);if(n){var r=n.plays-n.history.length;if(r>1)for(var a,i=null!==(a=n.dates.get().pop())&&void 0!==a?a:new Date(2021,6,27),c=0;c<r;++c){var s,o=new Date(t.date_added);(o=new Date(o.getTime()+(c+1)*((i.getTime()-o.getTime())/(r+1)))).setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0);var u=null!==(s=e.get(o.getTime()))&&void 0!==s?s:[];u.push(t),e.set(o.getTime(),u)}n.dates.get().forEach((function(n){var r,a=null!==(r=e.get(n.getTime()))&&void 0!==r?r:[];a.push(t),e.set(n.getTime(),a)}))}}})),Array.from(e.keys()).map((function(t){return[new Date(t),e.get(t).length,e.get(t)]}))}),[t,l]),w=Object(o.default)("session",["CollectionStats","showSales"],!1),C=Object(s.a)(w,2),E=C[0],_=C[1],R=a.a.useState(),T=Object(s.a)(R,2),A=T[0],P=T[1];return Object(N.jsxs)("dl",{children:[Object(N.jsx)("dt",{children:"Count"}),Object(N.jsx)("dd",{children:t.length}),Object(N.jsx)("dt",{children:"Rating Distribution"}),Object(N.jsx)("dd",{children:Object(N.jsx)(Ua.a,{chartType:"Histogram",options:{legend:{position:"none"},histogram:{bucketSize:1},hAxis:{viewWindowMode:"maximized"}},data:[[{type:"string",label:"Release"},{type:"number",label:"Rating"}]].concat(Object(L.a)(j))})}),Object(N.jsx)("dt",{children:"Rating by Year"}),Object(N.jsx)("dd",{children:Object(N.jsx)(Ua.a,{chartType:"SteppedAreaChart",options:{isStacked:!0,legend:{position:"top",maxLines:3},colors:["#ffffff","#BC6161","#8F7C63","#639766","#36B269","#0ACE6C"],hAxis:{viewWindow:{min:1950}}},data:k})}),Object(N.jsx)("dt",{children:"Cost"}),Object(N.jsx)("dd",{children:Lr({currency:u.a.USD,value:x})}),Object(N.jsx)("dt",{children:"Income"}),Object(N.jsxs)("dd",{title:"includes about ".concat(Lr({value:.75*v.txCount,currency:u.a.USD})," in shipping fee arbitrage"),children:[Lr(v.value)," (",v.count," sold in ",v.txCount," orders)"]}),Object(N.jsx)("dt",{children:"Price Distribution"}),Object(N.jsxs)("dd",{children:[Object(N.jsx)(nn.a,{label:"Include Sold-For",value:E,setValue:_}),Object(N.jsx)(Ua.a,{chartType:"Histogram",data:m.map((function(e){var t=Object(s.a)(e,3),n=(t[0],t[1]),r=t[2];return E?[n,r]:[n]}))}),Object(N.jsx)(Ua.a,{chartType:"BubbleChart",data:[[{label:"Bubble",type:"string"},{label:"Price",type:"number",pattern:"$0.00"},{label:"Rating",type:"number"},{type:"number"},{label:"Count",type:"number"}]].concat(Object(L.a)(y)),options:{legend:{position:"none"},hAxis:{title:"Price"},vAxis:{title:"Star Rating",ticks:[0,1,2,3,4,5],maxValue:6},colors:["#BC6161","#8F7C63","#639766","#36B269","#0ACE6C"]},height:400})]}),Object(N.jsx)("dt",{children:"Listening History"}),Object(N.jsx)("dd",{children:Object(N.jsxs)(b.a,{children:[Object(N.jsx)("div",{style:{width:1024},children:Object(N.jsx)(Ua.a,{chartType:"Calendar",width:"100%",data:[[{type:"date",id:"Date"},{type:"number",id:"Count"}]].concat(Object(L.a)(S.map((function(e){var t=Object(s.a)(e,2);return[t[0],t[1]]})))),options:{height:800},chartEvents:[{eventName:"select",callback:function(e){var t,n=(null===(t=e.chartWrapper.getChart().getSelection())||void 0===t?void 0:t[0]).row;P(n?{row:n,date:S[n][0],items:S[n][2]}:void 0)}}]})}),A&&Object(N.jsxs)(p.a,{children:[Object(N.jsx)("h4",{children:A.date.toDateString()}),A.items.map((function(e,t){return Object(N.jsx)(b.a,{children:Object(N.jsx)(I,{item:e,thumb:!0})},t)}))]})]})})]})}var Va=function(){var e=m.g().statName;return e=decodeURIComponent(e),Object(N.jsx)(N.Fragment,{children:e})},Ha=Object(C.a)((function(){var e=a.a.useContext(ue.a).collection;return Object(N.jsx)(N.Fragment,{children:Object(N.jsx)($a,{items:e.values()})})}));function qa(){var e=m.h().path;return Object(N.jsx)("div",{children:Object(N.jsxs)(m.c,{children:[Object(N.jsx)(m.a,{path:Ka(e),children:Object(N.jsx)(Va,{})}),Object(N.jsx)(m.a,{path:e,children:Object(N.jsx)(Ha,{})})]})})}function Ka(e){return"".concat(e,"/:statName")}var Wa=function(){var e=m.g().tagName;e=decodeURIComponent(e);var t=a.a.useContext(ue.a).collection,n=ut(),r=Wt(t.values,(function(t){return!!n(t,{includeLocation:!0}).get().find((function(t){return t.tag===e}))}));return Object(N.jsx)(w.a,{render:function(){var t=r;return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("h2",{children:e}),Object(N.jsx)(Dt,{title:"Stats",children:Object(N.jsx)($a,{items:t})}),Object(N.jsx)(Tr,{collectionSubset:t,storageKey:"tag"})]})}})},Ja=Object(C.a)((function(){var e=a.a.useContext(ue.a).collection,t=ut(),n=Object(f.m)((function(){return Q()(yt()(e.values().map((function(e){return t(e,{includeLocation:!0}).get()}))),"tag")}));return Object(N.jsx)(N.Fragment,{children:x()(n.get(),"name").map((function(e){return Object(N.jsx)(ve,Object(F.a)({},e),he(e.tag))}))})}));function Xa(){var e=m.h().path;return Object(N.jsx)("div",{children:Object(N.jsxs)(m.c,{children:[Object(N.jsx)(m.a,{path:Ya(e),children:Object(N.jsx)(Wa,{})}),Object(N.jsx)(m.a,{path:e,children:Object(N.jsx)(Ja,{})})]})})}function Ya(e){return"".concat(e,"/:tagName")}var Za=Object(C.a)((function(){var e=m.g().taskName;e=decodeURIComponent(e);var t=a.a.useContext(ue.a).collection,n=lt().tasks,r=a.a.useState(!1),i=Object(s.a)(r,2),c=i[0],o=i[1],u=Object(f.m)((function(){return t.values().filter((function(t){return n(t).find((function(t){var n,r=t.split("] "),a=r.pop();return!((null===(n=r.pop())||void 0===n?void 0:n.endsWith("X"))&&!c)&&a===e}))}))}));return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsxs)("h2",{children:["Task: ",e]}),Object(N.jsx)(te.a,{className:"m-2",children:Object(N.jsx)(te.a.Body,{className:"pb-2",children:Object(N.jsx)(nn.a,{label:"Show Completed",value:c,setValue:o})})}),Object(N.jsx)(Tr,{collectionSubset:u.get(),storageKey:"tasks"})]})})),Qa=Object(C.a)((function(){var e=a.a.useContext(ue.a).collection,t=lt().tasks,n=Object(f.m)((function(){return S()(yt()(e.values().map((function(e){return t(e)}))).map((function(e){return e.split("] ").pop()})))}));return Object(N.jsx)(N.Fragment,{children:x()(n.get(),"name").map((function(e){return Object(N.jsx)(ve,{tag:e,kind:pe.task},e)}))})}));function ei(){var e=m.h().path;return Object(N.jsx)("div",{children:Object(N.jsxs)(m.c,{children:[Object(N.jsx)(m.a,{path:ti(e),children:Object(N.jsx)(Za,{})}),Object(N.jsx)(m.a,{path:e,children:Object(N.jsx)(Qa,{})})]})})}function ti(e){return"".concat(e,"/:taskName")}var ni=a.a.forwardRef((function(e,t){var n=e.onClick;return Object(N.jsx)("div",{ref:t,className:"btn btn-sm btn-outline-dark",onClick:function(e){e.preventDefault(),null===n||void 0===n||n(e)},children:Object(N.jsx)(re.u,{})})}));function ri(){var e=jn(),t=e.rpm,n=e.db,r=e.waiting,a=e.errorPause,i=e.total,c=a?"".concat(Math.ceil((a-Date.now())/1e3),"s"):void 0,s=(null!==c&&void 0!==c?c:i)?i:void 0;return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(Fa.a.Text,{children:Object(N.jsx)(Ba,{autoHide:!0,children:s})}),n?Object(N.jsxs)(Fa.a.Text,{children:[n," db"]}):null,t?Object(N.jsxs)(Fa.a.Text,{children:[t," rpm"]}):null,r?Object(N.jsxs)(Fa.a.Text,{children:[r," blocked"]}):null,s?Object(N.jsx)(Fa.a.Text,{children:c?"pausing for ".concat(c):null}):null]})}function ai(e){var t,n,r=e.profile,i=e.collection,c=e.search,l=e.setSearch,d=e.showRuler,h=e.setShowRuler,p=e.fluid,v=e.setFluid,b=e.reactive,g=e.setReactive,O=e.bypassCache,y=e.setBypassCache,x=e.verbose,k=e.setVerbose,S=e.filter,C=e.setFilter,E="me-2",I=a.a.useContext(ue.a).lpdb,R=Wr(),T=function(){var e=a.a.useContext(ue.a).lpdb,t=Er(),n=function(){var e=me();return a.a.useCallback((function(t){return"unknown"===je(e(t.folder_id)).status}),[e])}();return{id:"in-collection",fn:a.a.useCallback((function(r){return!!Rn(r)&&(!(null===e||void 0===e?void 0:e.listing(r))&&(!t(r)&&!n(r)))}),[n,t,e])}}(),A=Object(o.default)("session",["Masthead","inventoryStatus"],u.c.ALL),P=Object(s.a)(A,2),M=P[0],L=P[1],F=a.a.useMemo((function(){return yt()([Vr(ui),Qt(li),Ya(di),ti(fi),Ka(hi)])}),[]),D=(null!==(t=m.h(F))&&void 0!==t?t:{params:{}}).params,B=D.artistId,G=D.artistName,U=D.labelId,z=D.labelName,$=D.tagName,V=D.statName,H=D.taskName,q=Number(B),K=a.a.useMemo((function(){return isNaN(q)?void 0:Object(f.m)((function(){return null===I||void 0===I?void 0:I.artist(q,G)}))}),[q,G,I]),W=Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(j.c,{activeClassName:"active",to:ui,children:"Artists"}),K&&Object(N.jsx)(N.Fragment,{children:Object(N.jsx)(w.a,{render:function(){var e;return Object(N.jsxs)(j.c,{activeClassName:"active",to:"".concat(ui,"/").concat(B),children:["\xa0/\xa0",ht(null===(e=K.get())||void 0===e?void 0:e.name)]})}})})]}),J=Number(U),X=null===(n=a.a.useMemo((function(){return isNaN(J)?void 0:Object(f.m)((function(){return null===I||void 0===I?void 0:I.label(J)}))}),[J,I]))||void 0===n?void 0:n.get(),Y=Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(j.c,{activeClassName:"active",to:li,children:"Labels"}),X&&Object(N.jsx)(N.Fragment,{children:Object(N.jsx)(w.a,{render:function(){return Object(N.jsxs)(j.c,{activeClassName:"active",to:"".concat(li,"/").concat(U),children:["\xa0/\xa0",Object(N.jsx)(Kt,{remote:[X,"name"],placeholder:ht(null!==z&&void 0!==z?z:U)})]})}})})]}),Z=Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(j.c,{activeClassName:"active",to:di,children:"Tags"}),$&&Object(N.jsx)(N.Fragment,{children:Object(N.jsxs)(j.c,{activeClassName:"active",to:"".concat(di,"/").concat($),children:["\xa0/\xa0",$]})})]}),Q=Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(j.c,{activeClassName:"active",to:fi,children:"Tasks"}),H&&Object(N.jsx)(N.Fragment,{children:Object(N.jsxs)(j.c,{activeClassName:"active",to:"".concat(fi,"/").concat(H),children:["\xa0/\xa0",H]})})]}),te=Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(j.c,{activeClassName:"active",to:hi,children:"Stats"}),V&&Object(N.jsx)(N.Fragment,{children:Object(N.jsxs)(j.c,{activeClassName:"active",to:"".concat(hi,"/").concat(V),children:["\xa0/\xa0",V]})})]});return Object(N.jsxs)(Fa.a,{bg:"light",variant:"light",className:"mb-3",expand:"xl",children:[Object(N.jsx)(Fa.a.Brand,{children:Object(N.jsxs)(j.c,{exact:!0,to:oi,children:[Object(N.jsx)(_.a,{className:"logo",src:Da}),"Elephant"]})}),Object(N.jsxs)(Fa.a.Collapse,{className:"justify-content-start",children:[Object(N.jsx)(Fa.a.Text,{children:Object(N.jsx)(j.c,{exact:!0,to:"/auth",children:"Auth"})}),Object(N.jsx)(Fa.a.Text,{children:W}),Object(N.jsx)(Fa.a.Text,{children:Y}),Object(N.jsx)(Fa.a.Text,{children:Z}),Object(N.jsx)(Fa.a.Text,{children:Q}),Object(N.jsx)(Fa.a.Text,{children:te}),Object(N.jsx)(Fa.a.Text,{children:Object(N.jsx)(j.c,{exact:!0,to:"/data",children:"Data"})}),Object(N.jsx)(Fa.a.Text,{children:Object(N.jsx)(j.c,{exact:!0,to:"/tuning",children:"Tuning"})}),Object(N.jsx)(Ga,{className:"me-3",collection:i,search:c,filter:S,setSearch:l}),Object(N.jsx)(Fa.a.Text,{children:Object(N.jsx)(nn.a,{label:"In Collection",value:(null===S||void 0===S?void 0:S.id)===(null===T||void 0===T?void 0:T.id),setValue:function(e){return C(e?T:void 0)}})}),Object(N.jsx)(Fa.a.Text,{children:Object(N.jsx)(En,{size:"sm",variant:"outline-secondary",options:Object.values(u.c),value:M,setValue:L,placeholder:"status"})}),Object(N.jsx)(ri,{})]}),Object(N.jsxs)(Fa.a.Text,{as:ee.a,children:[Object(N.jsx)(ee.a.Toggle,{as:ni}),Object(N.jsxs)(ee.a.Menu,{flip:!0,children:[Object(N.jsx)(ee.a.Item,{onClick:R,children:"Update"}),Object(N.jsx)(ee.a.Divider,{}),Object(N.jsx)(ee.a.ItemText,{children:Object(N.jsx)(nn.a,{className:E,value:d,id:"Ruler",label:"Ruler",setValue:h})}),Object(N.jsx)(ee.a.ItemText,{children:Object(N.jsx)(nn.a,{className:E,value:p,id:"Fluid",label:"Fluid",setValue:v})}),Object(N.jsx)(ee.a.ItemText,{children:Object(N.jsx)(nn.a,{className:E,value:b,id:"Reactive",label:"Reactive",setValue:g})}),Object(N.jsx)(ee.a.ItemText,{children:Object(N.jsx)(nn.a,{className:E,value:O,id:"Bypass Cache",label:"Bypass Cache",setValue:y})}),Object(N.jsx)(ee.a.ItemText,{children:Object(N.jsx)(nn.a,{className:E,value:x,id:"Verbose",label:"Verbose",setValue:k})})]})]}),r&&Object(N.jsx)(Ne,{href:r.uri,children:Object(N.jsx)(_.a,{src:r.avatar_url,height:"48"})}),Object(N.jsx)(Fa.a.Toggle,{})]})}var ii=["xs","sm","md","lg","xl","xxl"];function ci(e){var t,n,r=e.sizeKey,i=e.size,c=a.a.useState(r),o=Object(s.a)(c,2),u=o[0],l=o[1],d=a.a.useState(i),f=Object(s.a)(d,2),h=f[0],v=f[1],b=null!==(t=null!==u&&void 0!==u?u:r)&&void 0!==t?t:"md",j=null!==(n=null!==h&&void 0!==h?h:i)&&void 0!==n?n:1;return Object(N.jsxs)(p.a,Object(F.a)(Object(F.a)({},Object(Oe.a)({},b,j)),{},{children:[Object(N.jsx)(ne.a.Select,{value:b,onChange:function(e){return l(e.target.value)},children:ii.map((function(e){return Object(N.jsx)("option",{value:e,children:e},e)}))}),Object(N.jsx)(ne.a.Select,{value:j.toString(),onChange:function(e){return v(e.target.value)},children:["auto",1,2,3,4,5,6,7,8,9,10,11,12].map((function(e){return Object(N.jsx)("option",{value:e,children:e},e)}))})]}))}function si(){return Object(N.jsxs)(b.a,{className:"ruler",children:[Object(N.jsx)(ci,{}),Object(N.jsx)(ci,{}),Object(N.jsx)(ci,{}),Object(N.jsx)(ci,{}),Object(N.jsx)(ci,{}),Object(N.jsx)(ci,{}),Object(N.jsx)(ci,{}),Object(N.jsx)(ci,{}),Object(N.jsx)(ci,{}),Object(N.jsx)(ci,{}),Object(N.jsx)(ci,{}),Object(N.jsx)(ci,{})]})}var oi="/",ui="/artists",li="/labels",di="/tags",fi="/tasks",hi="/stats";function pi(){var e=Object(o.default)("local","DiscogsUserToken",""),t=Object(s.a)(e,2),n=t[0],r=t[1],i=a.a.useMemo((function(){return new da}),[]),c=a.a.useMemo((function(){return new u.b({userAgent:"Elephant/0.1.0 +https://pyrogenic.github.io/elephant",userToken:n,cache:i})}),[i,n]),l=Object(o.default)("session","search",""),g=Object(s.a)(l,2),O=g[0],y=g[1],x=a.a.useState(),k=Object(s.a)(x,2),S=k[0],w=k[1],C=Object(o.default)("local","reactive",!0),E=Object(s.a)(C,2),_=E[0],I=E[1],R=Object(o.default)("local","fluid",!0),T=Object(s.a)(R,2),A=T[0],P=T[1],M=Object(o.default)("local","showRuler",!1),L=Object(s.a)(M,2),F=L[0],D=L[1],B=Object(o.default)("local","verbose",!1),G=Object(s.a)(B,2),U=G[0],z=G[1],$=Object(o.default)("local","bypassCache",!1),V=Object(s.a)($,2),H=V[0],q=V[1],K=a.a.useState(),W=Object(s.a)(K,2),J=W[0],X=W[1],Y=a.a.useState(),Z=Object(s.a)(Y,2),Q=Z[0],ee=Z[1],te=a.a.useMemo((function(){return new dn.a}),[c]),ne=a.a.useState(),re=Object(s.a)(ne,2),ae=re[0],ie=re[1],ce=a.a.useMemo((function(){var e=new Map;return null===ae||void 0===ae||ae.forEach((function(t){return e.set(t.name,t)})),e}),[ae]),se=a.a.useState(),oe=Object(s.a)(se,2),le=oe[0],de=oe[1],fe=a.a.useMemo((function(){return new La(c,i)}),[i,c]),he=a.a.useState(new Date),pe=Object(s.a)(he,2)[1],ve=fe.collection,be=fe.inventory,je=fe.lists;a.a.useEffect((function(){c.getProfile().then(de,X),xe()}),[c]),a.a.useEffect((function e(){var t;null===(t=Oe.current)||void 0===t||t.call(Oe);var n=[Ee(),c.getLists().then((function(e){return c.all("lists",e,Ce)}),X),c.listCustomFields().then((function(e){var t=e.fields;return ie(new Map(t.map((function(e){return[e.id,e]}))))}),X),c.listItemsInFolder(0,void 0,{perPage:100}).then((function(e){return c.all("releases",e,ke)}),X),xe()];Promise.all(n).then((function(){_&&(Oe.current=Object(f.D)((function(){return i.version}),e,{delay:1e3}))}))}),[c]),a.a.useEffect((function(){Object(f.F)((function(){i.bypass=H,i.log=U}))}),[H,i,U]);var me,ge,Oe=a.a.useRef(),ye=a.a.useMemo((function(){return{cache:i,client:c,collection:ve,fieldsByName:ce,fieldsById:ae,folders:Q,orders:te,inventory:be,lists:je,lpdb:fe,setError:X}}),[i,c,ve,ae,ce,Q,be,je,fe,te]);return n?(me=oi,ge="/auth"):(me="/collection",ge="/"),Object(N.jsx)(ue.a.Provider,{value:ye,children:Object(N.jsxs)(j.a,{basename:"/elephant",children:[Object(N.jsx)(ai,{bypassCache:H,collection:ve,fluid:A,reactive:_,showRuler:F,profile:le,search:O,setBypassCache:q,filter:S,setFilter:function(e){(null===e||void 0===e?void 0:e.id)!==(null===S||void 0===S?void 0:S.id)&&w(e)},setFluid:P,setReactive:I,setShowRuler:D,setSearch:y,setVerbose:z,verbose:U}),Object(N.jsxs)(v.a,{fluid:A,children:[!d()(J)&&Object(N.jsx)(h.a,{variant:"warning",children:Object(N.jsx)("code",{children:J.toString()})}),F&&Object(N.jsx)(si,{}),Object(N.jsxs)(m.c,{children:[Object(N.jsx)(m.a,{path:ge,children:Object(N.jsx)(Xr,{setToken:r,token:n})}),Object(N.jsx)(m.a,{path:ui,children:Object(N.jsx)($r,{})}),Object(N.jsx)(m.a,{path:"/labels",children:Object(N.jsx)(Zt,{})}),Object(N.jsx)(m.a,{path:"/tags",children:Object(N.jsx)(Xa,{})}),Object(N.jsx)(m.a,{path:"/tasks",children:Object(N.jsx)(ei,{})}),Object(N.jsx)(m.a,{path:"/stats",children:Object(N.jsx)(qa,{})}),Object(N.jsx)(m.a,{path:"/data",children:Object(N.jsx)(ta,{})}),Object(N.jsx)(m.a,{path:"/tuning",children:Object(N.jsx)(rt,{})}),Object(N.jsx)(m.a,{path:me,children:Object(N.jsx)(Tr,{search:O,filter:null===S||void 0===S?void 0:S.fn,storageKey:oi})})]}),Object(N.jsx)("hr",{}),Object(N.jsx)(b.a,{children:Object(N.jsx)(p.a,{children:"This application uses Discogs\u2019 API but is not affiliated with, sponsored or endorsed by Discogs. \u2018Discogs\u2019 is a trademark of Zink Media, LLC."})})]})]})});function xe(){return c.listFolders().then((function(e){var t=e.folders;return ee(t)}),X)}function ke(e){Object(f.I)((function(){e.forEach(fe.addToCollection),pe(new Date)}))}function Se(e){Object(f.I)((function(){e.forEach((function(e){return be.set(e.release.id,e)})),pe(new Date)}))}function we(e){Object(f.I)((function(){e.forEach((function(e){return te.set(e.id,e)})),pe(new Date)}))}function Ce(e){Object(f.I)((function(){e.forEach((function(e){return c.getListItems(e.id).then((function(e){return e.items})).then((function(t){return je.set(e.id,{definition:e,items:t})}))})),pe(new Date)}))}function Ee(){var e=c.getInventory(u.c.ALL).then((function(e){return c.all("listings",e,Se)}),X),t=c.listOrders().then((function(e){return c.all("orders",e,we)}),X);return Promise.all([e,t])}}var vi=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,820)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),i(e),c(e)}))};n(803),n(804);c.a.render(Object(N.jsx)(a.a.StrictMode,{children:Object(N.jsx)(pi,{})}),document.getElementById("root")),vi(console.log)}},[[805,1,2]]]);
//# sourceMappingURL=main.5e78b00f.chunk.js.map